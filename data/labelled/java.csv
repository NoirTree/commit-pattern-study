ID,diff,Message,sha,why_category1,why_category2,why_subcategory1,why_subcategory2,what_category1,what_category2,what_subcategory1,what_subcategory2,What Note,What Note.1
141467,"mmm a / substratevm / src / com . oracle . svm . core . genscavenge / src / com / oracle / svm / core / genscavenge / HeapChunkProvider . java <nl> ppp b / substratevm / src / com . oracle . svm . core . genscavenge / src / com / oracle / svm / core / genscavenge / HeapChunkProvider . java <nl> <nl> import org . graalvm . word . WordBase ; <nl> import org . graalvm . word . WordFactory ; <nl> <nl> + import com . oracle . svm . core . FrameAccess ; <nl> import com . oracle . svm . core . MemoryWalker ; <nl> import com . oracle . svm . core . SubstrateOptions ; <nl> - import com . oracle . svm . core . amd64 . FrameAccess ; <nl> import com . oracle . svm . core . annotate . AlwaysInline ; <nl> import com . oracle . svm . core . annotate . Uninterruptible ; <nl> import com . oracle . svm . core . genscavenge . AlignedHeapChunk . AlignedHeader ; <nl> mmm a / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / GraalConfiguration . java <nl> ppp b / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / GraalConfiguration . java <nl> <nl> import org . graalvm . nativeimage . ImageSingletons ; <nl> <nl> import com . oracle . svm . core . config . ConfigurationValues ; <nl> - import com . oracle . svm . core . graal . code . amd64 . SubstrateAMD64Backend ; <nl> + import com . oracle . svm . core . graal . code . SubstrateBackendFactory ; <nl> import com . oracle . svm . core . graal . meta . SubstrateBasicLoweringProvider ; <nl> <nl> import jdk . vm . ci . meta . MetaAccessProvider ; <nl> public void populateMatchRuleRegistry ( HashMap < Class < ? extends NodeMatchRules > , E <nl> } <nl> <nl> public Backend createBackend ( Providers newProviders ) { <nl> - return new SubstrateAMD64Backend ( newProviders ) ; <nl> + return SubstrateBackendFactory . get ( ) . newBackend ( newProviders ) ; <nl> } <nl> <nl> public void runAdditionalCompilerPhases ( @ SuppressWarnings ( "" unused "" ) StructuredGraph graph , @ SuppressWarnings ( "" unused "" ) Feature graalFeature ) { <nl> new file mode 100644 <nl> index 000000000000 . . 549c91ae44c6 <nl> mmm / dev / null <nl> ppp b / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / code / SubstrateBackendFactory . java <nl> <nl> + / * <nl> + * Copyright ( c ) 2018 , 2018 , Oracle and / or its affiliates . All rights reserved . <nl> + * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER . <nl> + * <nl> + * This code is free software ; you can redistribute it and / or modify it <nl> + * under the terms of the GNU General Public License version 2 only , as <nl> + * published by the Free Software Foundation . Oracle designates this <nl> + * particular file as subject to the "" Classpath "" exception as provided <nl> + * by Oracle in the LICENSE file that accompanied this code . <nl> + * <nl> + * This code is distributed in the hope that it will be useful , but WITHOUT <nl> + * ANY WARRANTY ; without even the implied warranty of MERCHANTABILITY or <nl> + * FITNESS FOR A PARTICULAR PURPOSE . See the GNU General Public License <nl> + * version 2 for more details ( a copy is included in the LICENSE file that <nl> + * accompanied this code ) . <nl> + * <nl> + * You should have received a copy of the GNU General Public License version <nl> + * 2 along with this work ; if not , write to the Free Software Foundation , <nl> + * Inc . , 51 Franklin St , Fifth Floor , Boston , MA 02110 - 1301 USA . <nl> + * <nl> + * Please contact Oracle , 500 Oracle Parkway , Redwood Shores , CA 94065 USA <nl> + * or visit www . oracle . com if you need additional information or have any <nl> + * questions . <nl> + * / <nl> + package com . oracle . svm . core . graal . code ; <nl> + <nl> + import org . graalvm . compiler . core . target . Backend ; <nl> + import org . graalvm . compiler . phases . util . Providers ; <nl> + import org . graalvm . nativeimage . ImageSingletons ; <nl> + <nl> + public abstract class SubstrateBackendFactory { <nl> + public abstract Backend newBackend ( Providers newProviders ) ; <nl> + <nl> + public static SubstrateBackendFactory get ( ) { <nl> + return ImageSingletons . lookup ( SubstrateBackendFactory . class ) ; <nl> + } <nl> + } <nl> mmm a / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / code / SubstrateDataBuilder . java <nl> ppp b / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / code / SubstrateDataBuilder . java <nl> <nl> import org . graalvm . compiler . code . DataSection . ZeroData ; <nl> import org . graalvm . compiler . lir . asm . DataBuilder ; <nl> <nl> - import com . oracle . svm . core . amd64 . FrameAccess ; <nl> + import com . oracle . svm . core . FrameAccess ; <nl> import com . oracle . svm . core . config . ConfigurationValues ; <nl> import com . oracle . svm . core . heap . ReferenceAccess ; <nl> import com . oracle . svm . core . meta . SubstrateObjectConstant ; <nl> mmm a / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / code / amd64 / SubstrateAMD64Backend . java <nl> ppp b / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / code / amd64 / SubstrateAMD64Backend . java <nl> <nl> / * <nl> - * Copyright ( c ) 2012 , 2017 , Oracle and / or its affiliates . All rights reserved . <nl> + * Copyright ( c ) 2012 , 2018 , Oracle and / or its affiliates . All rights reserved . <nl> * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER . <nl> * <nl> * This code is free software ; you can redistribute it and / or modify it <nl> <nl> import org . graalvm . compiler . options . OptionValues ; <nl> import org . graalvm . compiler . phases . tiers . SuitesProvider ; <nl> import org . graalvm . compiler . phases . util . Providers ; <nl> + import org . graalvm . nativeimage . Feature ; <nl> import org . graalvm . nativeimage . ImageSingletons ; <nl> + import org . graalvm . nativeimage . Platform ; <nl> + import org . graalvm . nativeimage . Platforms ; <nl> <nl> + import com . oracle . svm . core . FrameAccess ; <nl> import com . oracle . svm . core . SubstrateOptions ; <nl> - import com . oracle . svm . core . amd64 . FrameAccess ; <nl> + import com . oracle . svm . core . annotate . AutomaticFeature ; <nl> import com . oracle . svm . core . config . ConfigurationValues ; <nl> import com . oracle . svm . core . deopt . DeoptimizedFrame ; <nl> import com . oracle . svm . core . deopt . Deoptimizer ; <nl> + import com . oracle . svm . core . graal . code . SubstrateBackendFactory ; <nl> import com . oracle . svm . core . graal . code . SubstrateCompiledCode ; <nl> import com . oracle . svm . core . graal . code . SubstrateDataBuilder ; <nl> import com . oracle . svm . core . graal . code . SubstrateLIRGenerator ; <nl> <nl> import jdk . vm . ci . meta . ResolvedJavaMethod ; <nl> import jdk . vm . ci . meta . Value ; <nl> <nl> + @ AutomaticFeature <nl> + @ Platforms ( Platform . AMD64 . class ) <nl> + class SubstrateAMD64BackendFeature implements Feature { <nl> + @ Override <nl> + public void afterRegistration ( AfterRegistrationAccess access ) { <nl> + ImageSingletons . add ( SubstrateBackendFactory . class , new SubstrateBackendFactory ( ) { <nl> + @ Override <nl> + public Backend newBackend ( Providers newProviders ) { <nl> + return new SubstrateAMD64Backend ( newProviders ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + } <nl> + <nl> public class SubstrateAMD64Backend extends Backend { <nl> <nl> public static final String MARK_PROLOGUE_DECD_RSP = "" PROLOGUE_DECD_RSP "" ; <nl> mmm a / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / nodes / CGlobalDataLoadAddressNode . java <nl> ppp b / substratevm / src / com . oracle . svm . core . graal / src / com / oracle / svm / core / graal / nodes / CGlobalDataLoadAddressNode . java <nl> <nl> import org . graalvm . compiler . nodes . spi . LIRLowerable ; <nl> import org . graalvm . compiler . nodes . spi . NodeLIRBuilderTool ; <nl> <nl> - import com . oracle . svm . core . amd64 . Fra",[ GR - 12059 ] Encapsulate platform specific implementations .,8d5f9a0d803632742bb56b3bbb8f20ab8fc32a51,﻿Describe Objective,,﻿To make improvements,,Illustrate Function,,,,,
341287,"mmm a / clients / src / main / java / org / apache / kafka / clients / ClientUtils . java <nl> ppp b / clients / src / main / java / org / apache / kafka / clients / ClientUtils . java <nl> <nl> public static List < InetSocketAddress > parseAndValidateAddresses ( List < String > urls ) { <nl> List < InetSocketAddress > addresses = new ArrayList < InetSocketAddress > ( ) ; <nl> for ( String url : urls ) { <nl> - if ( url ! = null & & url . length ( ) > 0 ) { <nl> - String host = getHost ( url ) ; <nl> - Integer port = getPort ( url ) ; <nl> - if ( host = = null | | port = = null ) <nl> - throw new ConfigException ( "" Invalid url in "" + CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG + "" : "" + url ) ; <nl> + if ( url ! = null & & ! url . isEmpty ( ) ) { <nl> try { <nl> + String host = getHost ( url ) ; <nl> + Integer port = getPort ( url ) ; <nl> + if ( host = = null | | port = = null ) <nl> + throw new ConfigException ( "" Invalid url in "" + CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG + "" : "" + url ) ; <nl> + <nl> InetSocketAddress address = new InetSocketAddress ( host , port ) ; <nl> + <nl> if ( address . isUnresolved ( ) ) { <nl> - log . warn ( "" Removing server from "" + CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG + "" as DNS resolution failed : "" + url ) ; <nl> + log . warn ( "" Removing server { } from { } as DNS resolution failed for { } "" , url , CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG , host ) ; <nl> } else { <nl> addresses . add ( address ) ; <nl> } <nl> - } catch ( NumberFormatException e ) { <nl> + } catch ( IllegalArgumentException e ) { <nl> throw new ConfigException ( "" Invalid port in "" + CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG + "" : "" + url ) ; <nl> } <nl> } <nl> } <nl> - if ( addresses . size ( ) < 1 ) <nl> + if ( addresses . isEmpty ( ) ) <nl> throw new ConfigException ( "" No resolvable bootstrap urls given in "" + CommonClientConfigs . BOOTSTRAP_SERVERS_CONFIG ) ; <nl> return addresses ; <nl> } <nl> mmm a / clients / src / main / java / org / apache / kafka / common / utils / Utils . java <nl> ppp b / clients / src / main / java / org / apache / kafka / common / utils / Utils . java <nl> <nl> <nl> / / This matches URIs of formats : host : port and protocol : \ \ host : port <nl> / / IPv6 is supported with [ ip ] pattern <nl> - private static final Pattern HOST_PORT_PATTERN = Pattern . compile ( "" . * ? \ \ [ ? ( [ 0 - 9a - zA - Z \ \ - % . : ] * ) \ \ ] ? : ( [ 0 - 9 ] + ) "" ) ; <nl> + private static final Pattern HOST_PORT_PATTERN = Pattern . compile ( "" . * ? \ \ [ ? ( [ 0 - 9a - zA - Z \ \ - % . _ : ] * ) \ \ ] ? : ( [ 0 - 9 ] + ) "" ) ; <nl> <nl> public static final String NL = System . getProperty ( "" line . separator "" ) ; <nl> <nl> mmm a / clients / src / test / java / org / apache / kafka / common / utils / UtilsTest . java <nl> ppp b / clients / src / test / java / org / apache / kafka / common / utils / UtilsTest . java <nl> public void testGetHost ( ) { <nl> assertEquals ( "" 127 . 0 . 0 . 1 "" , getHost ( "" 127 . 0 . 0 . 1 : 8000 "" ) ) ; <nl> assertEquals ( "" mydomain . com "" , getHost ( "" PLAINTEXT : / / mydomain . com : 8080 "" ) ) ; <nl> assertEquals ( "" MyDomain . com "" , getHost ( "" PLAINTEXT : / / MyDomain . com : 8080 "" ) ) ; <nl> + assertEquals ( "" My_Domain . com "" , getHost ( "" PLAINTEXT : / / My_Domain . com : 8080 "" ) ) ; <nl> assertEquals ( "" : : 1 "" , getHost ( "" [ : : 1 ] : 1234 "" ) ) ; <nl> assertEquals ( "" 2001 : db8 : 85a3 : 8d3 : 1319 : 8a2e : 370 : 7348 "" , getHost ( "" PLAINTEXT : / / [ 2001 : db8 : 85a3 : 8d3 : 1319 : 8a2e : 370 : 7348 ] : 5678 "" ) ) ; <nl> assertEquals ( "" 2001 : DB8 : 85A3 : 8D3 : 1319 : 8A2E : 370 : 7348 "" , getHost ( "" PLAINTEXT : / / [ 2001 : DB8 : 85A3 : 8D3 : 1319 : 8A2E : 370 : 7348 ] : 5678 "" ) ) ; <nl> mmm a / core / src / main / scala / kafka / cluster / BrokerEndPoint . scala <nl> ppp b / core / src / main / scala / kafka / cluster / BrokerEndPoint . scala <nl> import org . apache . kafka . common . utils . Utils . _ <nl> <nl> object BrokerEndPoint { <nl> <nl> - private val uriParseExp = "" "" "" \ [ ? ( [ 0 - 9a - zA - Z \ - % . : ] * ) \ ] ? : ( [ 0 - 9 ] + ) "" "" "" . r <nl> + private val uriParseExp = "" "" "" \ [ ? ( [ 0 - 9a - zA - Z \ - % . _ : ] * ) \ ] ? : ( [ 0 - 9 ] + ) "" "" "" . r <nl> <nl> / * * <nl> * BrokerEndPoint URI is host : port or [ ipv6_host ] : port <nl> mmm a / core / src / main / scala / kafka / cluster / EndPoint . scala <nl> ppp b / core / src / main / scala / kafka / cluster / EndPoint . scala <nl> import org . apache . kafka . common . utils . Utils <nl> <nl> object EndPoint { <nl> <nl> - private val uriParseExp = "" "" "" ^ ( . * ) : / / \ [ ? ( [ 0 - 9a - zA - Z \ - % . : ] * ) \ ] ? : ( - ? [ 0 - 9 ] + ) "" "" "" . r <nl> + private val uriParseExp = "" "" "" ^ ( . * ) : / / \ [ ? ( [ 0 - 9a - zA - Z \ - % . _ : ] * ) \ ] ? : ( - ? [ 0 - 9 ] + ) "" "" "" . r <nl> <nl> def readFrom ( buffer : ByteBuffer ) : EndPoint = { <nl> val port = buffer . getInt ( ) <nl> mmm a / core / src / test / scala / unit / kafka / cluster / BrokerEndPointTest . scala <nl> ppp b / core / src / test / scala / unit / kafka / cluster / BrokerEndPointTest . scala <nl> class BrokerEndPointTest extends Logging { <nl> var endpoint = BrokerEndPoint . createBrokerEndPoint ( 1 , connectionString ) <nl> assert ( endpoint . host = = "" localhost "" ) <nl> assert ( endpoint . port = = 9092 ) <nl> + / / KAFKA - 3719 <nl> + connectionString = "" local_host : 9092 "" <nl> + endpoint = BrokerEndPoint . createBrokerEndPoint ( 1 , connectionString ) <nl> + assert ( endpoint . host = = "" local_host "" ) <nl> + assert ( endpoint . port = = 9092 ) <nl> / / also test for ipv6 <nl> connectionString = "" [ : : 1 ] : 9092 "" <nl> endpoint = BrokerEndPoint . createBrokerEndPoint ( 1 , connectionString ) <nl> class BrokerEndPointTest extends Logging { <nl> assert ( endpoint . host = = "" localhost "" ) <nl> assert ( endpoint . port = = 9092 ) <nl> assert ( endpoint . connectionString = = "" PLAINTEXT : / / localhost : 9092 "" ) <nl> + / / KAFKA - 3719 <nl> + connectionString = "" PLAINTEXT : / / local_host : 9092 "" <nl> + endpoint = EndPoint . createEndPoint ( connectionString ) <nl> + assert ( endpoint . host = = "" local_host "" ) <nl> + assert ( endpoint . port = = 9092 ) <nl> + assert ( endpoint . connectionString = = "" PLAINTEXT : / / local_host : 9092 "" ) <nl> / / also test for default bind <nl> connectionString = "" PLAINTEXT : / / : 9092 "" <nl> endpoint = EndPoint . createEndPoint ( connectionString ) <nl>",KAFKA - 3719 ; Allow underscores in hostname,0de807357be4d776747e960b5fd17ddeae9a6cad,Missing Why,,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
231426,mmm a / java / client / src / org / openqa / selenium / ie / InternetExplorerDriverService . java <nl> ppp b / java / client / src / org / openqa / selenium / ie / InternetExplorerDriverService . java <nl> public static InternetExplorerDriverService createDefaultService ( ) { <nl> private String host = null ; <nl> private File extractPath = null ; <nl> private Boolean silent = null ; <nl> - private Boolean forceCreateProcess = null ; <nl> - private String ieSwitches = null ; <nl> <nl> / * * <nl> * Configures the logging level for the driver server . <nl>,[ java ] Deleting unused private fields,ca9da6e8e6c42b47128e17e0cd51d39c32d3c29e,Trivial Why,,Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
26201,"mmm a / jobbie / jobbie . iml <nl> ppp b / jobbie / jobbie . iml <nl> <nl> < orderEntry type = "" inheritedJdk "" / > <nl> < orderEntry type = "" sourceFolder "" forTests = "" false "" / > <nl> < orderEntry type = "" module "" module - name = "" common "" / > <nl> - < orderEntry type = "" module - library "" > <nl> - < library > <nl> - < CLASSES / > <nl> - < JAVADOC / > <nl> - < SOURCES / > <nl> - < / library > <nl> - < / orderEntry > <nl> < orderEntry type = "" module - library "" > <nl> < library > <nl> < CLASSES > <nl> mmm a / remote / client / remote - client . iml <nl> ppp b / remote / client / remote - client . iml <nl> <nl> < orderEntry type = "" sourceFolder "" forTests = "" false "" / > <nl> < orderEntry type = "" module "" module - name = "" common "" exported = "" "" / > <nl> < orderEntry type = "" module "" module - name = "" remote - common "" exported = "" "" / > <nl> - < orderEntry type = "" module "" module - name = "" third_party "" / > <nl> - < orderEntry type = "" module - library "" > <nl> + < orderEntry type = "" module "" module - name = "" third_party "" exported = "" "" / > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> < library > <nl> < CLASSES > <nl> < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / commons - logging - 1 . 1 . 1 . jar ! / "" / > <nl> <nl> < SOURCES / > <nl> < / library > <nl> < / orderEntry > <nl> - < orderEntry type = "" module - library "" > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> < library > <nl> < CLASSES > <nl> < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / commons - httpclient - 3 . 1 . jar ! / "" / > <nl> <nl> < SOURCES / > <nl> < / library > <nl> < / orderEntry > <nl> - < orderEntry type = "" module - library "" > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> < library > <nl> < CLASSES > <nl> < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / commons - io - 1 . 4 . jar ! / "" / > <nl> <nl> < SOURCES / > <nl> < / library > <nl> < / orderEntry > <nl> - < orderEntry type = "" module - library "" > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> < library > <nl> < CLASSES > <nl> < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / commons - lang - 2 . 4 . jar ! / "" / > <nl> <nl> < SOURCES / > <nl> < / library > <nl> < / orderEntry > <nl> - < orderEntry type = "" module - library "" > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> < library > <nl> < CLASSES > <nl> < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / commons - collections - 3 . 2 . 1 . jar ! / "" / > <nl> mmm a / remote / common / remote - common . iml <nl> ppp b / remote / common / remote - common . iml <nl> <nl> - < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> - < module relativePaths = "" true "" type = "" JAVA_MODULE "" version = "" 4 "" > <nl> - < component name = "" NewModuleRootManager "" inherit - compiler - output = "" true "" > <nl> - < exclude - output / > <nl> - < content url = "" file : / / $ MODULE_DIR $ "" > <nl> - < sourceFolder url = "" file : / / $ MODULE_DIR $ / src / java "" isTestSource = "" false "" / > <nl> - < sourceFolder url = "" file : / / $ MODULE_DIR $ / test / java "" isTestSource = "" true "" / > <nl> - < / content > <nl> - < orderEntry type = "" inheritedJdk "" / > <nl> - < orderEntry type = "" sourceFolder "" forTests = "" false "" / > <nl> - < orderEntry type = "" module - library "" > <nl> - < library > <nl> - < CLASSES > <nl> - < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / json - 20080701 . jar ! / "" / > <nl> - < / CLASSES > <nl> - < JAVADOC / > <nl> - < SOURCES / > <nl> - < / library > <nl> - < / orderEntry > <nl> - < orderEntry type = "" module - library "" > <nl> - < library > <nl> - < CLASSES > <nl> - < root url = "" jar : / / $ APPLICATION_HOME_DIR $ / lib / junit . jar ! / "" / > <nl> - < / CLASSES > <nl> - < JAVADOC / > <nl> - < SOURCES / > <nl> - < / library > <nl> - < / orderEntry > <nl> - < orderEntry type = "" library "" exported = "" "" name = "" common - buildtime "" level = "" project "" / > <nl> - < orderEntry type = "" module "" module - name = "" common "" exported = "" "" / > <nl> - < / component > <nl> - < / module > <nl> - <nl> + < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> + < module relativePaths = "" true "" type = "" JAVA_MODULE "" version = "" 4 "" > <nl> + < component name = "" NewModuleRootManager "" inherit - compiler - output = "" true "" > <nl> + < exclude - output / > <nl> + < content url = "" file : / / $ MODULE_DIR $ "" > <nl> + < sourceFolder url = "" file : / / $ MODULE_DIR $ / src / java "" isTestSource = "" false "" / > <nl> + < sourceFolder url = "" file : / / $ MODULE_DIR $ / test / java "" isTestSource = "" true "" / > <nl> + < / content > <nl> + < orderEntry type = "" inheritedJdk "" / > <nl> + < orderEntry type = "" sourceFolder "" forTests = "" false "" / > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> + < library > <nl> + < CLASSES > <nl> + < root url = "" jar : / / $ MODULE_DIR $ / lib / runtime / json - 20080701 . jar ! / "" / > <nl> + < / CLASSES > <nl> + < JAVADOC / > <nl> + < SOURCES / > <nl> + < / library > <nl> + < / orderEntry > <nl> + < orderEntry type = "" module - library "" exported = "" "" > <nl> + < library > <nl> + < CLASSES > <nl> + < root url = "" jar : / / $ APPLICATION_HOME_DIR $ / lib / junit . jar ! / "" / > <nl> + < / CLASSES > <nl> + < JAVADOC / > <nl> + < SOURCES / > <nl> + < / library > <nl> + < / orderEntry > <nl> + < orderEntry type = "" library "" exported = "" "" name = "" common - buildtime "" level = "" project "" / > <nl> + < orderEntry type = "" module "" module - name = "" common "" exported = "" "" / > <nl> + < / component > <nl> + < / module > <nl> + <nl>",SimonStewart : More IDEA config tweaking .,886fbdede0d5187c6bcfb863bf36eccb865cb7fb,Missing Why,,,,Illustrate Function,,,,,
271316,"mmm a / README . md <nl> ppp b / README . md <nl> Please see this [ Wiki Download Page ] [ Wiki ] for more repository infos . <nl> Fastjson is released under the [ Apache 2 . 0 license ] ( license . txt ) . <nl> <nl> ` ` ` <nl> - Copyright 1999 - 2016 Alibaba Group Holding Ltd . <nl> + Copyright 1999 - 2017 Alibaba Group Holding Ltd . <nl> <nl> Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> you may not use this file except in compliance with the License . <nl>",Merge pull request from lh4111 / patch - 1,c1a9b702c15f3adcd85daeb1c24d924ab793349e,Trivial Why,,﻿Version management,,Trivial What,,,,,
85243,"mmm a / plugins / org . jkiss . dbeaver . ext . postgresql / src / org / jkiss / dbeaver / ext / postgresql / model / data / PostgreArrayValueHandler . java <nl> ppp b / plugins / org . jkiss . dbeaver . ext . postgresql / src / org / jkiss / dbeaver / ext / postgresql / model / data / PostgreArrayValueHandler . java <nl> <nl> @ Override <nl> public Object getValueFromObject ( @ NotNull DBCSession session , @ NotNull DBSTypedObject type , Object object , boolean copy ) throws DBCException <nl> { <nl> - if ( object ! = null & & object . getClass ( ) . getName ( ) . equals ( PostgreConstants . PG_OBJECT_CLASS ) ) { <nl> - PostgreDataType itemType = null ; <nl> - final PostgreDataType arrayType = PostgreUtils . findDataType ( ( PostgreDataSource ) session . getDataSource ( ) , type ) ; <nl> - if ( arrayType ! = null ) { <nl> - itemType = arrayType . getElementType ( ) ; <nl> - } <nl> - <nl> - final Object value = PostgreUtils . extractValue ( object ) ; <nl> - if ( value = = null ) { <nl> - return null ; <nl> - } else if ( value instanceof String & & itemType ! = null ) { <nl> - return convertStringToArray ( session , itemType , ( String ) value ) ; <nl> - } else if ( itemType ! = null ) { <nl> - / / Can ' t parse <nl> - return new JDBCCollection ( itemType , DBUtils . findValueHandler ( session , itemType ) , new Object [ ] { value } ) ; <nl> + PostgreDataType itemType = null ; <nl> + final PostgreDataType arrayType = PostgreUtils . findDataType ( ( PostgreDataSource ) session . getDataSource ( ) , type ) ; <nl> + if ( arrayType ! = null ) { <nl> + itemType = arrayType . getElementType ( ) ; <nl> + } <nl> + if ( itemType ! = null ) { <nl> + if ( object ! = null & & object . getClass ( ) . getName ( ) . equals ( PostgreConstants . PG_OBJECT_CLASS ) ) { <nl> + final Object value = PostgreUtils . extractValue ( object ) ; <nl> + if ( value = = null ) { <nl> + return null ; <nl> + } else if ( value instanceof String ) { <nl> + return convertStringToArray ( session , itemType , ( String ) value ) ; <nl> + } else { <nl> + / / Can ' t parse <nl> + return new JDBCCollection ( itemType , DBUtils . findValueHandler ( session , itemType ) , new Object [ ] { value } ) ; <nl> + } <nl> + } else if ( object instanceof String ) { <nl> + return convertStringToArray ( session , itemType , ( String ) object ) ; <nl> } <nl> } <nl> return super . getValueFromObject ( session , type , object , copy ) ; <nl>",PG : array values decode fix,db61ff32c400f7aa451b2781895edc68c6cfb7a9,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
296402,"mmm a / rb / spec / integration / selenium / webdriver / element_spec . rb <nl> ppp b / rb / spec / integration / selenium / webdriver / element_spec . rb <nl> <nl> key_reporter . attribute ( ' value ' ) . should = = "" Test "" <nl> end <nl> <nl> - not_compliant_on : browser = > : chrome do <nl> - it "" should handle file uploads "" do <nl> - driver . navigate . to url_for ( "" formPage . html "" ) <nl> + it "" should handle file uploads "" do <nl> + driver . navigate . to url_for ( "" formPage . html "" ) <nl> <nl> - element = driver . find_element ( : id , ' upload ' ) <nl> - element . attribute ( ' value ' ) . should be_empty <nl> + element = driver . find_element ( : id , ' upload ' ) <nl> + element . attribute ( ' value ' ) . should be_empty <nl> <nl> - file = Tempfile . new ( ' file - upload ' ) <nl> - path = file . path <nl> - path . gsub ! ( "" / "" , "" \ \ "" ) if WebDriver : : Platform . windows ? <nl> + file = Tempfile . new ( ' file - upload ' ) <nl> + path = file . path <nl> + path . gsub ! ( "" / "" , "" \ \ "" ) if WebDriver : : Platform . windows ? <nl> <nl> - element . send_keys path <nl> + element . send_keys path <nl> <nl> - element . attribute ( ' value ' ) . should include ( File . basename ( path ) ) <nl> - end <nl> + element . attribute ( ' value ' ) . should include ( File . basename ( path ) ) <nl> end <nl> <nl> it "" should get attribute value "" do <nl>","JariBakken : Remove spec guard for file uploads in Chrome , which now works with the dev channel .",e96a965a4e275c36275f77d8622b39e2e0743179,﻿Illustrate Requirement,,"﻿Runtime or development
environment change",,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
149650,"mmm a / clients / src / main / java / org / apache / kafka / clients / admin / AdminClient . java <nl> ppp b / clients / src / main / java / org / apache / kafka / clients / admin / AdminClient . java <nl> public CreateTopicsResult createTopics ( Collection < NewTopic > newTopics ) { <nl> * <nl> * This operation is not transactional so it may succeed for some topics while fail for others . <nl> * <nl> - * It may take several seconds after this method returns <nl> + * It may take several seconds after { @ code CreateTopicsResult } returns <nl> * success for all the brokers to become aware that the topics have been created . <nl> * During this time , { @ link AdminClient # listTopics ( ) } and { @ link AdminClient # describeTopics ( Collection ) } <nl> * may not return information about the new topics . <nl> public DeleteTopicsResult deleteTopics ( Collection < String > topics ) { <nl> * <nl> * This operation is not transactional so it may succeed for some topics while fail for others . <nl> * <nl> - * It may take several seconds after AdminClient # deleteTopics returns <nl> + * It may take several seconds after the { @ code DeleteTopicsResult } returns <nl> * success for all the brokers to become aware that the topics are gone . <nl> * During this time , AdminClient # listTopics and AdminClient # describeTopics <nl> * may continue to return information about the deleted topics . <nl>",KAFKA - 6302 : Improve AdmintClient JavaDocs,f6f65a78684e41bcd6115438a76cd6c552afc043,,Trivial Why,,Annotation change,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
255662,"new file mode 100644 <nl> index 0000000000 . . 4adaf93882 <nl> Binary files / dev / null and b / plugins / org . jkiss . dbeaver . core / icons / misc / filter_add . png differ <nl> mmm a / plugins / org . jkiss . dbeaver . core / plugin . properties <nl> ppp b / plugins / org . jkiss . dbeaver . core / plugin . properties <nl> command . org . jkiss . dbeaver . core . object . create . description = Create new database obj <nl> command . org . jkiss . dbeaver . core . object . delete . name = Delete Object <nl> command . org . jkiss . dbeaver . core . object . delete . description = Delete database object <nl> command . org . jkiss . dbeaver . core . object . filter . name = Filter <nl> - command . org . jkiss . dbeaver . core . object . filter . description = Filter objects <nl> + command . org . jkiss . dbeaver . core . object . filter . description = Configure objects filter <nl> + command . org . jkiss . dbeaver . core . object . filter . add . name = Filter object <nl> + command . org . jkiss . dbeaver . core . object . filter . add . description = Filter selected object <nl> command . org . jkiss . dbeaver . core . object . goto . name = Open Database Object . . . <nl> command . org . jkiss . dbeaver . core . object . goto . description = Open database meta object <nl> <nl> mmm a / plugins / org . jkiss . dbeaver . core / plugin . xml <nl> ppp b / plugins / org . jkiss . dbeaver . core / plugin . xml <nl> <nl> class = "" org . jkiss . dbeaver . ui . actions . ObjectPropertyTester "" <nl> id = "" org . jkiss . dbeaver . ui . actions . ObjectPropertyTester "" <nl> namespace = "" org . jkiss . dbeaver . core . object "" <nl> - properties = "" canOpen , canCreate , canPaste , canDelete , canRename , canFilter "" <nl> + properties = "" canOpen , canCreate , canPaste , canDelete , canRename , canFilter , canFilterObject "" <nl> type = "" org . jkiss . dbeaver . model . navigator . DBNNode "" / > <nl> < propertyTester <nl> class = "" org . jkiss . dbeaver . ui . actions . ResourcePropertyTester "" <nl> <nl> < command id = "" org . jkiss . dbeaver . core . object . create "" name = "" % command . org . jkiss . dbeaver . core . object . create . name "" description = "" % command . org . jkiss . dbeaver . core . object . create . description "" categoryId = "" org . jkiss . dbeaver . core . database "" / > <nl> < command id = "" org . jkiss . dbeaver . core . object . delete "" name = "" % command . org . jkiss . dbeaver . core . object . delete . name "" description = "" % command . org . jkiss . dbeaver . core . object . delete . description "" categoryId = "" org . jkiss . dbeaver . core . database "" / > <nl> < command id = "" org . jkiss . dbeaver . core . object . filter "" name = "" % command . org . jkiss . dbeaver . core . object . filter . name "" description = "" % command . org . jkiss . dbeaver . core . object . filter . description "" categoryId = "" org . jkiss . dbeaver . core . database "" / > <nl> + < command id = "" org . jkiss . dbeaver . core . object . filter . add "" name = "" % command . org . jkiss . dbeaver . core . object . filter . add . name "" description = "" % command . org . jkiss . dbeaver . core . object . filter . add . description "" categoryId = "" org . jkiss . dbeaver . core . database "" / > <nl> < command id = "" org . jkiss . dbeaver . core . object . goto "" name = "" % command . org . jkiss . dbeaver . core . object . goto . name "" description = "" % command . org . jkiss . dbeaver . core . object . goto . description "" categoryId = "" org . jkiss . dbeaver . core . database "" / > <nl> <nl> < command id = "" org . jkiss . dbeaver . ui . editors . sql . run . statement "" name = "" % command . org . jkiss . dbeaver . ui . editors . sql . run . statement . name "" description = "" % command . org . jkiss . dbeaver . ui . editors . sql . run . statement . description "" categoryId = "" org . jkiss . dbeaver . core . sql "" / > <nl> <nl> < image commandId = "" org . jkiss . dbeaver . core . object . create "" icon = "" IMG_TOOL_NEW_WIZARD "" / > <nl> < image commandId = "" org . jkiss . dbeaver . core . object . delete "" icon = "" IMG_ETOOL_DELETE "" / > <nl> < image commandId = "" org . jkiss . dbeaver . core . object . filter "" icon = "" icons / misc / filter . png "" / > <nl> + < image commandId = "" org . jkiss . dbeaver . core . object . filter . add "" icon = "" icons / misc / filter_add . png "" / > <nl> <nl> < image commandId = "" org . jkiss . dbeaver . ui . editors . sql . run . statement "" icon = "" icons / sql / sql_exec . png "" / > <nl> < image commandId = "" org . jkiss . dbeaver . ui . editors . sql . run . statementNew "" icon = "" icons / sql / sql_exec_new . png "" / > <nl> <nl> < / with > <nl> < / enabledWhen > <nl> < / handler > <nl> + < handler commandId = "" org . jkiss . dbeaver . core . object . filter . add "" class = "" org . jkiss . dbeaver . ui . actions . navigator . NavigatorHandlerFilterObjects "" > <nl> + < enabledWhen > <nl> + < with variable = "" selection "" > <nl> + < iterate operator = "" and "" > <nl> + < and > <nl> + < instanceof value = "" org . jkiss . dbeaver . model . navigator . DBNNode "" / > <nl> + < test property = "" org . jkiss . dbeaver . core . object . canFilterObject "" / > <nl> + < / and > <nl> + < / iterate > <nl> + < / with > <nl> + < / enabledWhen > <nl> + < / handler > <nl> <nl> < handler commandId = "" org . eclipse . ui . edit . paste "" class = "" org . jkiss . dbeaver . ui . actions . navigator . NavigatorHandlerObjectCreateCopy "" > <nl> < activeWhen > < reference definitionId = "" org . jkiss . dbeaver . core . ui . navigator . part "" / > < / activeWhen > <nl> <nl> < command commandId = "" org . eclipse . ui . edit . rename "" > <nl> < visibleWhen checkEnabled = "" true "" / > <nl> < / command > <nl> + < command commandId = "" org . jkiss . dbeaver . core . object . filter . add "" > <nl> + < visibleWhen checkEnabled = "" true "" / > <nl> + < / command > <nl> <nl> < command commandId = "" org . jkiss . dbeaver . core . sql . script . associate "" > <nl> < visibleWhen checkEnabled = "" true "" / > <nl> mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / core / CoreMessages . java <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / core / CoreMessages . java <nl> <nl> public static String dialog_filter_button_enable ; <nl> <nl> public static String dialog_filter_button_remove ; <nl> - <nl> + public static String dialog_filter_button_clear ; <nl> public static String dialog_filter_global_link ; <nl> <nl> public static String dialog_filter_list_exclude ; <nl> mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / core / CoreResources . properties <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / core / CoreResources . properties <nl> data_transfer_wizard_settings_title = Settings <nl> dialog_filter_button_add = Add <nl> dialog_filter_button_enable = Enable <nl> dialog_filter_button_remove = Remove <nl> + dialog_filter_button_clear = Clear <nl> dialog_filter_global_link = < a > Show global filter < / a > <nl> dialog_filter_list_exclude = Exclude <nl> dialog_filter_list_include = Include <nl> mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / actions / ObjectPropertyTester . java <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / actions / ObjectPropertyTester . java <nl> <nl> public static final String PROP_CAN_DELETE = "" canDelete "" ; <nl> public static final String PROP_CAN_RENAME = "" canRename "" ; <nl> public static final String PROP_CAN_FILTER = "" canFilter "" ; <nl> + public static final String PROP_CAN_FILTER_OBJECT = "" canFilterObject "" ; <nl> <nl> public ObjectPropertyTester ( ) { <nl> super ( ) ; <nl> public boolean test ( Object receiver , String property , Object [ ] args , Object expe <nl> } <nl> break ; <nl> } <nl> + case PROP_CAN_FILTER_OBJECT : { <nl> + if ( node . getParentNode ( ) instanceof DBNDatabaseFolder & & ( ( DBNDatabaseFolder ) node . getParentNode ( ) ) . getItemsMeta ( ) ! = null ) { <nl> + return true ; <nl> + } <nl> + break ; <nl> + } <nl> } <nl> return false ; <nl> } <nl> new file mode 100644 <nl> index 0000000000 . . c4822b0978 <nl>",Merge remote - tracking branch ' origin / devel ' into devel,155bf0c47761cdc43944d11e20e9800d4ea8fb4d,Trivial Why,,﻿Version management,,Trivial What,,,,,
336778,"mmm a / plugins / org . jkiss . dbeaver . ui . editors . sql / src / org / jkiss / dbeaver / ui / editors / sql / handlers / ToggleEditorLayoutHandler . java <nl> ppp b / plugins / org . jkiss . dbeaver . ui . editors . sql / src / org / jkiss / dbeaver / ui / editors / sql / handlers / ToggleEditorLayoutHandler . java <nl> <nl> import org . eclipse . core . commands . ExecutionEvent ; <nl> import org . eclipse . core . commands . ExecutionException ; <nl> import org . eclipse . ui . handlers . HandlerUtil ; <nl> + import org . jkiss . dbeaver . Log ; <nl> import org . jkiss . dbeaver . ui . editors . sql . SQLEditor ; <nl> import org . jkiss . dbeaver . ui . editors . sql . SQLPreferenceConstants ; <nl> import org . jkiss . dbeaver . utils . RuntimeUtils ; <nl> import org . jkiss . utils . CommonUtils ; <nl> <nl> + import java . io . IOException ; <nl> + <nl> public class ToggleEditorLayoutHandler extends AbstractHandler { <nl> + static protected final Log log = Log . getLog ( ToggleEditorLayoutHandler . class ) ; <nl> <nl> @ Override <nl> public Object execute ( ExecutionEvent event ) throws ExecutionException { <nl> public Object execute ( ExecutionEvent event ) throws ExecutionException { <nl> curOrientation = SQLEditor . ResultSetOrientation . HORIZONTAL ; <nl> } <nl> editor . getActivePreferenceStore ( ) . setValue ( SQLPreferenceConstants . RESULT_SET_ORIENTATION , curOrientation . name ( ) ) ; <nl> + try { <nl> + editor . getActivePreferenceStore ( ) . save ( ) ; <nl> + } catch ( IOException e ) { <nl> + log . error ( "" Error saving editor preferences "" , e ) ; <nl> + } <nl> } <nl> return null ; <nl> } <nl>",SQL Editor : save preferences on layout change,01af2de399c91b2894107307459e70cab2302aef,Missing Why,,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
191095,"mmm a / gdx / src / com / badlogic / gdx / maps / tiled / BaseTmxMapLoader . java <nl> ppp b / gdx / src / com / badlogic / gdx / maps / tiled / BaseTmxMapLoader . java <nl> protected void loadObject ( TiledMap map , MapLayer layer , Element element ) { <nl> if ( id ! = 0 ) { <nl> object . getProperties ( ) . put ( "" id "" , id ) ; <nl> } <nl> - object . getProperties ( ) . put ( "" x "" , x * scaleX ) ; <nl> - object . getProperties ( ) . put ( "" y "" , ( flipY ? y - height : y ) * scaleY ) ; <nl> + object . getProperties ( ) . put ( "" x "" , x ) ; <nl> + object . getProperties ( ) . put ( "" y "" , ( flipY ? y - height : y ) ) ; <nl> object . getProperties ( ) . put ( "" width "" , width ) ; <nl> object . getProperties ( ) . put ( "" height "" , height ) ; <nl> object . setVisible ( element . getIntAttribute ( "" visible "" , 1 ) = = 1 ) ; <nl>",Merge pull request from andrejp88 / patch - 1,acc75551bb1ff5c2242d24660aa9a91abf854a70,Trivial Why,,﻿Version management,,Trivial What,,,,,
238321,"mmm a / MPChartExample / src / com / xxmassdeveloper / mpchartexample / CombinedChartActivity . java <nl> ppp b / MPChartExample / src / com / xxmassdeveloper / mpchartexample / CombinedChartActivity . java <nl> <nl> <nl> import com . github . mikephil . charting . charts . CombinedChart ; <nl> import com . github . mikephil . charting . components . YAxis ; <nl> + import com . github . mikephil . charting . components . YAxis . AxisDependency ; <nl> import com . github . mikephil . charting . data . BarData ; <nl> import com . github . mikephil . charting . data . BarDataSet ; <nl> import com . github . mikephil . charting . data . BarEntry ; <nl> protected void onCreate ( Bundle savedInstanceState ) { <nl> <nl> data . setData ( generateLineData ( ) ) ; <nl> data . setData ( generateBarData ( ) ) ; <nl> - data . setData ( generateScatterData ( ) ) ; <nl> + / / data . setData ( generateScatterData ( ) ) ; <nl> data . setData ( generateCandleData ( ) ) ; <nl> <nl> mChart . setData ( data ) ; <nl> private LineData generateLineData ( ) { <nl> set . setCircleSize ( 5f ) ; <nl> set . setFillColor ( Color . RED ) ; <nl> set . setDrawCubic ( true ) ; <nl> + set . setDrawValues ( false ) ; <nl> d . addDataSet ( set ) ; <nl> <nl> return d ; <nl> private ScatterData generateScatterData ( ) { <nl> ScatterDataSet set = new ScatterDataSet ( entries , "" Scatter DataSet "" ) ; <nl> set . setColor ( Color . GREEN ) ; <nl> set . setScatterShapeSize ( 7 . 5f ) ; <nl> + set . setDrawValues ( false ) ; <nl> d . addDataSet ( set ) ; <nl> <nl> return d ; <nl> private CandleData generateCandleData ( ) { <nl> ArrayList < CandleEntry > entries = new ArrayList < CandleEntry > ( ) ; <nl> <nl> for ( int index = 0 ; index < itemcount ; index + + ) <nl> - entries . add ( new CandleEntry ( index , 25f , 10f , 12f , 22f ) ) ; <nl> + entries . add ( new CandleEntry ( index , 20f , 10f , 13f , 17f ) ) ; <nl> <nl> CandleDataSet set = new CandleDataSet ( entries , "" Candle DataSet "" ) ; <nl> set . setColor ( Color . rgb ( 80 , 80 , 80 ) ) ; <nl> + set . setBodySpace ( 0 . 3f ) ; <nl> + set . setDrawValues ( false ) ; <nl> d . addDataSet ( set ) ; <nl> <nl> return d ; <nl> mmm a / MPChartLib / src / com / github / mikephil / charting / charts / CandleStickChart . java <nl> ppp b / MPChartLib / src / com / github / mikephil / charting / charts / CandleStickChart . java <nl> protected void init ( ) { <nl> protected void calcMinMax ( ) { <nl> super . calcMinMax ( ) ; <nl> <nl> + mXChartMax + = 0 . 5f ; <nl> mDeltaX = Math . abs ( mXChartMax - mXChartMin ) ; <nl> } <nl> <nl> mmm a / MPChartLib / src / com / github / mikephil / charting / data / CandleDataSet . java <nl> ppp b / MPChartLib / src / com / github / mikephil / charting / data / CandleDataSet . java <nl> <nl> / * * the width of the shadow of the candle * / <nl> private float mShadowWidth = 3f ; <nl> <nl> - / * * the space between the candle entries , default 0 . 2f ( 20 % ) * / <nl> + / * * the space between the candle entries , default 0 . 1f ( 10 % ) * / <nl> private float mBodySpace = 0 . 1f ; <nl> <nl> public CandleDataSet ( ArrayList < CandleEntry > yVals , String label ) { <nl> mmm a / MPChartLib / src / com / github / mikephil / charting / renderer / CandleStickChartRenderer . java <nl> ppp b / MPChartLib / src / com / github / mikephil / charting / renderer / CandleStickChartRenderer . java <nl> <nl> import com . github . mikephil . charting . interfaces . CandleDataProvider ; <nl> import com . github . mikephil . charting . utils . Highlight ; <nl> import com . github . mikephil . charting . utils . Transformer ; <nl> + import com . github . mikephil . charting . utils . Utils ; <nl> <nl> import java . util . ArrayList ; <nl> <nl> private void transformShadow ( float [ ] shadowPoints , CandleEntry e , Transformer tr <nl> <nl> @ Override <nl> public void drawValues ( Canvas c ) { <nl> - / / TODO Auto - generated method stub <nl> + <nl> + / / if values are drawn <nl> + if ( mChart . getCandleData ( ) . getYValCount ( ) < mChart . getMaxVisibleCount ( ) <nl> + * mViewPortHandler . getScaleX ( ) ) { <nl> <nl> + ArrayList < CandleDataSet > dataSets = mChart . getCandleData ( ) . getDataSets ( ) ; <nl> + <nl> + for ( int i = 0 ; i < dataSets . size ( ) ; i + + ) { <nl> + <nl> + CandleDataSet dataSet = dataSets . get ( i ) ; <nl> + Transformer trans = mChart . getTransformer ( dataSet . getAxisDependency ( ) ) ; <nl> + <nl> + if ( ! dataSet . isDrawValuesEnabled ( ) ) <nl> + continue ; <nl> + <nl> + ArrayList < CandleEntry > entries = dataSet . getYVals ( ) ; <nl> + <nl> + float [ ] positions = trans . generateTransformedValuesCandle ( <nl> + entries , mAnimator . getPhaseY ( ) ) ; <nl> + <nl> + float yOffset = Utils . convertDpToPixel ( 5f ) ; <nl> + <nl> + for ( int j = 0 ; j < positions . length * mAnimator . getPhaseX ( ) ; j + = 2 ) { <nl> + <nl> + float x = positions [ j ] ; <nl> + float y = positions [ j + 1 ] ; <nl> + <nl> + if ( ! mViewPortHandler . isInBoundsRight ( x ) ) <nl> + break ; <nl> + <nl> + if ( ! mViewPortHandler . isInBoundsLeft ( x ) | | ! mViewPortHandler . isInBoundsY ( y ) ) <nl> + continue ; <nl> + <nl> + float val = entries . get ( j / 2 ) . getVal ( ) ; <nl> + <nl> + c . drawText ( mChart . getValueFormatter ( ) . getFormattedValue ( val ) , x , y - yOffset , <nl> + mValuePaint ) ; <nl> + } <nl> + } <nl> + } <nl> } <nl> <nl> @ Override <nl> mmm a / MPChartLib / src / com / github / mikephil / charting / renderer / LineChartRenderer . java <nl> ppp b / MPChartLib / src / com / github / mikephil / charting / renderer / LineChartRenderer . java <nl> private Path generateLinePath ( ArrayList < Entry > entries ) { <nl> @ Override <nl> public void drawValues ( Canvas c ) { <nl> <nl> - / / if values are drawn <nl> if ( mChart . getLineData ( ) . getYValCount ( ) < mChart . getMaxVisibleCount ( ) <nl> * mViewPortHandler . getScaleX ( ) ) { <nl> <nl> mmm a / MPChartLib / src / com / github / mikephil / charting / utils / Transformer . java <nl> ppp b / MPChartLib / src / com / github / mikephil / charting / utils / Transformer . java <nl> <nl> import android . graphics . RectF ; <nl> <nl> import com . github . mikephil . charting . data . BarData ; <nl> + import com . github . mikephil . charting . data . CandleEntry ; <nl> import com . github . mikephil . charting . data . Entry ; <nl> import com . github . mikephil . charting . renderer . ViewPortHandler ; <nl> <nl> public void prepareMatrixOffset ( boolean inverted ) { <nl> <nl> return valuePoints ; <nl> } <nl> + <nl> + / * * <nl> + * Transforms an arraylist of Entry into a float array containing the x and <nl> + * y values transformed with all matrices for the CANDLESTICKCHART . <nl> + * <nl> + * @ param entries <nl> + * @ return <nl> + * / <nl> + public float [ ] generateTransformedValuesCandle ( ArrayList < CandleEntry > entries , <nl> + float phaseY ) { <nl> + <nl> + float [ ] valuePoints = new float [ entries . size ( ) * 2 ] ; <nl> + <nl> + for ( int j = 0 ; j < valuePoints . length ; j + = 2 ) { <nl> + <nl> + CandleEntry e = entries . get ( j / 2 ) ; <nl> + <nl> + if ( e ! = null ) { <nl> + valuePoints [ j ] = e . getXIndex ( ) ; <nl> + valuePoints [ j + 1 ] = e . getHigh ( ) * phaseY ; <nl> + } <nl> + } <nl> + <nl> + pointValuesToPixel ( valuePoints ) ; <nl> + <nl> + return valuePoints ; <nl> + } <nl> <nl> / * * <nl> * Transforms an arraylist of Entry into a float array containing the x and <nl>","Fixed bug in CandleStickChart , worked on combined charts .",d91e47ea71eeab6ee6f9dfd012b87f169ca44bdd,﻿Describe Objective,,﻿To fix defects,,﻿Summarize Code Object Change,,﻿Object of change,,,
236590,"mmm a / core / src / main / resources / jenkins / install / pluginSetupWizard . properties <nl> ppp b / core / src / main / resources / jenkins / install / pluginSetupWizard . properties <nl> installWizard_installIncomplete_banner = Resume Installation <nl> installWizard_installIncomplete_message = Jenkins was restarted during installation and some plugins did not seem to get installed . <nl> installWizard_installIncomplete_resumeInstallationButtonLabel = Resume <nl> installWizard_saveFirstUser = Save and Continue <nl> - installWizard_skipFirstUser = Skip form and continue as admin <nl> + installWizard_skipFirstUser = Skip and continue as admin <nl> installWizard_firstUserSkippedMessage = < div class = "" alert alert - warning fade in "" > \ <nl> You have skipped the < strong > setup of an admin user < / strong > . < br / > < br / > \ <nl> To log in , use the username : "" admin "" and the administrator password you used to access the setup wizard . \ <nl>",Conciser reworded SetupWizard Continue as admin button,47913a71b113d446296167ab38b05027cc3aba35,,Trivial Why,,Text file changes,﻿Summarize Code Object Change,,Characteristics of changes,,,
9206,mmm a / org . springframework . jms / pom . xml <nl> ppp b / org . springframework . jms / pom . xml <nl> <nl> < scope > provided < / scope > <nl> < / dependency > <nl> < dependency > <nl> - < groupId > javax . resource < / groupId > <nl> - < artifactId > connector - api < / artifactId > <nl> - < version > 1 . 5 < / version > <nl> + < groupId > org . apache . geronimo . specs < / groupId > <nl> + < artifactId > geronimo - j2ee - connector_1 . 5_spec < / artifactId > <nl> + < version > 2 . 0 . 0 < / version > <nl> < optional > true < / optional > <nl> < / dependency > <nl> < dependency > <nl>,Use Geronimo j2ee - connector API in JMS pom,f3d00da08046ca0f2789ed8c1b69ca09d0a1b09a,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
236677,"mmm a / plugins / org . jkiss . dbeaver . ext . generic / plugin . xml <nl> ppp b / plugins / org . jkiss . dbeaver . ext . generic / plugin . xml <nl> <nl> defaultPort = "" "" <nl> description = "" NuoDB "" <nl> webURL = "" http : / / www . nuodb . com / "" > <nl> - < ! - - < library path = "" C : \ Program Files \ Java \ lib \ jdbc \ nuodbjdbc . jar "" / > - - > <nl> + < file type = "" jar "" path = "" maven : / com . nuodb . jdbc : nuodb - jdbc : release "" / > <nl> < / driver > <nl> < driver <nl> id = "" gemfire_xd "" <nl>",NuoDB - > Maven,b3b72f53c56d0e070db0c1fc830b974f67923ff4,Missing Why,,,,﻿Summarize Code Object Change,,﻿Contrast before and after,,,
29346,mmm a / guava / src / com / google / common / collect / ComparisonChain . java <nl> ppp b / guava / src / com / google / common / collect / ComparisonChain . java <nl> <nl> <nl> import java . util . Comparator ; <nl> <nl> + import javax . annotation . CheckReturnValue ; <nl> import javax . annotation . Nullable ; <nl> <nl> / * * <nl> <nl> * @ author Kevin Bourrillion <nl> * @ since 2 . 0 <nl> * / <nl> + @ CheckReturnValue <nl> @ GwtCompatible <nl> public abstract class ComparisonChain { <nl> private ComparisonChain ( ) { } <nl>,Add @ CheckReturnValue to ComparisonChain .,db73f380913db5e09bfc148e7fc31247985c6d85,Trivial Why,,﻿Annotation changes,,﻿Summarize Code Object Change,,﻿Object of change,,,
250334,"mmm a / sharding - proxy / src / main / java / io / shardingsphere / shardingproxy / runtime / LogicSchema . java <nl> ppp b / sharding - proxy / src / main / java / io / shardingsphere / shardingproxy / runtime / LogicSchema . java <nl> <nl> <nl> private final JDBCBackendDataSource backendDataSource ; <nl> <nl> - public LogicSchema ( final String name , final Map < String , DataSourceParameter > dataSources , final boolean isUsingRegistry ) { <nl> + public LogicSchema ( final String name , final Map < String , DataSourceParameter > dataSources ) { <nl> this . name = name ; <nl> / / TODO : jiaqi only use JDBC need connect db via JDBC , netty style should use SQL packet to get metadata <nl> this . dataSources = dataSources ; <nl>",delete invalid parameter,dec9a97774fb8905b39da5d01b8f85bfa0282065,,Describe Objective,,To fix defects,Trivial What,,Trivial What,,,
258333,"mmm a / res / values / strings . xml <nl> ppp b / res / values / strings . xml <nl> <nl> < string name = "" MessageRecord_s_called_you "" > % s called you < / string > <nl> < string name = "" MessageRecord_called_s "" > Called % s < / string > <nl> < string name = "" MessageRecord_missed_call_from "" > Missed call from % s < / string > <nl> - < string name = "" MessageRecord_s_is_on_signal_say_hey "" > % s is on Signal , say hey ! < / string > <nl> + < string name = "" MessageRecord_s_joined_signal "" > % s joined Signal ! < / string > <nl> < string name = "" MessageRecord_you_set_disappearing_message_time_to_s "" > You set disappearing message time to % 1 $ s . < / string > <nl> < string name = "" MessageRecord_s_set_disappearing_message_time_to_s "" > % 1 $ s set disappearing message time to % 2 $ s . < / string > <nl> < string name = "" MessageRecord_your_safety_number_with_s_has_changed "" > Your safety number with % s has changed . < / string > <nl> <nl> < string name = "" ThreadRecord_called_you "" > Called you < / string > <nl> < string name = "" ThreadRecord_missed_call "" > Missed call < / string > <nl> < string name = "" ThreadRecord_media_message "" > Media message < / string > <nl> - < string name = "" ThreadRecord_s_is_on_signal_say_hey "" > % s is on Signal , say hey ! < / string > <nl> + < string name = "" ThreadRecord_s_joined_signal "" > % s joined Signal ! < / string > <nl> < string name = "" ThreadRecord_disappearing_message_time_updated_to_s "" > Disappearing message time set to % s < / string > <nl> < string name = "" ThreadRecord_your_safety_number_with_s_has_changed "" > Your safety number with % s has changed . < / string > <nl> <nl> mmm a / src / org / thoughtcrime / securesms / database / model / MessageRecord . java <nl> ppp b / src / org / thoughtcrime / securesms / database / model / MessageRecord . java <nl> public SpannableString getDisplayBody ( ) { <nl> } else if ( isMissedCall ( ) ) { <nl> return emphasisAdded ( context . getString ( R . string . MessageRecord_missed_call_from , getIndividualRecipient ( ) . toShortString ( ) ) ) ; <nl> } else if ( isJoined ( ) ) { <nl> - return emphasisAdded ( context . getString ( R . string . MessageRecord_s_is_on_signal_say_hey , getIndividualRecipient ( ) . toShortString ( ) ) ) ; <nl> + return emphasisAdded ( context . getString ( R . string . MessageRecord_s_joined_signal , getIndividualRecipient ( ) . toShortString ( ) ) ) ; <nl> } else if ( isExpirationTimerUpdate ( ) ) { <nl> String time = ExpirationUtil . getExpirationDisplayValue ( context , ( int ) ( getExpiresIn ( ) / 1000 ) ) ; <nl> return isOutgoing ( ) ? emphasisAdded ( context . getString ( R . string . MessageRecord_you_set_disappearing_message_time_to_s , time ) ) <nl> mmm a / src / org / thoughtcrime / securesms / database / model / ThreadRecord . java <nl> ppp b / src / org / thoughtcrime / securesms / database / model / ThreadRecord . java <nl> public SpannableString getDisplayBody ( ) { <nl> } else if ( SmsDatabase . Types . isMissedCall ( type ) ) { <nl> return emphasisAdded ( context . getString ( org . thoughtcrime . securesms . R . string . ThreadRecord_missed_call ) ) ; <nl> } else if ( SmsDatabase . Types . isJoinedType ( type ) ) { <nl> - return emphasisAdded ( context . getString ( R . string . ThreadRecord_s_is_on_signal_say_hey , getRecipients ( ) . getPrimaryRecipient ( ) . toShortString ( ) ) ) ; <nl> + return emphasisAdded ( context . getString ( R . string . ThreadRecord_s_joined_signal , getRecipients ( ) . getPrimaryRecipient ( ) . toShortString ( ) ) ) ; <nl> } else if ( SmsDatabase . Types . isExpirationTimerUpdate ( type ) ) { <nl> String time = ExpirationUtil . getExpirationDisplayValue ( context , ( int ) ( getExpiresIn ( ) / 1000 ) ) ; <nl> return emphasisAdded ( context . getString ( R . string . ThreadRecord_disappearing_message_time_updated_to_s , time ) ) ; <nl>","Adjust joined signal string
// FREEBIE",75782affd1a1996b408731babe41f53d0f4cdae8,Missing Why,,,,Illustrate Function,,,,,
181670,"mmm a / src / main / java / org / jboss / netty / channel / socket / nio / NioWorker . java <nl> ppp b / src / main / java / org / jboss / netty / channel / socket / nio / NioWorker . java <nl> private static void close ( SelectionKey k ) { <nl> } <nl> <nl> static void write ( final NioSocketChannel channel , boolean mightNeedWakeup ) { <nl> + if ( ! channel . isConnected ( ) ) { <nl> + cleanUpWriteBuffer ( channel ) ; <nl> + return ; <nl> + } <nl> + <nl> if ( mightNeedWakeup & & scheduleWriteIfNecessary ( channel ) ) { <nl> return ; <nl> } <nl> private static void writeNow ( NioSocketChannel channel , int writeSpinCount ) { <nl> addOpWrite = true ; <nl> break ; <nl> } <nl> - } catch ( ClosedChannelException e ) { <nl> + } catch ( AsynchronousCloseException e ) { <nl> / / Doesn ' t need a user attention - ignore . <nl> channel . currentWriteEvent = evt ; <nl> channel . currentWriteIndex = bufIdx ; <nl> - channel . inWriteNowLoop = false ; <nl> - <nl> - / / But we still need to clean up the pending writes . <nl> - cleanUpWriteBuffer ( channel , e ) ; <nl> - break ; <nl> } catch ( Throwable t ) { <nl> channel . currentWriteEvent = null ; <nl> - channel . inWriteNowLoop = false ; <nl> evt . getFuture ( ) . setFailure ( t ) ; <nl> evt = null ; <nl> fireExceptionCaught ( channel , t ) ; <nl> if ( t instanceof IOException ) { <nl> open = false ; <nl> close ( channel , succeededFuture ( channel ) ) ; <nl> - break ; <nl> } <nl> } <nl> } <nl> static void close ( NioSocketChannel channel , ChannelFuture future ) { <nl> fireChannelUnbound ( channel ) ; <nl> } <nl> <nl> - cleanUpWriteBuffer ( channel , null ) ; <nl> + cleanUpWriteBuffer ( channel ) ; <nl> fireChannelClosed ( channel ) ; <nl> } else { <nl> future . setSuccess ( ) ; <nl> static void close ( NioSocketChannel channel , ChannelFuture future ) { <nl> } <nl> } <nl> <nl> - private static void cleanUpWriteBuffer ( NioSocketChannel channel , Exception cause ) { <nl> + private static void cleanUpWriteBuffer ( NioSocketChannel channel ) { <nl> + Exception cause = null ; <nl> boolean fireExceptionCaught = false ; <nl> <nl> / / Clean up the stale messages in the write buffer . <nl> private static void cleanUpWriteBuffer ( NioSocketChannel channel , Exception cause <nl> <nl> / / Create the exception only once to avoid the excessive overhead <nl> / / caused by fillStackTrace . <nl> - if ( cause = = null ) { <nl> - if ( channel . isOpen ( ) ) { <nl> - cause = new NotYetConnectedException ( ) ; <nl> - } else { <nl> - cause = new ClosedChannelException ( ) ; <nl> - } <nl> + if ( channel . isOpen ( ) ) { <nl> + cause = new NotYetConnectedException ( ) ; <nl> + } else { <nl> + cause = new ClosedChannelException ( ) ; <nl> } <nl> evt . getFuture ( ) . setFailure ( cause ) ; <nl> fireExceptionCaught = true ; <nl>","* Reverted back the optimization applied between 3.1.4 and 3.1.3
* Removed unnecessary break statement in NioWorker.writeNow()",c600c8f9f163164c61dba82e0c1f392b26daf75c,Trivial Why,,Version Management; Code refactoring,,Summarize code object change,,Contrast before and after,,,
268243,mmm a / sharding - orchestration / sharding - orchestration - core / src / test / java / io / shardingsphere / orchestration / internal / rule / OrchestrationMasterSlaveRuleTest . java <nl> ppp b / sharding - orchestration / sharding - orchestration - core / src / test / java / io / shardingsphere / orchestration / internal / rule / OrchestrationMasterSlaveRuleTest . java <nl> <nl> import static org . hamcrest . CoreMatchers . is ; <nl> import static org . junit . Assert . assertThat ; <nl> <nl> - <nl> public class OrchestrationMasterSlaveRuleTest { <nl> <nl> private OrchestrationMasterSlaveRule orchestrationMasterSlaveRule ; <nl>,for check style,69559b5c5099178adc331011e7e69ffe49d37531,Trivial Why,,Code refactoring,,Missing What,,,,,
211453,"mmm a / vertx - core / src / main / java / io / vertx / core / impl / VertxThreadFactory . java <nl> ppp b / vertx - core / src / main / java / io / vertx / core / impl / VertxThreadFactory . java <nl> <nl> <nl> public Thread newThread ( Runnable runnable ) { <nl> VertxThread t = new VertxThread ( runnable , prefix + threadCount . getAndIncrement ( ) , worker ) ; <nl> - / / All vert . x threads are daemons <nl> - / / t . setDaemon ( true ) ; <nl> + / / Vert . x threads are NOT daemons - we want them to prevent JVM exit so embededd user doesn ' t <nl> + / / have to explicitly prevent JVM from exiting . <nl> if ( checker ! = null ) { <nl> checker . registerThread ( t ) ; <nl> } <nl>",Remove dead code and add comment on daemons,79d8cbcd53a800644c032df68a034357df9a23bf,Trivial Why,,﻿Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
198490,"new file mode 100644 <nl> index 00000000000 . . 846cece1776 <nl> mmm / dev / null <nl> ppp b / spring - reactive - websocket / pom . xml <nl> <nl> + < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> + < project xmlns = "" http : / / maven . apache . org / POM / 4 . 0 . 0 "" xmlns : xsi = "" http : / / www . w3 . org / 2001 / XMLSchema - instance "" <nl> + xsi : schemaLocation = "" http : / / maven . apache . org / POM / 4 . 0 . 0 http : / / maven . apache . org / xsd / maven - 4 . 0 . 0 . xsd "" > <nl> + < modelVersion > 4 . 0 . 0 < / modelVersion > <nl> + <nl> + < artifactId > spring - reactive - websocket < / artifactId > <nl> + < version > 0 . 0 . 1 - SNAPSHOT < / version > <nl> + < packaging > jar < / packaging > <nl> + <nl> + < name > spring - reactive - websocket < / name > <nl> + < description > Reactive WebSockets with Spring 5 < / description > <nl> + <nl> + < parent > <nl> + < groupId > com . baeldung < / groupId > <nl> + < artifactId > parent - modules < / artifactId > <nl> + < version > 1 . 0 . 0 - SNAPSHOT < / version > <nl> + < / parent > <nl> + <nl> + < properties > <nl> + < project . build . sourceEncoding > UTF - 8 < / project . build . sourceEncoding > <nl> + < project . reporting . outputEncoding > UTF - 8 < / project . reporting . outputEncoding > <nl> + < java . version > 1 . 8 < / java . version > <nl> + < / properties > <nl> + <nl> + < dependencies > <nl> + < dependency > <nl> + < groupId > org . springframework . boot < / groupId > <nl> + < artifactId > spring - boot - starter - integration < / artifactId > <nl> + < version > 2 . 0 . 0 . M7 < / version > <nl> + < / dependency > <nl> + < dependency > <nl> + < groupId > org . springframework . boot < / groupId > <nl> + < artifactId > spring - boot - starter - webflux < / artifactId > <nl> + < version > 2 . 0 . 0 . M7 < / version > <nl> + < / dependency > <nl> + < dependency > <nl> + < groupId > org . projectlombok < / groupId > <nl> + < artifactId > lombok < / artifactId > <nl> + < scope > compile < / scope > <nl> + < version > RELEASE < / version > <nl> + < / dependency > <nl> + < / dependencies > <nl> + <nl> + < build > <nl> + < plugins > <nl> + < plugin > <nl> + < groupId > org . springframework . boot < / groupId > <nl> + < artifactId > spring - boot - maven - plugin < / artifactId > <nl> + < / plugin > <nl> + < / plugins > <nl> + < / build > <nl> + <nl> + < repositories > <nl> + < repository > <nl> + < id > spring - snapshots < / id > <nl> + < name > Spring Snapshots < / name > <nl> + < url > https : / / repo . spring . io / snapshot < / url > <nl> + < snapshots > <nl> + < enabled > true < / enabled > <nl> + < / snapshots > <nl> + < / repository > <nl> + < repository > <nl> + < id > spring - milestones < / id > <nl> + < name > Spring Milestones < / name > <nl> + < url > https : / / repo . spring . io / milestone < / url > <nl> + < snapshots > <nl> + < enabled > false < / enabled > <nl> + < / snapshots > <nl> + < / repository > <nl> + < / repositories > <nl> + <nl> + < pluginRepositories > <nl> + < pluginRepository > <nl> + < id > spring - snapshots < / id > <nl> + < name > Spring Snapshots < / name > <nl> + < url > https : / / repo . spring . io / snapshot < / url > <nl> + < snapshots > <nl> + < enabled > true < / enabled > <nl> + < / snapshots > <nl> + < / pluginRepository > <nl> + < pluginRepository > <nl> + < id > spring - milestones < / id > <nl> + < name > Spring Milestones < / name > <nl> + < url > https : / / repo . spring . io / milestone < / url > <nl> + < snapshots > <nl> + < enabled > false < / enabled > <nl> + < / snapshots > <nl> + < / pluginRepository > <nl> + < / pluginRepositories > <nl> + <nl> + <nl> + < / project > <nl> new file mode 100644 <nl> index 00000000000 . . 20d678c2148 <nl> mmm / dev / null <nl> ppp b / spring - reactive - websocket / src / main / java / com / baeldung / Event . java <nl> <nl> + package com . baeldung ; <nl> + <nl> + import lombok . AllArgsConstructor ; <nl> + import lombok . Data ; <nl> + <nl> + @ Data <nl> + @ AllArgsConstructor <nl> + public class Event { <nl> + private String eventId ; <nl> + private String eventDt ; <nl> + } <nl> new file mode 100644 <nl> index 00000000000 . . f8952d750de <nl> mmm / dev / null <nl> ppp b / spring - reactive - websocket / src / main / java / com / baeldung / ReactiveWebSocketApplication . java <nl> <nl> + package com . baeldung ; <nl> + <nl> + import java . net . URI ; <nl> + import java . time . Duration ; <nl> + <nl> + import org . springframework . boot . CommandLineRunner ; <nl> + import org . springframework . boot . SpringApplication ; <nl> + import org . springframework . boot . autoconfigure . SpringBootApplication ; <nl> + import org . springframework . context . annotation . Bean ; <nl> + import org . springframework . web . reactive . socket . WebSocketMessage ; <nl> + import org . springframework . web . reactive . socket . client . ReactorNettyWebSocketClient ; <nl> + import org . springframework . web . reactive . socket . client . WebSocketClient ; <nl> + <nl> + import reactor . core . publisher . Mono ; <nl> + <nl> + @ SpringBootApplication <nl> + public class ReactiveWebSocketApplication { <nl> + public static void main ( String [ ] args ) { <nl> + SpringApplication . run ( ReactiveWebSocketApplication . class , args ) ; <nl> + } <nl> + <nl> + / * * <nl> + * Spring Reactive WebSocket Client <nl> + * * * / <nl> + @ Bean <nl> + CommandLineRunner runner ( ) { <nl> + return run - > { <nl> + WebSocketClient client = new ReactorNettyWebSocketClient ( ) ; <nl> + client . execute ( URI . create ( "" ws : / / localhost : 8080 / event - emitter "" ) , session - > session . send ( Mono . just ( session . textMessage ( "" event - me - from - spring - reactive - client "" ) ) ) <nl> + . thenMany ( session . receive ( ) <nl> + . map ( WebSocketMessage : : getPayloadAsText ) <nl> + . log ( ) ) <nl> + . then ( ) ) <nl> + . block ( ) ; <nl> + / / . block ( Duration . ofSeconds ( 10L ) ) ; / / force timeout after given duration <nl> + } ; <nl> + } <nl> + } <nl> new file mode 100644 <nl> index 00000000000 . . 6729e09273a <nl> mmm / dev / null <nl> ppp b / spring - reactive - websocket / src / main / java / com / baeldung / ReactiveWebSocketConfiguration . java <nl> <nl> + package com . baeldung ; <nl> + <nl> + import org . springframework . beans . factory . annotation . Autowired ; <nl> + import org . springframework . context . annotation . Bean ; <nl> + import org . springframework . context . annotation . Configuration ; <nl> + import org . springframework . web . reactive . HandlerMapping ; <nl> + import org . springframework . web . reactive . handler . SimpleUrlHandlerMapping ; <nl> + import org . springframework . web . reactive . socket . WebSocketHandler ; <nl> + import org . springframework . web . reactive . socket . server . support . WebSocketHandlerAdapter ; <nl> + import java . util . HashMap ; <nl> + import java . util . Map ; <nl> + <nl> + @ Configuration <nl> + public class ReactiveWebSocketConfiguration { <nl> + <nl> + @ Autowired <nl> + private WebSocketHandler webSocketHandler ; <nl> + <nl> + @ Bean <nl> + public HandlerMapping webSocketHandlerMapping ( ) { <nl> + Map < String , WebSocketHandler > map = new HashMap < > ( ) ; <nl> + map . put ( "" / event - emitter "" , webSocketHandler ) ; <nl> + <nl> + SimpleUrlHandlerMapping handlerMapping = new SimpleUrlHandlerMapping ( ) ; <nl> + handlerMapping . setOrder ( 1 ) ; <nl> + handlerMapping . setUrlMap ( map ) ; <nl> + return handlerMapping ; <nl> + } <nl> + <nl> + @ Bean <nl> + public WebSocketHandlerAdapter handlerAdapter ( ) { <nl> + return new WebSocketHandlerAdapter ( ) ; <nl> + } <nl> + } <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . 4a548322b36 <nl> mmm / dev / null <nl> ppp b / spring - reactive - websocket / src / main / java / com / baeldung / ReactiveWebSocketHandler . java <nl> <nl> + package com . baeldung ; <nl> + <nl> + import org . springframework . web . reactive . socket . WebSocketSession ; <nl> + <nl> + import com . fasterxml . jackson . core . JsonProcessingException ; <nl> + import com . fasterxml . jackson . databind . ObjectMapper ; <nl> + <nl> + imp",Merge pull request from felipeazv / master,0a343e10cb3d902795ec066ef28517ba91465994,Trivial Why,,﻿Version management,,Trivial What,,,,,
356306,"mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / controls / resultset / AbstractPresentation . java <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / controls / resultset / AbstractPresentation . java <nl> <nl> private final List < ISelectionChangedListener > selectionChangedListenerList = new ArrayList < > ( ) ; <nl> protected IThemeManager themeManager ; <nl> private IPropertyChangeListener themeChangeListener ; <nl> + private long lastThemeUpdateTime ; <nl> <nl> @ Override <nl> @ NotNull <nl> public void createPresentation ( @ NotNull final IResultSetController controller , @ <nl> <nl> this . themeManager = controller . getSite ( ) . getWorkbenchWindow ( ) . getWorkbench ( ) . getThemeManager ( ) ; <nl> this . themeChangeListener = event - > { <nl> - if ( event . getProperty ( ) . startsWith ( ThemeConstants . RESULTS_PROP_PREFIX ) ) { <nl> - applyThemeSettings ( ) ; <nl> + if ( event . getProperty ( ) . equals ( IThemeManager . CHANGE_CURRENT_THEME ) | | <nl> + event . getProperty ( ) . startsWith ( ThemeConstants . RESULTS_PROP_PREFIX ) ) <nl> + { <nl> + if ( lastThemeUpdateTime > 0 & & System . currentTimeMillis ( ) - lastThemeUpdateTime < 500 ) { <nl> + / / Do not update too often ( theme change may trigger this hundreds of times ) <nl> + return ; <nl> + } <nl> + lastThemeUpdateTime = System . currentTimeMillis ( ) ; <nl> + UIUtils . asyncExec ( this : : applyThemeSettings ) ; <nl> } <nl> } ; <nl> this . themeManager . addPropertyChangeListener ( themeChangeListener ) ; <nl> mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / editors / sql / SQLEditorBase . java <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / editors / sql / SQLEditorBase . java <nl> public void propertyChange ( PropertyChangeEvent event ) <nl> return ; <nl> } <nl> lastUpdateTime = System . currentTimeMillis ( ) ; <nl> - reloadSyntaxRules ( ) ; <nl> - / / Reconfigure to let comments / strings colors to take effect <nl> - getSourceViewer ( ) . configure ( getSourceViewerConfiguration ( ) ) ; <nl> + UIUtils . asyncExec ( ( ) - > { <nl> + reloadSyntaxRules ( ) ; <nl> + / / Reconfigure to let comments / strings colors to take effect <nl> + getSourceViewer ( ) . configure ( getSourceViewerConfiguration ( ) ) ; <nl> + } ) ; <nl> } <nl> } <nl> } ; <nl>",UI theme change reflection was fixed ( SQL editor + results viewer ),fc1adc3ad3cb5908386ff901eaa91e81e591f7a6,﻿Describe Objective,,﻿To fix defects,,Illustrate Function,,,,,
271250,mmm a / plugins / org . jkiss . dbeaver . ext . postgresql / src / org / jkiss / dbeaver / ext / postgresql / model / jdbc / PostgreResultSetMetaDataImpl . java <nl> ppp b / plugins / org . jkiss . dbeaver . ext . postgresql / src / org / jkiss / dbeaver / ext / postgresql / model / jdbc / PostgreResultSetMetaDataImpl . java <nl> <nl> package org . jkiss . dbeaver . ext . postgresql . model . jdbc ; <nl> <nl> import org . jkiss . dbeaver . ext . postgresql . model . PostgreDataSource ; <nl> + import org . jkiss . dbeaver . model . DBPDataSource ; <nl> import org . jkiss . dbeaver . model . exec . jdbc . JDBCResultSet ; <nl> import org . jkiss . dbeaver . model . impl . jdbc . JDBCUtils ; <nl> import org . jkiss . dbeaver . model . impl . jdbc . exec . JDBCResultSetMetaDataImpl ; <nl> public PostgreResultSetMetaDataImpl ( JDBCResultSet resultSet ) throws SQLException <nl> * / <nl> @ Override <nl> public String getCatalogName ( int column ) throws SQLException { <nl> - return ( ( PostgreDataSource ) resultSet . getSession ( ) . getDataSource ( ) ) . getDefaultInstance ( ) . getName ( ) ; <nl> + DBPDataSource dataSource = resultSet . getSession ( ) . getDataSource ( ) ; <nl> + if ( dataSource instanceof PostgreDataSource ) { <nl> + return ( ( PostgreDataSource ) dataSource ) . getDefaultInstance ( ) . getName ( ) ; <nl> + } <nl> + return null ; <nl> } <nl> <nl> @ Override <nl>,PostgreSQL metadata read fix ( Generic driver ),e2b8dd0ef9ceb61966af6790ffe7f665ee396d62,Missing Why,,Missing Why,,﻿Summarize Code Object Change,,﻿Object of change,,,
205345,mmm a / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / preferences / TargetPrefPage . java <nl> ppp b / plugins / org . jkiss . dbeaver . core / src / org / jkiss / dbeaver / ui / preferences / TargetPrefPage . java <nl> protected void performApply ( ) { <nl> <nl> @ Override <nl> public final boolean performOk ( ) { <nl> - DBPPreferenceStore store = getTargetPreferenceStore ( ) ; <nl> + DBPPreferenceStore store = isDataSourcePreferencePage ( ) ? <nl> + getDataSourceContainer ( ) . getPreferenceStore ( ) : <nl> + DBeaverCore . getGlobalPreferenceStore ( ) ; <nl> if ( isDataSourcePreferencePage ( ) & & ! useDataSourceSettings ( ) ) { <nl> / / Just delete datasource specific settings <nl> clearPreferences ( store ) ; <nl>,Taregt pref page fix ( settings reset ),31743e5e2ea506a973d1af6248657204db5e9777,Missing Why,,Missing Why,,﻿Summarize Code Object Change,,Characteristics of changes,,,
155913,"deleted file mode 100644 <nl> index 3cc09b4076 . . 0000000000 <nl> mmm a / rxjava - core / src / test / java / rx / RefCountTest . java <nl> ppp / dev / null <nl> <nl> - package rx ; <nl> - <nl> - import static org . junit . Assert . * ; <nl> - <nl> - import java . util . ArrayList ; <nl> - import java . util . List ; <nl> - import java . util . concurrent . TimeUnit ; <nl> - <nl> - import org . junit . Test ; <nl> - <nl> - import rx . concurrency . TestScheduler ; <nl> - import rx . util . functions . Action1 ; <nl> - <nl> - public class RefCountTest { <nl> - <nl> - @ Test <nl> - public void testRefCount ( ) { <nl> - TestScheduler s = new TestScheduler ( ) ; <nl> - Observable < Long > interval = Observable . interval ( 100 , TimeUnit . MILLISECONDS , s ) . publish ( ) . refCount ( ) ; <nl> - <nl> - / / subscribe list1 <nl> - final List < Long > list1 = new ArrayList < Long > ( ) ; <nl> - Subscription s1 = interval . subscribe ( new Action1 < Long > ( ) { <nl> - <nl> - @ Override <nl> - public void call ( Long t1 ) { <nl> - list1 . add ( t1 ) ; <nl> - } <nl> - <nl> - } ) ; <nl> - s . advanceTimeBy ( 200 , TimeUnit . MILLISECONDS ) ; <nl> - <nl> - assertEquals ( 2 , list1 . size ( ) ) ; <nl> - assertEquals ( 0L , list1 . get ( 0 ) . longValue ( ) ) ; <nl> - assertEquals ( 1L , list1 . get ( 1 ) . longValue ( ) ) ; <nl> - <nl> - / / subscribe list2 <nl> - final List < Long > list2 = new ArrayList < Long > ( ) ; <nl> - Subscription s2 = interval . subscribe ( new Action1 < Long > ( ) { <nl> - <nl> - @ Override <nl> - public void call ( Long t1 ) { <nl> - list2 . add ( t1 ) ; <nl> - } <nl> - <nl> - } ) ; <nl> - s . advanceTimeBy ( 300 , TimeUnit . MILLISECONDS ) ; <nl> - <nl> - / / list 1 should have 5 items <nl> - assertEquals ( 5 , list1 . size ( ) ) ; <nl> - assertEquals ( 2L , list1 . get ( 2 ) . longValue ( ) ) ; <nl> - assertEquals ( 3L , list1 . get ( 3 ) . longValue ( ) ) ; <nl> - assertEquals ( 4L , list1 . get ( 4 ) . longValue ( ) ) ; <nl> - <nl> - / / list 2 should only have 3 items <nl> - assertEquals ( 3 , list2 . size ( ) ) ; <nl> - assertEquals ( 2L , list2 . get ( 0 ) . longValue ( ) ) ; <nl> - assertEquals ( 3L , list2 . get ( 1 ) . longValue ( ) ) ; <nl> - assertEquals ( 4L , list2 . get ( 2 ) . longValue ( ) ) ; <nl> - <nl> - / / unsubscribe list1 <nl> - s1 . unsubscribe ( ) ; <nl> - <nl> - / / advance further <nl> - s . advanceTimeBy ( 300 , TimeUnit . MILLISECONDS ) ; <nl> - <nl> - / / list 1 should still have 5 items <nl> - assertEquals ( 5 , list1 . size ( ) ) ; <nl> - <nl> - / / list 2 should have 6 items <nl> - assertEquals ( 6 , list2 . size ( ) ) ; <nl> - assertEquals ( 5L , list2 . get ( 3 ) . longValue ( ) ) ; <nl> - assertEquals ( 6L , list2 . get ( 4 ) . longValue ( ) ) ; <nl> - assertEquals ( 7L , list2 . get ( 5 ) . longValue ( ) ) ; <nl> - <nl> - / / unsubscribe list2 <nl> - s2 . unsubscribe ( ) ; <nl> - <nl> - / / advance further <nl> - s . advanceTimeBy ( 1000 , TimeUnit . MILLISECONDS ) ; <nl> - <nl> - / / the following is not working as it seems the PublishSubject does not allow re - subscribing . TODO fix that in subsequent pull request <nl> - <nl> - <nl> - / / / / subscribing a new one should start over because the source should have been unsubscribed <nl> - / / / / subscribe list1 <nl> - / / final List < Long > list3 = new ArrayList < Long > ( ) ; <nl> - / / Subscription s3 = interval . subscribe ( new Action1 < Long > ( ) { <nl> - / / <nl> - / / @ Override <nl> - / / public void call ( Long t1 ) { <nl> - / / list3 . add ( t1 ) ; <nl> - / / } <nl> - / / <nl> - / / } ) ; <nl> - / / s . advanceTimeBy ( 200 , TimeUnit . MILLISECONDS ) ; <nl> - / / <nl> - / / assertEquals ( 2 , list3 . size ( ) ) ; <nl> - / / assertEquals ( 0L , list3 . get ( 0 ) . longValue ( ) ) ; <nl> - / / assertEquals ( 1L , list3 . get ( 1 ) . longValue ( ) ) ; <nl> - <nl> - } <nl> - } <nl> mmm a / rxjava - core / src / test / java / rx / RefCountTests . java <nl> ppp b / rxjava - core / src / test / java / rx / RefCountTests . java <nl> <nl> import org . junit . Before ; <nl> import org . junit . Test ; <nl> import org . mockito . MockitoAnnotations ; <nl> + <nl> + import rx . concurrency . TestScheduler ; <nl> import rx . subscriptions . Subscriptions ; <nl> import rx . util . functions . Action0 ; <nl> + import rx . util . functions . Action1 ; <nl> <nl> + import java . util . ArrayList ; <nl> + import java . util . List ; <nl> + import java . util . concurrent . TimeUnit ; <nl> import java . util . concurrent . atomic . AtomicInteger ; <nl> <nl> import static org . junit . Assert . assertEquals ; <nl> public void call ( ) { <nl> second . unsubscribe ( ) ; <nl> assertEquals ( 1 , unsubscriptionCount . get ( ) ) ; <nl> } <nl> + <nl> + @ Test <nl> + public void testRefCount ( ) { <nl> + TestScheduler s = new TestScheduler ( ) ; <nl> + Observable < Long > interval = Observable . interval ( 100 , TimeUnit . MILLISECONDS , s ) . publish ( ) . refCount ( ) ; <nl> + <nl> + / / subscribe list1 <nl> + final List < Long > list1 = new ArrayList < Long > ( ) ; <nl> + Subscription s1 = interval . subscribe ( new Action1 < Long > ( ) { <nl> + <nl> + @ Override <nl> + public void call ( Long t1 ) { <nl> + list1 . add ( t1 ) ; <nl> + } <nl> + <nl> + } ) ; <nl> + s . advanceTimeBy ( 200 , TimeUnit . MILLISECONDS ) ; <nl> + <nl> + assertEquals ( 2 , list1 . size ( ) ) ; <nl> + assertEquals ( 0L , list1 . get ( 0 ) . longValue ( ) ) ; <nl> + assertEquals ( 1L , list1 . get ( 1 ) . longValue ( ) ) ; <nl> + <nl> + / / subscribe list2 <nl> + final List < Long > list2 = new ArrayList < Long > ( ) ; <nl> + Subscription s2 = interval . subscribe ( new Action1 < Long > ( ) { <nl> + <nl> + @ Override <nl> + public void call ( Long t1 ) { <nl> + list2 . add ( t1 ) ; <nl> + } <nl> + <nl> + } ) ; <nl> + s . advanceTimeBy ( 300 , TimeUnit . MILLISECONDS ) ; <nl> + <nl> + / / list 1 should have 5 items <nl> + assertEquals ( 5 , list1 . size ( ) ) ; <nl> + assertEquals ( 2L , list1 . get ( 2 ) . longValue ( ) ) ; <nl> + assertEquals ( 3L , list1 . get ( 3 ) . longValue ( ) ) ; <nl> + assertEquals ( 4L , list1 . get ( 4 ) . longValue ( ) ) ; <nl> + <nl> + / / list 2 should only have 3 items <nl> + assertEquals ( 3 , list2 . size ( ) ) ; <nl> + assertEquals ( 2L , list2 . get ( 0 ) . longValue ( ) ) ; <nl> + assertEquals ( 3L , list2 . get ( 1 ) . longValue ( ) ) ; <nl> + assertEquals ( 4L , list2 . get ( 2 ) . longValue ( ) ) ; <nl> + <nl> + / / unsubscribe list1 <nl> + s1 . unsubscribe ( ) ; <nl> + <nl> + / / advance further <nl> + s . advanceTimeBy ( 300 , TimeUnit . MILLISECONDS ) ; <nl> + <nl> + / / list 1 should still have 5 items <nl> + assertEquals ( 5 , list1 . size ( ) ) ; <nl> + <nl> + / / list 2 should have 6 items <nl> + assertEquals ( 6 , list2 . size ( ) ) ; <nl> + assertEquals ( 5L , list2 . get ( 3 ) . longValue ( ) ) ; <nl> + assertEquals ( 6L , list2 . get ( 4 ) . longValue ( ) ) ; <nl> + assertEquals ( 7L , list2 . get ( 5 ) . longValue ( ) ) ; <nl> + <nl> + / / unsubscribe list2 <nl> + s2 . unsubscribe ( ) ; <nl> + <nl> + / / advance further <nl> + s . advanceTimeBy ( 1000 , TimeUnit . MILLISECONDS ) ; <nl> + <nl> + / / the following is not working as it seems the PublishSubject does not allow re - subscribing . TODO fix that in subsequent pull request <nl> + <nl> + <nl> + / / / / subscribing a new one should start over because the source should have been unsubscribed <nl> + / / / / subscribe list1 <nl> + / / final List < Long > list3 = new ArrayList < Long > ( ) ; <nl> + / / Subscription s3 = interval . subscribe ( new Action1 < Long > ( ) { <nl> + / / <nl> + / / @ Override <nl> + / / public void call ( Long t1 ) { <nl> + / / list3 . add ( t1 ) ; <nl> + / / } <nl> + / / <nl> + / / } ) ; <nl> + / / s . advanceTimeBy ( 200 , TimeUnit . MILLISECONDS ) ; <nl> + / / <nl> + / / assertEquals ( 2 , list3 . size ( ) ) ; <nl> + / / assertEquals ( 0L , list3 . get ( 0 ) . longValue ( ) ) ; <nl> + / / assertEquals ( 1L , list3 . get ( 1 ) . longValue ( ) ) ; <nl> + <nl> + } <nl> } <nl>",Combine RefCountTest and RefCountTests,500909d3a605ec69a5883b5952fe1b6e4981cfb0,,Trivial Why,,Test cases,﻿Summarize Code Object Change,,﻿Object of change,,,
188630,"mmm a / Ghidra / Features / Base / src / main / java / ghidra / app / plugin / core / symboltree / SymbolTreeProvider . java <nl> ppp b / Ghidra / Features / Base / src / main / java / ghidra / app / plugin / core / symboltree / SymbolTreeProvider . java <nl> <nl> import javax . swing . * ; <nl> import javax . swing . tree . TreePath ; <nl> <nl> - import org . apache . commons . lang3 . ArrayUtils ; <nl> - <nl> import docking . ActionContext ; <nl> import docking . action . DockingAction ; <nl> import docking . widgets . tree . * ; <nl> private SymbolGTree createTree ( SymbolTreeRootNode rootNode ) { <nl> return ; <nl> } <nl> <nl> - goToUniquelySelectedSymbol ( ) ; <nl> + maybeGoToSymbol ( ) ; <nl> contextChanged ( ) ; <nl> } ) ; <nl> <nl> public void mouseClicked ( MouseEvent e ) { <nl> / / For now , just attempt to perform the goto . It may get called twice , but this <nl> / / should have no real impact on performance . <nl> <nl> - goToUniquelySelectedSymbol ( ) ; <nl> + maybeGoToSymbol ( ) ; <nl> } <nl> } ) ; <nl> <nl> public void mouseClicked ( MouseEvent e ) { <nl> return newTree ; <nl> } <nl> <nl> - private void goToUniquelySelectedSymbol ( ) { <nl> + private void maybeGoToSymbol ( ) { <nl> <nl> TreePath [ ] paths = tree . getSelectionPaths ( ) ; <nl> - if ( ArrayUtils . isEmpty ( paths ) ) { <nl> - return ; <nl> - } <nl> - <nl> - if ( paths . length > 1 ) { <nl> + if ( paths = = null | | paths . length ! = 1 ) { <nl> return ; <nl> } <nl> <nl>",GT - 3436 - Fixed symbol tree navigation - review fixes,68de43307ed96935cd9c9303f04d39f4c69393d5,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
162029,"new file mode 100644 <nl> index 000000000 . . 90a32fac6 <nl> mmm / dev / null <nl> ppp b / animated - drawable / src / main / java / com / facebook / fresco / animation / bitmap / cache / FrescoFrameCache . java <nl> <nl> + / * <nl> + * Copyright ( c ) 2015 - present , Facebook , Inc . <nl> + * All rights reserved . <nl> + * <nl> + * This source code is licensed under the BSD - style license found in the <nl> + * LICENSE file in the root directory of this source tree . An additional grant <nl> + * of patent rights can be found in the PATENTS file in the same directory . <nl> + * / <nl> + package com . facebook . fresco . animation . bitmap . cache ; <nl> + <nl> + import javax . annotation . Nullable ; <nl> + import javax . annotation . concurrent . GuardedBy ; <nl> + <nl> + import android . graphics . Bitmap ; <nl> + <nl> + import com . facebook . common . internal . Preconditions ; <nl> + import com . facebook . common . references . CloseableReference ; <nl> + import com . facebook . fresco . animation . bitmap . BitmapAnimationBackend ; <nl> + import com . facebook . fresco . animation . bitmap . BitmapFrameCache ; <nl> + import com . facebook . imagepipeline . animated . impl . AnimatedFrameCache ; <nl> + import com . facebook . imagepipeline . image . CloseableBitmap ; <nl> + import com . facebook . imagepipeline . image . CloseableImage ; <nl> + import com . facebook . imagepipeline . image . CloseableStaticBitmap ; <nl> + import com . facebook . imagepipeline . image . ImmutableQualityInfo ; <nl> + import com . facebook . imageutils . BitmapUtil ; <nl> + <nl> + / * * <nl> + * Bitmap frame cache that uses Fresco ' s { @ link AnimatedFrameCache } to cache frames . <nl> + * / <nl> + public class FrescoFrameCache implements BitmapFrameCache { <nl> + <nl> + private final AnimatedFrameCache mAnimatedFrameCache ; <nl> + <nl> + @ GuardedBy ( "" this "" ) <nl> + @ Nullable <nl> + private CloseableReference < CloseableImage > mLastCachedItem ; <nl> + <nl> + public FrescoFrameCache ( AnimatedFrameCache animatedFrameCache ) { <nl> + mAnimatedFrameCache = animatedFrameCache ; <nl> + } <nl> + <nl> + @ Nullable <nl> + @ Override <nl> + public synchronized CloseableReference < Bitmap > getCachedFrame ( int frameNumber ) { <nl> + return extractAndClose ( mAnimatedFrameCache . get ( frameNumber ) ) ; <nl> + } <nl> + <nl> + @ Nullable <nl> + @ Override <nl> + public synchronized CloseableReference < Bitmap > getFallbackFrame ( int frameNumber ) { <nl> + return extractAndClose ( CloseableReference . cloneOrNull ( mLastCachedItem ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public synchronized CloseableReference < Bitmap > getBitmapToReuseForFrame ( <nl> + int frameNumber , <nl> + int width , <nl> + int height ) { <nl> + return extractAndClose ( mAnimatedFrameCache . getForReuse ( ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public synchronized int getSizeInBytes ( ) { <nl> + / / This currently does not include the size of the frame cache <nl> + return getBitmapSizeBytes ( mLastCachedItem ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public synchronized void clear ( ) { <nl> + CloseableReference . closeSafely ( mLastCachedItem ) ; <nl> + mLastCachedItem = null ; <nl> + / / The frame cache will free items when needed <nl> + } <nl> + <nl> + @ Override <nl> + public synchronized void onFrameRendered ( <nl> + int frameNumber , <nl> + CloseableReference < Bitmap > bitmapReference , <nl> + @ BitmapAnimationBackend . FrameType int frameType ) { <nl> + Preconditions . checkNotNull ( bitmapReference ) ; <nl> + CloseableReference < CloseableImage > closableReference = null ; <nl> + try { <nl> + / / The given CloseableStaticBitmap will be cached and then released by the resource releaser <nl> + / / of the closeable reference <nl> + CloseableImage closeableImage = new CloseableStaticBitmap ( <nl> + bitmapReference , <nl> + ImmutableQualityInfo . FULL_QUALITY , <nl> + 0 ) ; <nl> + closableReference = CloseableReference . of ( closeableImage ) ; <nl> + CloseableReference . closeSafely ( mLastCachedItem ) ; <nl> + mLastCachedItem = <nl> + mAnimatedFrameCache . cache ( frameNumber , closableReference ) ; <nl> + } finally { <nl> + CloseableReference . closeSafely ( closableReference ) ; <nl> + } <nl> + } <nl> + <nl> + @ Nullable <nl> + private static CloseableReference < Bitmap > extractAndClose ( <nl> + @ Nullable CloseableReference < CloseableImage > closeableImage ) { <nl> + try { <nl> + if ( CloseableReference . isValid ( closeableImage ) & & <nl> + closeableImage . get ( ) instanceof CloseableStaticBitmap ) { <nl> + return ( ( CloseableStaticBitmap ) closeableImage . get ( ) ) . convertToBitmapReference ( ) ; <nl> + } <nl> + return null ; <nl> + } finally { <nl> + CloseableReference . closeSafely ( closeableImage ) ; <nl> + } <nl> + } <nl> + <nl> + private static int getBitmapSizeBytes ( <nl> + @ Nullable CloseableReference < CloseableImage > imageReference ) { <nl> + if ( ! CloseableReference . isValid ( imageReference ) ) { <nl> + return 0 ; <nl> + } <nl> + return getBitmapSizeBytes ( imageReference . get ( ) ) ; <nl> + } <nl> + <nl> + private static int getBitmapSizeBytes ( @ Nullable CloseableImage image ) { <nl> + if ( ! ( image instanceof CloseableBitmap ) ) { <nl> + return 0 ; <nl> + } <nl> + return BitmapUtil . getSizeInBytes ( ( ( CloseableBitmap ) image ) . getUnderlyingBitmap ( ) ) ; <nl> + } <nl> + } <nl> mmm a / animated - drawable / src / main / java / com / facebook / fresco / animation / factory / ExperimentalBitmapAnimationDrawableFactory . java <nl> ppp b / animated - drawable / src / main / java / com / facebook / fresco / animation / factory / ExperimentalBitmapAnimationDrawableFactory . java <nl> <nl> import java . util . concurrent . ScheduledExecutorService ; <nl> <nl> import android . graphics . Rect ; <nl> + import android . net . Uri ; <nl> <nl> + import com . facebook . cache . common . CacheKey ; <nl> + import com . facebook . common . internal . Supplier ; <nl> import com . facebook . common . time . MonotonicClock ; <nl> import com . facebook . drawee . backends . pipeline . DrawableFactory ; <nl> import com . facebook . fresco . animation . backend . AnimationBackend ; <nl> import com . facebook . fresco . animation . backend . AnimationBackendDelegateWithInactivityCheck ; <nl> import com . facebook . fresco . animation . bitmap . BitmapAnimationBackend ; <nl> import com . facebook . fresco . animation . bitmap . BitmapFrameCache ; <nl> + import com . facebook . fresco . animation . bitmap . cache . FrescoFrameCache ; <nl> import com . facebook . fresco . animation . bitmap . cache . NoOpCache ; <nl> import com . facebook . fresco . animation . bitmap . wrapper . AnimatedDrawableBackendAnimationInformation ; <nl> import com . facebook . fresco . animation . bitmap . wrapper . AnimatedDrawableBackendFrameRenderer ; <nl> <nl> import com . facebook . imagepipeline . animated . base . AnimatedImage ; <nl> import com . facebook . imagepipeline . animated . base . AnimatedImageResult ; <nl> import com . facebook . imagepipeline . animated . impl . AnimatedDrawableBackendProvider ; <nl> + import com . facebook . imagepipeline . animated . impl . AnimatedFrameCache ; <nl> import com . facebook . imagepipeline . bitmaps . PlatformBitmapFactory ; <nl> + import com . facebook . imagepipeline . cache . CountingMemoryCache ; <nl> import com . facebook . imagepipeline . image . CloseableAnimatedImage ; <nl> import com . facebook . imagepipeline . image . CloseableImage ; <nl> <nl> <nl> * / <nl> public class ExperimentalBitmapAnimationDrawableFactory implements DrawableFactory { <nl> <nl> + public static final int CACHING_STRATEGY_NO_CACHE = 0 ; <nl> + public static final int CACHING_STRATEGY_FRESCO_CACHE = 1 ; <nl> + <nl> private final AnimatedDrawableBackendProvider mAnimatedDrawableBackendProvider ; <nl> private final ScheduledExecutorService mScheduledExecutorServiceForUiThread ; <nl> private final MonotonicClock mMonotonicClock ; <nl> private final PlatformBitmapFactory mPlatformBitmapFactory ; <nl> + private final CountingMemoryCache < CacheKey , CloseableImage > mBackingCache ; <nl> + private final Supplier < Integer > mCachingStrategySup",Added FrescoFrameCache that uses AnimatedFrameCache for caching,3e1fde1e320cb44c39e6a4ac227109cc95f7f7bb,﻿Describe Objective,,﻿To make improvements,,Illustrate Function,,,,,
56083,"new file mode 100644 <nl> index 00000000000 . . c072e652c55 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / audit / listener / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Actuator auditing listeners . <nl> + * / <nl> + package org . springframework . boot . actuate . audit . listener ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . 4a083f9dde6 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / audit / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Core actuator auditing classes . <nl> + * / <nl> + package org . springframework . boot . actuate . audit ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . f34d3fca022 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / autoconfigure / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Auto - configuration for the actuator . <nl> + * / <nl> + package org . springframework . boot . actuate . autoconfigure ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . 1d6eabc9ef3 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / endpoint / jmx / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Actuator JMX endpoint support . <nl> + * / <nl> + package org . springframework . boot . actuate . endpoint . jmx ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . 9cf7afd8ea0 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / endpoint / mvc / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Actuator Spring MVC endpoint support . <nl> + * / <nl> + package org . springframework . boot . actuate . endpoint . mvc ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . 45316d3b636 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / endpoint / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Endpoints used to expose actuator information . <nl> + * <nl> + * @ see org . springframework . boot . actuate . endpoint . Endpoint <nl> + * / <nl> + package org . springframework . boot . actuate . endpoint ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . d66117ff462 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / health / package - info . java <nl> <nl> + / * <nl> + * Copyright 2012 - 2015 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + / * * <nl> + * Actuator health indicators . <nl> + * / <nl> + package org . springframework . boot . actuate . health ; <nl> + <nl> new file mode 100644 <nl> index 00000000000 . . f13966a1135 <nl> mmm / dev / null <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / metrics / export / package - info . java <nl>",Add package javadoc,0696695e16fe1ca41b735037d8a63df34650c174,,Trivial Why,,Annotation change,Trivial What,,,,,
133052,"mmm a / rxjava - core / src / test / java / rx / operators / OperationDistinctTest . java <nl> ppp b / rxjava - core / src / test / java / rx / operators / OperationDistinctTest . java <nl> <nl> package rx . operators ; <nl> <nl> + import static org . mockito . Matchers . * ; <nl> + import static org . mockito . Mockito . * ; <nl> + import static org . mockito . MockitoAnnotations . * ; <nl> + import static rx . operators . OperationDistinct . * ; <nl> + <nl> + import java . util . Comparator ; <nl> + <nl> import org . junit . Before ; <nl> import org . junit . Test ; <nl> import org . mockito . InOrder ; <nl> import org . mockito . Mock ; <nl> + <nl> import rx . Observable ; <nl> import rx . Observer ; <nl> import rx . util . functions . Func1 ; <nl> <nl> - import java . util . Comparator ; <nl> - <nl> - import static org . mockito . Matchers . any ; <nl> - import static org . mockito . Matchers . anyString ; <nl> - import static org . mockito . Mockito . * ; <nl> - import static org . mockito . Mockito . never ; <nl> - import static org . mockito . MockitoAnnotations . initMocks ; <nl> - import static rx . Observable . * ; <nl> - import static rx . operators . OperationDistinct . distinct ; <nl> - <nl> public class OperationDistinctTest { <nl> <nl> @ Mock <nl> public void before ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNone ( ) { <nl> - Observable < String > src = empty ( ) ; <nl> - create ( distinct ( src ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . empty ( ) ; <nl> + Observable . create ( distinct ( src ) ) . subscribe ( w ) ; <nl> <nl> verify ( w , never ( ) ) . onNext ( anyString ( ) ) ; <nl> verify ( w , never ( ) ) . onError ( any ( Throwable . class ) ) ; <nl> public void testDistinctOfNone ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNoneWithKeySelector ( ) { <nl> - Observable < String > src = empty ( ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . empty ( ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> <nl> verify ( w , never ( ) ) . onNext ( anyString ( ) ) ; <nl> verify ( w , never ( ) ) . onError ( any ( Throwable . class ) ) ; <nl> public void testDistinctOfNoneWithKeySelector ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNormalSource ( ) { <nl> - Observable < String > src = from ( "" a "" , "" b "" , "" c "" , "" c "" , "" c "" , "" b "" , "" b "" , "" a "" , "" e "" ) ; <nl> - create ( distinct ( src ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" a "" , "" b "" , "" c "" , "" c "" , "" c "" , "" b "" , "" b "" , "" a "" , "" e "" ) ; <nl> + Observable . create ( distinct ( src ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" a "" ) ; <nl> public void testDistinctOfNormalSource ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNormalSourceWithKeySelector ( ) { <nl> - Observable < String > src = from ( "" a "" , "" B "" , "" c "" , "" C "" , "" c "" , "" B "" , "" b "" , "" a "" , "" E "" ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" a "" , "" B "" , "" c "" , "" C "" , "" c "" , "" B "" , "" b "" , "" a "" , "" E "" ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" a "" ) ; <nl> public void testDistinctOfNormalSourceWithKeySelector ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNormalSourceWithComparator ( ) { <nl> - Observable < String > src = from ( "" 1 "" , "" 12 "" , "" 123 "" , "" aaa "" , "" 321 "" , "" 12 "" , "" 21 "" , "" 1 "" , "" 12345 "" ) ; <nl> - create ( distinct ( src , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" 1 "" , "" 12 "" , "" 123 "" , "" aaa "" , "" 321 "" , "" 12 "" , "" 21 "" , "" 1 "" , "" 12345 "" ) ; <nl> + Observable . create ( distinct ( src , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" 1 "" ) ; <nl> public void testDistinctOfNormalSourceWithComparator ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNormalSourceWithKeySelectorAndComparator ( ) { <nl> - Observable < String > src = from ( "" a "" , "" x "" , "" ab "" , "" abc "" , "" cba "" , "" de "" , "" x "" , "" a "" , "" abcd "" ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" a "" , "" x "" , "" ab "" , "" abc "" , "" cba "" , "" de "" , "" x "" , "" a "" , "" abcd "" ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" a "" ) ; <nl> public void testDistinctOfNormalSourceWithKeySelectorAndComparator ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfNormalSourceWithKeySelectorAndComparatorAndTwoSubscriptions ( ) { <nl> - Observable < String > src = from ( "" a "" , "" x "" , "" ab "" , "" abc "" , "" cba "" , "" de "" , "" x "" , "" a "" , "" abcd "" ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" a "" , "" x "" , "" ab "" , "" abc "" , "" cba "" , "" de "" , "" x "" , "" a "" , "" abcd "" ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" a "" ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" x "" ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w2 ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION , COMPARE_LENGTH ) ) . subscribe ( w2 ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" abc "" ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" abcd "" ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onCompleted ( ) ; <nl> public void testDistinctOfNormalSourceWithKeySelectorAndComparatorAndTwoSubscrip <nl> <nl> @ Test <nl> public void testDistinctOfSourceWithNulls ( ) { <nl> - Observable < String > src = from ( null , "" a "" , "" a "" , null , null , "" b "" , null ) ; <nl> - create ( distinct ( src ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( null , "" a "" , "" a "" , null , null , "" b "" , null ) ; <nl> + Observable . create ( distinct ( src ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( null ) ; <nl> public void testDistinctOfSourceWithNulls ( ) { <nl> <nl> @ Test <nl> public void testDistinctOfSourceWithExceptionsFromKeySelector ( ) { <nl> - Observable < String > src = from ( "" a "" , "" b "" , null , "" c "" ) ; <nl> - create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> + Observable < String > src = Observable . from ( "" a "" , "" b "" , null , "" c "" ) ; <nl> + Observable . create ( distinct ( src , TO_UPPER_WITH_EXCEPTION ) ) . subscribe ( w ) ; <nl> <nl> InOrder inOrder = inOrder ( w ) ; <nl> inOrder . verify ( w , times ( 1 ) ) . onNext ( "" a "" ) ; <nl> mmm a / rxjava - core / src / test / java / rx / operators / OperationDistinctUntilChangedTest . java <nl> ppp b / rxjava - core / src / test / java / rx / operators / OperationDistinctUntilChangedTest . java <nl> <nl> package rx . operators ; <nl> <nl> + import static org . mockito . Matchers . * ; <nl> + import static org . mockito . Mockito . * ; <nl> + import static org . mockito . MockitoAnnotations . * ; <nl> + import static rx . operators . OperationDistinctUntilChanged . * ; <nl> + <nl> + import java . util . Comparator ; <nl> + <nl> import org . junit . Before ; <nl> import org . junit . Test ; <nl> import org . mockito . InOrder ; <nl> import org . mockito . Mock ; <nl> + <nl> import rx . Observable ; <nl> import rx . Observer ; <nl> import rx . util . functions . Func1 ; <nl> <nl> - import java . util . C",Fix ambiguous imports,97ab170928f91847de51d8094a0bcf363de82b22,﻿Describe Objective,,﻿To fix defects,,Trivial What,,,,,
261222,"deleted file mode 100644 <nl> index 4ce036d697 . . 0000000000 <nl> mmm a / tests / gdx - tests / src / com / badlogic / gdx / tests / ActorLocalTransformTest . java <nl> ppp / dev / null <nl> <nl> - / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * <nl> - * Copyright 2011 See AUTHORS file . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / <nl> - <nl> - package com . badlogic . gdx . tests ; <nl> - <nl> - import com . badlogic . gdx . Gdx ; <nl> - import com . badlogic . gdx . graphics . GL10 ; <nl> - import com . badlogic . gdx . graphics . Texture ; <nl> - import com . badlogic . gdx . math . Vector2 ; <nl> - import com . badlogic . gdx . scenes . scene2d . Stage ; <nl> - import com . badlogic . gdx . scenes . scene2d . actions . Forever ; <nl> - import com . badlogic . gdx . scenes . scene2d . actions . RotateBy ; <nl> - import com . badlogic . gdx . scenes . scene2d . actors . Image ; <nl> - import com . badlogic . gdx . tests . utils . GdxTest ; <nl> - <nl> - public class ActorLocalTransformTest extends GdxTest { <nl> - <nl> - Stage stage ; <nl> - Image dot ; <nl> - Image testbar ; <nl> - <nl> - @ Override <nl> - public boolean needsGL20 ( ) { <nl> - return false ; <nl> - } <nl> - <nl> - @ Override <nl> - public void create ( ) { <nl> - <nl> - testbar = new Image ( "" testbar "" , new Texture ( Gdx . files . internal ( "" data / testbar . png "" ) ) ) ; <nl> - testbar . x = 240 - testbar . originX ; <nl> - testbar . y = 160 - testbar . originY ; <nl> - <nl> - dot = new Image ( "" dot "" , new Texture ( Gdx . files . internal ( "" data / testdot . png "" ) ) ) ; <nl> - <nl> - stage = new Stage ( 480 , 320 , true ) ; <nl> - stage . addActor ( testbar ) ; <nl> - stage . addActor ( dot ) ; <nl> - <nl> - testbar . action ( Forever . $ ( RotateBy . $ ( 20 , 1 ) ) ) ; <nl> - } <nl> - <nl> - private final Vector2 tmp = new Vector2 ( ) ; <nl> - <nl> - @ Override <nl> - public void render ( ) { <nl> - <nl> - Gdx . gl . glClear ( GL10 . GL_COLOR_BUFFER_BIT ) ; <nl> - <nl> - final float d = Gdx . graphics . getDeltaTime ( ) ; <nl> - <nl> - tmp . set ( testbar . x , testbar . y ) ; <nl> - testbar . toLocalCoordinates ( tmp ) ; <nl> - <nl> - dot . x = testbar . x + tmp . x ; <nl> - dot . y = testbar . y + tmp . y ; <nl> - <nl> - stage . act ( d ) ; <nl> - stage . draw ( ) ; <nl> - <nl> - <nl> - } <nl> - <nl> - <nl> - } <nl> mmm a / tests / gdx - tests / src / com / badlogic / gdx / tests / utils / GdxTests . java <nl> ppp b / tests / gdx - tests / src / com / badlogic / gdx / tests / utils / GdxTests . java <nl> <nl> SplineTest . class , SimpleTest . class , SimpleAnimationTest . class , SimpleDecalTest . class , SimpleStageCullingTest . class , <nl> SoundTest . class , SpriteCacheTest . class , SpriteCacheOffsetTest . class , SpriteBatchRotationTest . class , <nl> SpriteBatchShaderTest . class , SpriteBatchTest . class , SpritePerformanceTest . class , SpritePerformanteTest2 . class , <nl> - StagePerformanceTest . class , ActorLocalTransformTest . class , StageTest . class , TerrainTest . class , TextureDataTest . class , TextureDownloadTest . class , <nl> + StagePerformanceTest . class , StageTest . class , TerrainTest . class , TextureDataTest . class , TextureDownloadTest . class , <nl> TextureFormatTest . class , TextureAtlasTest . class , TextInputDialogTest . class , TextureRenderTest . class , TiledMapTest . class , <nl> TileTest . class , UITest . class , VBOVATest . class , VertexArrayTest . class , VertexBufferObjectTest . class , <nl> VertexArrayClassTest . class , VertexBufferObjectClassTest . class , VertexBufferObjectShaderTest . class , VibratorTest . class , <nl>","[ removed ] ActorLocalTransformTest , made no sense",c06bde3336b3b5536fc08c2f687fbf90223174bb,Imply necessity,,Conventions and standards,,﻿Summarize Code Object Change,,﻿Object of change,,,
357293,"mmm a / settings . gradle <nl> ppp b / settings . gradle <nl> pluginManagement { <nl> mavenCentral ( ) <nl> gradlePluginPortal ( ) <nl> maven { <nl> - url ' https : / / repo . spring . io / plugins - release ' <nl> + url ' https : / / repo . spring . io / plugins - snapshot ' <nl> } <nl> if ( version . endsWith ( ' BUILD - SNAPSHOT ' ) ) { <nl> maven { url "" https : / / repo . spring . io / snapshot "" } <nl> pluginManagement { <nl> <nl> plugins { <nl> id "" com . gradle . enterprise "" version "" 3 . 1 . 1 "" <nl> - id "" io . spring . gradle - enterprise - conventions "" version "" 0 . 0 . 1 "" <nl> + id "" io . spring . gradle - enterprise - conventions "" version "" 0 . 0 . 2 - SNAPSHOT "" <nl> } <nl> <nl> rootProject . name = "" spring - boot - build "" <nl>",Switch to latest snapshots of the GE conventions plugin,ea5dfdec92a25f68509001dcb89c019ef2400ec1,,Illustrate Requirement,,Runtime or development environment change,Trivial What,,,,,
15559,"mmm a / rxjava - core / src / main / java / rx / Observable . java <nl> ppp b / rxjava - core / src / main / java / rx / Observable . java <nl> <nl> / * * <nl> * Observable with Function to execute when subscribed to . <nl> * < p > <nl> - * NOTE : Use { @ link # create ( Func1 ) } to create an Observable instead of this method unless you <nl> + * NOTE : Use { @ link # create ( OnSubscribeFunc ) } to create an Observable instead of this constructor unless you <nl> * specifically have a need for inheritance . <nl> * <nl> * @ param onSubscribe <nl> public Subscription onSubscribe ( Observer < ? super T > observer ) { <nl> * the source Observable that emits Observables <nl> * @ return an Observable that emits only the items emitted by the most recently published <nl> * Observable <nl> + * @ deprecated Being renamed to { @ link # switchOnNext } <nl> * / <nl> + @ Deprecated <nl> public static < T > Observable < T > switchDo ( Observable < ? extends Observable < ? extends T > > sequenceOfSequences ) { <nl> - / / TODO should this static remain ? I have left it because it is an Observable < Observable > <nl> return create ( OperationSwitch . switchDo ( sequenceOfSequences ) ) ; <nl> } <nl> <nl> / * * <nl> - * On an Observable that emits Observables , creates a single Observable that <nl> + * Given an Observable that emits Observables , creates a single Observable that <nl> * emits the items emitted by the most recently published of those Observables . <nl> * < p > <nl> * < img width = "" 640 "" src = "" https : / / github . com / Netflix / RxJava / wiki / images / rx - operators / switchDo . png "" > <nl> * <nl> + * @ param sequenceOfSequences <nl> + * the source Observable that emits Observables <nl> * @ return an Observable that emits only the items emitted by the most recently published <nl> * Observable <nl> - * @ throws ClassCastException <nl> - * if sequence not of type { @ code Observable < Observable < T > } <nl> * / <nl> - @ SuppressWarnings ( "" unchecked "" ) <nl> - public Observable < T > switchDo ( ) { <nl> - / / TODO can we come up with a better name than this ? It should be ' switch ' but that is reserved . <nl> - / / Perhaps ' switchOnNext ' ? <nl> - return create ( OperationSwitch . switchDo ( ( Observable < ? extends Observable < ? extends T > > ) this ) ) ; <nl> + public static < T > Observable < T > switchOnNext ( Observable < ? extends Observable < ? extends T > > sequenceOfSequences ) { <nl> + return create ( OperationSwitch . switchDo ( sequenceOfSequences ) ) ; <nl> } <nl> + <nl> <nl> / * * <nl> * Accepts an Observable and wraps it in another Observable that ensures that the resulting <nl> mmm a / rxjava - core / src / main / java / rx / observables / BlockingObservable . java <nl> ppp b / rxjava - core / src / main / java / rx / observables / BlockingObservable . java <nl> private Subscription protectivelyWrapAndSubscribe ( Observer < ? super T > observer ) <nl> * < p > <nl> * NOTE : This will block even if the Observable is asynchronous . <nl> * < p > <nl> - * This is similar to { @ link # subscribe ( Observer ) } , but it blocks . Because it blocks it does <nl> + * This is similar to { @ link Observable # subscribe ( Observer ) } , but it blocks . Because it blocks it does <nl> * not need the { @ link Observer # onCompleted ( ) } or { @ link Observer # onError ( Throwable ) } methods . <nl> * < p > <nl> * < img width = "" 640 "" src = "" https : / / github . com / Netflix / RxJava / wiki / images / rx - operators / B . forEach . png "" > <nl>",Merge pull request from benjchristensen / switchOnNext,67d8ac7ad74dac96f75ef1a5ab7f7aaf983540b3,Trivial Why,,﻿Version management,,Trivial What,,,,,
152964,"mmm a / core / src / main / java / hudson / PluginManager . java <nl> ppp b / core / src / main / java / hudson / PluginManager . java <nl> <nl> / * <nl> * The MIT License <nl> - * <nl> + * <nl> * Copyright ( c ) 2004 - 2010 , Sun Microsystems , Inc . , Kohsuke Kawaguchi , Stephen Connolly , Tom Huybrechts <nl> - * <nl> + * <nl> * Permission is hereby granted , free of charge , to any person obtaining a copy <nl> * of this software and associated documentation files ( the "" Software "" ) , to deal <nl> * in the Software without restriction , including without limitation the rights <nl> * to use , copy , modify , merge , publish , distribute , sublicense , and / or sell <nl> * copies of the Software , and to permit persons to whom the Software is <nl> * furnished to do so , subject to the following conditions : <nl> - * <nl> + * <nl> * The above copyright notice and this permission notice shall be included in <nl> * all copies or substantial portions of the Software . <nl> - * <nl> + * <nl> * THE SOFTWARE IS PROVIDED "" AS IS "" , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> * IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL THE <nl> <nl> * as the 2nd part can be repeated for each Hudson instance . <nl> * / <nl> private boolean pluginListed = false ; <nl> - <nl> + <nl> / * * <nl> * Strategy for creating and initializing plugins <nl> * / <nl> public PluginManager ( ServletContext context , File rootDir ) { <nl> this . rootDir = rootDir ; <nl> if ( ! rootDir . exists ( ) ) <nl> rootDir . mkdirs ( ) ; <nl> - <nl> + <nl> strategy = createPluginStrategy ( ) ; <nl> <nl> / / load up rules for the core first <nl> private void addTo ( List < Dependency > dependencies , List < PluginWrapper > r ) { <nl> r . add ( p ) ; <nl> } <nl> } <nl> - <nl> + <nl> @ Override <nl> protected void reactOnCycle ( PluginWrapper q , List < PluginWrapper > cycle ) <nl> throws hudson . util . CyclicGraphDetector . CycleDetectedException { <nl> - <nl> + <nl> LOGGER . log ( Level . SEVERE , "" found cycle in plugin dependencies : ( root = "" + q + "" , deactivating all involved ) "" + Util . join ( cycle , "" - > "" ) ) ; <nl> for ( PluginWrapper pluginWrapper : cycle ) { <nl> pluginWrapper . setHasCycleDependency ( true ) ; <nl> failedPlugins . add ( new FailedPlugin ( pluginWrapper . getShortName ( ) , new CycleDetectedException ( cycle ) ) ) ; <nl> } <nl> } <nl> - <nl> + <nl> } ; <nl> cgd . run ( getPlugins ( ) ) ; <nl> <nl> public void run ( Reactor reactor ) throws Exception { <nl> <nl> / * <nl> * contains operation that considers xxx . hpi and xxx . jpi as equal <nl> - * this is necessary since the bundled plugins are still called * . hpi <nl> + * this is necessary since the bundled plugins are still called * . hpi <nl> * / <nl> private boolean containsHpiJpi ( Collection < String > bundledPlugins , String name ) { <nl> return bundledPlugins . contains ( name . replaceAll ( "" \ \ . hpi "" , "" . jpi "" ) ) <nl> protected boolean filter ( Method e ) { <nl> } catch ( ReactorException e ) { <nl> throw new IOException ( "" Failed to initialize "" + sn + "" plugin "" , e ) ; <nl> } <nl> - <nl> + <nl> / / recalculate dependencies of plugins optionally depending the newly deployed one . <nl> for ( PluginWrapper depender : plugins ) { <nl> if ( depender . equals ( p ) ) { <nl> protected boolean filter ( Method e ) { <nl> } <nl> } <nl> } <nl> - <nl> - LOGGER . info ( "" Plugin "" + sn + "" dynamically installed "" ) ; <nl> + <nl> + LOGGER . info ( "" Plugin "" + p . getShortName ( ) + "" : "" + p . getVersion ( ) + "" dynamically installed "" ) ; <nl> } <nl> <nl> / * * <nl> protected void copyBundledPlugin ( URL src , String fileName ) throws IOException { <nl> / / normalization first , if the old file exists . <nl> rename ( new File ( rootDir , legacyName ) , file ) ; <nl> rename ( new File ( rootDir , legacyName + "" . pinned "" ) , pinFile ) ; <nl> - <nl> + <nl> / / update file if : <nl> / / - no file exists today <nl> / / - bundled version and current version differs ( by timestamp ) , and the file isn ' t pinned . <nl> private void rename ( File legacyFile , File newFile ) throws IOException { <nl> } <nl> <nl> / * * <nl> - * Creates a hudson . PluginStrategy , looking at the corresponding system property . <nl> + * Creates a hudson . PluginStrategy , looking at the corresponding system property . <nl> * / <nl> protected PluginStrategy createPluginStrategy ( ) { <nl> String strategyName = System . getProperty ( PluginStrategy . class . getName ( ) ) ; <nl> protected PluginStrategy createPluginStrategy ( ) { <nl> LOGGER . info ( "" Plugin strategy : "" + strategyName ) ; <nl> return ( PluginStrategy ) strategy ; <nl> } else { <nl> - LOGGER . warning ( "" Plugin strategy ( "" + strategyName + <nl> + LOGGER . warning ( "" Plugin strategy ( "" + strategyName + <nl> "" ) is not an instance of hudson . PluginStrategy "" ) ; <nl> } <nl> } catch ( ClassNotFoundException e ) { <nl> protected PluginStrategy createPluginStrategy ( ) { <nl> } <nl> LOGGER . info ( "" Falling back to ClassicPluginStrategy "" ) ; <nl> } <nl> - <nl> + <nl> / / default and fallback <nl> return new ClassicPluginStrategy ( this ) ; <nl> } <nl> public void doInstall ( StaplerRequest req , StaplerResponse rsp ) throws IOExceptio <nl> } <nl> rsp . sendRedirect ( "" . . / updateCenter / "" ) ; <nl> } <nl> - <nl> + <nl> <nl> / * * <nl> * Bare - minimum configuration mechanism to change the update center . <nl> public HttpResponse doSiteConfigure ( @ QueryParameter String site ) throws IOExcept <nl> sites . remove ( s ) ; <nl> } <nl> sites . add ( new UpdateSite ( UpdateCenter . ID_DEFAULT , site ) ) ; <nl> - <nl> + <nl> return HttpResponses . redirectToContextRoot ( ) ; <nl> } <nl> <nl> public HttpResponse doProxyConfigure ( StaplerRequest req ) throws IOException , Ser <nl> } <nl> return new HttpRedirect ( "" advanced "" ) ; <nl> } <nl> - <nl> + <nl> / * * <nl> * Uploads a plugin . <nl> * / <nl> public HttpResponse doUploadPlugin ( StaplerRequest req ) throws IOException , Servl <nl> if ( "" "" . equals ( fileName ) ) { <nl> return new HttpRedirect ( "" advanced "" ) ; <nl> } <nl> - / / we allow the upload of the new jpi ' s and the legacy hpi ' s <nl> - if ( ! fileName . endsWith ( "" . jpi "" ) & & ! fileName . endsWith ( "" . hpi "" ) ) { <nl> + / / we allow the upload of the new jpi ' s and the legacy hpi ' s <nl> + if ( ! fileName . endsWith ( "" . jpi "" ) & & ! fileName . endsWith ( "" . hpi "" ) ) { <nl> throw new Failure ( hudson . model . Messages . Hudson_NotAPlugin ( fileName ) ) ; <nl> } <nl> <nl> public String toString ( ) { <nl> private static final Logger LOGGER = Logger . getLogger ( PluginManager . class . getName ( ) ) ; <nl> <nl> public static boolean FAST_LOOKUP = ! Boolean . getBoolean ( PluginManager . class . getName ( ) + "" . noFastLookup "" ) ; <nl> - <nl> + <nl> public static final Permission UPLOAD_PLUGINS = new Permission ( Jenkins . PERMISSIONS , "" UploadPlugins "" , Messages . _PluginManager_UploadPluginsPermission_Description ( ) , Jenkins . ADMINISTER , PermissionScope . JENKINS ) ; <nl> public static final Permission CONFIGURE_UPDATECENTER = new Permission ( Jenkins . PERMISSIONS , "" ConfigureUpdateCenter "" , Messages . _PluginManager_ConfigureUpdateCenterPermission_Description ( ) , Jenkins . ADMINISTER , PermissionScope . JENKINS ) ; <nl> - <nl> + <nl> / * * <nl> * Remembers why a plugin failed to deploy . <nl> * / <nl> public String getExceptionString ( ) { <nl> / * package * / static final class PluginInstanceStore { <nl> final Map < PluginWrapper , Plugin > store = new Hashtable < PluginWrapper , Plugin > ( ) ; <nl> } <nl> - <nl> + <nl> / * * <nl> * { @ link AdministrativeMonitor } that checks if there are any plugins with cycle dependencies . <nl> * / <nl> @ Extension <nl> public static final class PluginCycleDependenciesMonitor extends AdministrativeMonitor { <nl> - <nl> + <nl> private transient volatile boolean isActive = false ; <nl> - <nl> - private transient volatile List < String > pluginsWithCycle ; <nl> - <nl> + <nl> + private transient volatile List < String > pluginsWithCycle ; <nl> + <nl> public boolean isA",report the version number as well,f7389c5b6d587e36e63daa21580edb464a576a6b,Missing Why,,,,Missing What,,,,,
5116,"mmm a / lib / java / com / google / android / material / slider / Slider . java <nl> ppp b / lib / java / com / google / android / material / slider / Slider . java <nl> public int getHaloRadius ( ) { <nl> * / <nl> public void setHaloRadius ( @ IntRange ( from = 0 ) @ Dimension int radius ) { <nl> haloRadius = radius ; <nl> - if ( VERSION . SDK_INT > = VERSION_CODES . LOLLIPOP ) { <nl> + if ( ! shouldDrawCompatHalo ( ) ) { <nl> Drawable background = getBackground ( ) ; <nl> if ( background instanceof RippleDrawable ) { <nl> DrawableUtils . setRippleDrawableRadius ( ( RippleDrawable ) background , haloRadius ) ; <nl> } <nl> + } else { <nl> + postInvalidate ( ) ; <nl> } <nl> - postInvalidate ( ) ; <nl> } <nl> <nl> / * * <nl> public void setHaloColor ( @ NonNull ColorStateList haloColor ) { <nl> } <nl> <nl> this . haloColor = haloColor ; <nl> - if ( VERSION . SDK_INT > = VERSION_CODES . LOLLIPOP ) { <nl> + if ( ! shouldDrawCompatHalo ( ) ) { <nl> Drawable background = getBackground ( ) ; <nl> if ( background instanceof RippleDrawable ) { <nl> ( ( RippleDrawable ) background ) . setColor ( haloColor ) ; <nl> } <nl> + } else { <nl> + haloPaint . setColor ( getColorForState ( haloColor ) ) ; <nl> + haloPaint . setAlpha ( HALO_ALPHA ) ; <nl> + invalidate ( ) ; <nl> } <nl> - haloPaint . setColor ( getColorForState ( haloColor ) ) ; <nl> - haloPaint . setAlpha ( HALO_ALPHA ) ; <nl> - invalidate ( ) ; <nl> } <nl> <nl> / * * <nl> private void setTicksCoordinates ( float [ ] coordinates ) { <nl> } <nl> <nl> private void updateHaloHotSpot ( ) { <nl> - / / Set the hotspot as the halo above lollipop . <nl> - if ( VERSION . SDK_INT > = VERSION_CODES . LOLLIPOP & & getMeasuredWidth ( ) > 0 ) { <nl> + / / Set the hotspot as the halo if RippleDrawable is being used . <nl> + if ( ! shouldDrawCompatHalo ( ) & & getMeasuredWidth ( ) > 0 ) { <nl> final Drawable background = getBackground ( ) ; <nl> if ( background instanceof RippleDrawable ) { <nl> int x = ( int ) ( thumbPosition * trackWidth + trackSidePadding ) ; <nl> private void drawThumb ( @ NonNull Canvas canvas , int width , int top ) { <nl> } <nl> <nl> private void maybeDrawHalo ( @ NonNull Canvas canvas , int width , int top ) { <nl> - / / Only draw the halo for devices which don ' t support the ripple . <nl> - if ( forceDrawCompatHalo | | VERSION . SDK_INT < VERSION_CODES . LOLLIPOP ) { <nl> + / / Only draw the halo for devices that aren ' t using the ripple . <nl> + if ( shouldDrawCompatHalo ( ) ) { <nl> int centerX = ( int ) ( trackSidePadding + thumbPosition * width ) ; <nl> - if ( VERSION . SDK_INT < VERSION_CODES . LOLLIPOP ) { <nl> + if ( VERSION . SDK_INT < VERSION_CODES . P ) { <nl> / / In this case we can clip the rect to allow drawing outside the bounds . <nl> canvas . clipRect ( <nl> centerX - haloRadius , <nl> private void maybeDrawHalo ( @ NonNull Canvas canvas , int width , int top ) { <nl> } <nl> } <nl> <nl> + private boolean shouldDrawCompatHalo ( ) { <nl> + return forceDrawCompatHalo <nl> + | | VERSION . SDK_INT < VERSION_CODES . LOLLIPOP <nl> + | | ! ( getBackground ( ) instanceof RippleDrawable ) ; <nl> + } <nl> + <nl> @ Override <nl> public boolean onTouchEvent ( @ NonNull MotionEvent event ) { <nl> if ( ! isEnabled ( ) ) { <nl>",Fix logic for when to draw Slider ' s compat halo,5f631d48f059ad5d15fedf7bdc26fa06d4dd45cc,﻿Describe Objective,,﻿To fix defects,,Illustrate Function,,,,,
157067,"mmm a / core / src / main / resources / hudson / scm / SubversionSCM / config . jelly <nl> ppp b / core / src / main / resources / hudson / scm / SubversionSCM / config . jelly <nl> <nl> < j : jelly xmlns : j = "" jelly : core "" xmlns : st = "" jelly : stapler "" xmlns : d = "" jelly : define "" xmlns : l = "" / lib / layout "" xmlns : t = "" / lib / hudson "" xmlns : f = "" / lib / form "" > <nl> - < f : entry title = "" Modules "" <nl> - description = "" URL of SVN module . Multiple URLs can be specified . "" > <nl> + < f : entry title = "" Modules "" > <nl> < f : repeatable var = "" loc "" items = "" $ { scm . locations } "" noAddButton = "" true "" minimum = "" 1 "" > <nl> < table width = "" 100 % "" > <nl> - < f : entry title = "" Repository URL "" > <nl> + < f : entry title = "" Repository URL "" help = "" / help / subversion / url . html "" > <nl> < f : textbox name = "" svn . location_remote "" value = "" $ { loc . remote } "" <nl> checkUrl = "" ' $ { rootURL } / scm / SubversionSCM / svnRemoteLocationCheck ? value = ' + escape ( this . value ) "" / > <nl> < / f : entry > <nl> - < f : entry title = "" Local module directory ( optional ) "" > <nl> + < f : entry title = "" Local module directory ( optional ) "" help = "" / help / subversion / local . html "" > <nl> < f : textbox name = "" svn . location_local "" value = "" $ { loc . local } "" <nl> checkUrl = "" ' $ { rootURL } / scm / SubversionSCM / svnLocalLocationCheck ? value = ' + escape ( this . value ) "" / > <nl> < / f : entry > <nl> new file mode 100644 <nl> index 00000000000 . . 165902dfb5d <nl> mmm / dev / null <nl> ppp b / war / resources / help / subversion / local . html <nl> <nl> + < div > <nl> + Specify a local directory ( relative to < a href = "" . / ws "" > the workspace root < / a > ) <nl> + where this module is checked out . If left empty , the last path name of the URL <nl> + is used as the default , just like < tt > svn < / tt > CLI . <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . 21196df78b2 <nl> mmm / dev / null <nl> ppp b / war / resources / help / subversion / url . html <nl> <nl> + < div > <nl> + Specify the subversion repository URL to check out , <nl> + such as "" http : / / svn . apache . org / repos / asf / ant / "" . <nl> + < / div > <nl> \ No newline at end of file <nl>",added help text .,3208c59ea2b04ad97dd1e144367c0d137da81824,﻿Trivial Why,,﻿Text file changes,,Trivial What,,,,help text,
351366,"mmm a / codec - http / src / main / java / io / netty / handler / codec / http / CombinedHttpHeaders . java <nl> ppp b / codec - http / src / main / java / io / netty / handler / codec / http / CombinedHttpHeaders . java <nl> <nl> package io . netty . handler . codec . http ; <nl> <nl> import io . netty . handler . codec . DefaultHeaders ; <nl> + import io . netty . handler . codec . Headers ; <nl> import io . netty . handler . codec . ValueConverter ; <nl> import io . netty . util . HashingStrategy ; <nl> - import io . netty . handler . codec . Headers ; <nl> import io . netty . util . internal . StringUtil ; <nl> <nl> import java . util . Collection ; <nl> public CombinedHttpHeaders ( boolean validate ) { <nl> super ( new CombinedHttpHeadersImpl ( CASE_INSENSITIVE_HASHER , valueConverter ( validate ) , nameValidator ( validate ) ) ) ; <nl> } <nl> <nl> + @ Override <nl> + public boolean containsValue ( CharSequence name , CharSequence value , boolean ignoreCase ) { <nl> + return super . containsValue ( name , StringUtil . trimOws ( value ) , ignoreCase ) ; <nl> + } <nl> + <nl> private static final class CombinedHttpHeadersImpl <nl> extends DefaultHeaders < CharSequence , CharSequence , CombinedHttpHeadersImpl > { <nl> / * * <nl> public CombinedHttpHeaders ( boolean validate ) { <nl> objectEscaper = new CsvValueEscaper < Object > ( ) { <nl> @ Override <nl> public CharSequence escape ( Object value ) { <nl> - return StringUtil . escapeCsv ( valueConverter ( ) . convertObject ( value ) ) ; <nl> + return StringUtil . escapeCsv ( valueConverter ( ) . convertObject ( value ) , true ) ; <nl> } <nl> } ; <nl> } <nl> public CharSequence escape ( Object value ) { <nl> charSequenceEscaper = new CsvValueEscaper < CharSequence > ( ) { <nl> @ Override <nl> public CharSequence escape ( CharSequence value ) { <nl> - return StringUtil . escapeCsv ( value ) ; <nl> + return StringUtil . escapeCsv ( value , true ) ; <nl> } <nl> } ; <nl> } <nl> public CombinedHttpHeadersImpl setAll ( Headers < ? extends CharSequence , ? extends <nl> <nl> @ Override <nl> public CombinedHttpHeadersImpl add ( CharSequence name , CharSequence value ) { <nl> - return addEscapedValue ( name , StringUtil . escapeCsv ( value ) ) ; <nl> + return addEscapedValue ( name , charSequenceEscaper ( ) . escape ( value ) ) ; <nl> } <nl> <nl> @ Override <nl> public CombinedHttpHeadersImpl add ( CharSequence name , Iterable < ? extends CharSeq <nl> return addEscapedValue ( name , commaSeparate ( charSequenceEscaper ( ) , values ) ) ; <nl> } <nl> <nl> + @ Override <nl> + public CombinedHttpHeadersImpl addObject ( CharSequence name , Object value ) { <nl> + return addEscapedValue ( name , commaSeparate ( objectEscaper ( ) , value ) ) ; <nl> + } <nl> + <nl> @ Override <nl> public CombinedHttpHeadersImpl addObject ( CharSequence name , Iterable < ? > values ) { <nl> return addEscapedValue ( name , commaSeparate ( objectEscaper ( ) , values ) ) ; <nl> mmm a / codec - http / src / main / java / io / netty / handler / codec / http / HttpHeaders . java <nl> ppp b / codec - http / src / main / java / io / netty / handler / codec / http / HttpHeaders . java <nl> public boolean contains ( String name , String value , boolean ignoreCase ) { <nl> <nl> / * * <nl> * Returns { @ code true } if a header with the { @ code name } and { @ code value } exists , { @ code false } otherwise . <nl> - * This also handles multiple values that are seperated with a { @ code , } . <nl> + * This also handles multiple values that are separated with a { @ code , } . <nl> * < p > <nl> * If { @ code ignoreCase } is { @ code true } then a case insensitive compare is done on the value . <nl> * @ param name the name of the header to find <nl> mmm a / codec - http / src / test / java / io / netty / handler / codec / http / CombinedHttpHeadersTest . java <nl> ppp b / codec - http / src / test / java / io / netty / handler / codec / http / CombinedHttpHeadersTest . java <nl> <nl> package io . netty . handler . codec . http ; <nl> <nl> import io . netty . handler . codec . http . HttpHeadersTestUtils . HeaderValue ; <nl> + import io . netty . util . internal . StringUtil ; <nl> import org . junit . Test ; <nl> <nl> import java . util . Arrays ; <nl> <nl> <nl> import static io . netty . util . AsciiString . contentEquals ; <nl> import static org . junit . Assert . assertEquals ; <nl> + import static org . junit . Assert . assertFalse ; <nl> + import static org . junit . Assert . assertThat ; <nl> import static org . junit . Assert . assertTrue ; <nl> <nl> public class CombinedHttpHeadersTest { <nl> public void testGetAll ( ) { <nl> headers . set ( HEADER_NAME , "" \ "" a , b , c \ "" "" ) ; <nl> assertEquals ( Arrays . asList ( "" a , b , c "" ) , headers . getAll ( HEADER_NAME ) ) ; <nl> } <nl> + <nl> + @ Test <nl> + public void owsTrimming ( ) { <nl> + final CombinedHttpHeaders headers = newCombinedHttpHeaders ( ) ; <nl> + headers . set ( HEADER_NAME , Arrays . asList ( "" \ ta "" , "" "" , "" b "" , "" \ t \ t "" ) ) ; <nl> + headers . add ( HEADER_NAME , "" c , d \ t "" ) ; <nl> + <nl> + assertEquals ( Arrays . asList ( "" a "" , "" "" , "" b "" , "" "" , "" c , d "" ) , headers . getAll ( HEADER_NAME ) ) ; <nl> + assertEquals ( "" a , , b , , \ "" c , d \ "" "" , headers . get ( HEADER_NAME ) ) ; <nl> + <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" a "" , true ) ) ; <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" a "" , true ) ) ; <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" a "" , true ) ) ; <nl> + assertFalse ( headers . containsValue ( HEADER_NAME , "" a , b "" , true ) ) ; <nl> + <nl> + assertFalse ( headers . containsValue ( HEADER_NAME , "" c , d "" , true ) ) ; <nl> + assertFalse ( headers . containsValue ( HEADER_NAME , "" c , d "" , true ) ) ; <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" c "" , true ) ) ; <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" d "" , true ) ) ; <nl> + <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" \ t "" , true ) ) ; <nl> + assertTrue ( headers . containsValue ( HEADER_NAME , "" "" , true ) ) ; <nl> + <nl> + assertFalse ( headers . containsValue ( HEADER_NAME , "" e "" , true ) ) ; <nl> + <nl> + HttpHeaders copiedHeaders = newCombinedHttpHeaders ( ) . add ( headers ) ; <nl> + assertEquals ( Arrays . asList ( "" a "" , "" "" , "" b "" , "" "" , "" c , d "" ) , copiedHeaders . getAll ( HEADER_NAME ) ) ; <nl> + } <nl> } <nl> mmm a / common / src / main / java / io / netty / util / internal / StringUtil . java <nl> ppp b / common / src / main / java / io / netty / util / internal / StringUtil . java <nl> <nl> public static final char LINE_FEED = ' \ n ' ; <nl> public static final char CARRIAGE_RETURN = ' \ r ' ; <nl> public static final char TAB = ' \ t ' ; <nl> + public static final char SPACE = 0x20 ; <nl> <nl> private static final String [ ] BYTE2HEX_PAD = new String [ 256 ] ; <nl> private static final String [ ] BYTE2HEX_NOPAD = new String [ 256 ] ; <nl> <nl> static { <nl> / / Generate the lookup table that converts a byte into a 2 - digit hexadecimal integer . <nl> int i ; <nl> - for ( i = 0 ; i < 10 ; i + + ) { <nl> + for ( i = 0 ; i < 10 ; i + + ) { <nl> BYTE2HEX_PAD [ i ] = "" 0 "" + i ; <nl> BYTE2HEX_NOPAD [ i ] = String . valueOf ( i ) ; <nl> } <nl> - for ( ; i < 16 ; i + + ) { <nl> + for ( ; i < 16 ; i + + ) { <nl> char c = ( char ) ( ' a ' + i - 10 ) ; <nl> BYTE2HEX_PAD [ i ] = "" 0 "" + c ; <nl> BYTE2HEX_NOPAD [ i ] = String . valueOf ( c ) ; <nl> } <nl> - for ( ; i < BYTE2HEX_PAD . length ; i + + ) { <nl> + for ( ; i < BYTE2HEX_PAD . length ; i + + ) { <nl> String str = Integer . toHexString ( i ) ; <nl> BYTE2HEX_PAD [ i ] = str ; <nl> BYTE2HEX_NOPAD [ i ] = str ; <nl> public static String substringAfter ( String value , char delim ) { <nl> / * * <nl> * Checks if two strings have the same suffix of specified length <nl> * <nl> - * @ param s string <nl> - * @ param p string <nl> + * @ param s string <nl> + * @ param p string <nl> * @ param len length of the common suffix <nl> * @ return true if both s and p are not null and both have the same suffix . Otherwise - false <nl> * / <nl> public static String toHexStringPadded ( byte [ ] src , int offset , int ",Trim optional white space in CombinedHttpHeaders values,9c1a1916962354f1e69fe43107219c25a86e6cef,,Trivial Why,,Code refactoring,﻿Summarize Code Object Change,,﻿Object of change,,,
34808,"mmm a / compiler / src / org . graalvm . compiler . hotspot / src / org / graalvm / compiler / hotspot / meta / DefaultHotSpotLoweringProvider . java <nl> ppp b / compiler / src / org . graalvm . compiler . hotspot / src / org / graalvm / compiler / hotspot / meta / DefaultHotSpotLoweringProvider . java <nl> <nl> import org . graalvm . compiler . hotspot . replacements . ObjectSnippets ; <nl> import org . graalvm . compiler . hotspot . replacements . StringToBytesSnippets ; <nl> import org . graalvm . compiler . hotspot . replacements . UnsafeCopyMemoryNode ; <nl> - import org . graalvm . compiler . hotspot . replacements . UnsafeLoadSnippets ; <nl> import org . graalvm . compiler . hotspot . replacements . UnsafeSnippets ; <nl> import org . graalvm . compiler . hotspot . replacements . aot . ResolveConstantSnippets ; <nl> import org . graalvm . compiler . hotspot . replacements . arraycopy . HotSpotArraycopySnippets ; <nl> <nl> protected HotSpotSerialWriteBarrierSnippets . Templates serialWriteBarrierSnippets ; <nl> protected HotSpotG1WriteBarrierSnippets . Templates g1WriteBarrierSnippets ; <nl> protected LoadExceptionObjectSnippets . Templates exceptionObjectSnippets ; <nl> - protected UnsafeLoadSnippets . Templates unsafeLoadSnippets ; <nl> protected AssertionSnippets . Templates assertionSnippets ; <nl> protected ArrayCopySnippets . Templates arraycopySnippets ; <nl> protected StringToBytesSnippets . Templates stringToBytesSnippets ; <nl> public void initialize ( OptionValues options , Iterable < DebugHandlersFactory > fact <nl> g1WriteBarrierSnippets = new HotSpotG1WriteBarrierSnippets . Templates ( options , factories , runtime , providers , target , config ) ; <nl> serialWriteBarrierSnippets = new HotSpotSerialWriteBarrierSnippets . Templates ( options , factories , runtime , providers , target , config ) ; <nl> exceptionObjectSnippets = new LoadExceptionObjectSnippets . Templates ( options , factories , providers , target ) ; <nl> - unsafeLoadSnippets = new UnsafeLoadSnippets . Templates ( options , factories , providers , target ) ; <nl> assertionSnippets = new AssertionSnippets . Templates ( options , factories , providers , target ) ; <nl> arraycopySnippets = new ArrayCopySnippets . Templates ( new HotSpotArraycopySnippets ( ) , options , factories , runtime , providers , providers . getSnippetReflection ( ) , target ) ; <nl> stringToBytesSnippets = new StringToBytesSnippets . Templates ( options , factories , providers , target ) ; <nl> deleted file mode 100644 <nl> index 1f788ccdf903 . . 000000000000 <nl> mmm a / compiler / src / org . graalvm . compiler . hotspot / src / org / graalvm / compiler / hotspot / replacements / UnsafeLoadSnippets . java <nl> ppp / dev / null <nl> <nl> - / * <nl> - * Copyright ( c ) 2013 , 2019 , Oracle and / or its affiliates . All rights reserved . <nl> - * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER . <nl> - * <nl> - * This code is free software ; you can redistribute it and / or modify it <nl> - * under the terms of the GNU General Public License version 2 only , as <nl> - * published by the Free Software Foundation . Oracle designates this <nl> - * particular file as subject to the "" Classpath "" exception as provided <nl> - * by Oracle in the LICENSE file that accompanied this code . <nl> - * <nl> - * This code is distributed in the hope that it will be useful , but WITHOUT <nl> - * ANY WARRANTY ; without even the implied warranty of MERCHANTABILITY or <nl> - * FITNESS FOR A PARTICULAR PURPOSE . See the GNU General Public License <nl> - * version 2 for more details ( a copy is included in the LICENSE file that <nl> - * accompanied this code ) . <nl> - * <nl> - * You should have received a copy of the GNU General Public License version <nl> - * 2 along with this work ; if not , write to the Free Software Foundation , <nl> - * Inc . , 51 Franklin St , Fifth Floor , Boston , MA 02110 - 1301 USA . <nl> - * <nl> - * Please contact Oracle , 500 Oracle Parkway , Redwood Shores , CA 94065 USA <nl> - * or visit www . oracle . com if you need additional information or have any <nl> - * questions . <nl> - * / <nl> - package org . graalvm . compiler . hotspot . replacements ; <nl> - <nl> - import static org . graalvm . compiler . hotspot . GraalHotSpotVMConfigBase . INJECTED_METAACCESS ; <nl> - import static org . graalvm . compiler . hotspot . replacements . HotSpotReplacementsUtil . referentOffset ; <nl> - import static org . graalvm . compiler . replacements . SnippetTemplate . DEFAULT_REPLACER ; <nl> - <nl> - import org . graalvm . compiler . api . replacements . Snippet ; <nl> - import org . graalvm . compiler . debug . DebugHandlersFactory ; <nl> - import org . graalvm . compiler . hotspot . meta . HotSpotProviders ; <nl> - import org . graalvm . compiler . nodes . extended . FixedValueAnchorNode ; <nl> - import org . graalvm . compiler . nodes . extended . RawLoadNode ; <nl> - import org . graalvm . compiler . nodes . memory . OnHeapMemoryAccess . BarrierType ; <nl> - import org . graalvm . compiler . nodes . spi . LoweringTool ; <nl> - import org . graalvm . compiler . options . OptionValues ; <nl> - import org . graalvm . compiler . replacements . SnippetTemplate . AbstractTemplates ; <nl> - import org . graalvm . compiler . replacements . SnippetTemplate . Arguments ; <nl> - import org . graalvm . compiler . replacements . SnippetTemplate . SnippetInfo ; <nl> - import org . graalvm . compiler . replacements . Snippets ; <nl> - import org . graalvm . compiler . word . Word ; <nl> - <nl> - import jdk . vm . ci . code . TargetDescription ; <nl> - <nl> - public class UnsafeLoadSnippets implements Snippets { <nl> - <nl> - @ Snippet <nl> - public static Object lowerUnsafeLoad ( Object object , long offset ) { <nl> - Object fixedObject = FixedValueAnchorNode . getObject ( object ) ; <nl> - if ( object instanceof java . lang . ref . Reference & & referentOffset ( INJECTED_METAACCESS ) = = offset ) { <nl> - return Word . objectToTrackedPointer ( fixedObject ) . readObject ( ( int ) offset , BarrierType . WEAK_FIELD ) ; <nl> - } else { <nl> - return Word . objectToTrackedPointer ( fixedObject ) . readObject ( ( int ) offset , BarrierType . NONE ) ; <nl> - } <nl> - } <nl> - <nl> - public static class Templates extends AbstractTemplates { <nl> - <nl> - private final SnippetInfo unsafeLoad = snippet ( UnsafeLoadSnippets . class , "" lowerUnsafeLoad "" ) ; <nl> - <nl> - public Templates ( OptionValues options , Iterable < DebugHandlersFactory > factories , HotSpotProviders providers , TargetDescription target ) { <nl> - super ( options , factories , providers , providers . getSnippetReflection ( ) , target ) ; <nl> - } <nl> - <nl> - public void lower ( RawLoadNode load , LoweringTool tool ) { <nl> - Arguments args = new Arguments ( unsafeLoad , load . graph ( ) . getGuardsStage ( ) , tool . getLoweringStage ( ) ) ; <nl> - args . add ( "" object "" , load . object ( ) ) ; <nl> - args . add ( "" offset "" , load . offset ( ) ) ; <nl> - template ( load , args ) . instantiate ( providers . getMetaAccess ( ) , load , DEFAULT_REPLACER , args ) ; <nl> - } <nl> - } <nl> - } <nl>",Removed unused HotSpot - specific UnsafeLoadSnippets .,ea3baef229242ba4c2b8210a84e342763a455802,Trivial Why,,Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
184340,"mmm a / sharding - core / src / main / java / io / shardingsphere / core / event / executor / DMLExecutionEvent . java <nl> ppp b / sharding - core / src / main / java / io / shardingsphere / core / event / executor / DMLExecutionEvent . java <nl> <nl> * / <nl> public final class DMLExecutionEvent extends SQLExecutionEvent { <nl> <nl> - public DMLExecutionEvent ( final RouteUnit routeUnit , final List < Object > parameters , final String url ) { <nl> - super ( routeUnit , parameters , url ) ; <nl> + public DMLExecutionEvent ( final RouteUnit routeUnit , final List < Object > parameters ) { <nl> + super ( routeUnit , parameters ) ; <nl> } <nl> } <nl>",", for comment : refine SQL execution event mechanism",84e06ff9959a67065b8936ae44e93f884ab4523d,﻿Describe Objective,,﻿To make improvements,,Illustrate Function,,,,,
298279,"mmm a / war / resources / help / tasks / junit / report_pt_BR . html <nl> ppp b / war / resources / help / tasks / junit / report_pt_BR . html <nl> <nl> < div > <nl> - O Hudson intende o formato XML de relatório de teste do JUnit ( que também é usado pelo TestNG ) . <nl> + O Hudson entende o formato XML de relatório de teste do JUnit ( que também é usado pelo TestNG ) . <nl> Quando esta opção é configurada , o Hudson pode fornecer informações úteis sobre os resultados dos testes , <nl> tal como tendências de resultado de teste histórico , uma interface web para visualizar relatórios de teste , rastreamento de falhas , <nl> e assim por diante . <nl> new file mode 100644 <nl> index 00000000000 . . 9e3e9bd9bc3 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / admin - address_pt_BR . html <nl> <nl> + < div > <nl> + E - mails de notificação do Hudson para os proprietários do projeto serão enviados <nl> + com este endereço no remetente . Pode ser apenas <nl> + "" foo @ acme . org "" ou poderia ser algo como "" Servidor Hudson & lt ; foo @ acme . org > "" <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . f9a5964ef9b <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / default - suffix_pt_BR . html <nl> <nl> + < div > <nl> + Se os endereços de e - mails de usuários puderem ser computados automaticamente simplesmente adicionando um sufixo , <nl> + então especifique este sufixo . Caso contrário deixe - o em branco . Note que os usuários podem sempre sobrescrever <nl> + o endereço de e - mail seletivamente . Por exemplo , se este campo contiver < tt > @ acme . org < / tt > , <nl> + então o usuário < tt > foo < / tt > por padrão terá o endereço de e - mail < tt > foo @ acme . org < / tt > <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . a1d2a8bf9a4 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / sendToindividuals_pt_BR . html <nl> <nl> + < div > <nl> + Se esta opção estiver marcada , o e - mail de notificação será enviado para os indivíduos que <nl> + comitaram mudanças para a costrução que falhou ( assumindo que estas mudanças causaram a falha na construção ) . <nl> + < p > <nl> + Se os endereços de e - mail também forem especificados na lista de destinatários , então ambos os indivíduos <nl> + bem como os endereços especificados na lista receberão e - mails . Se a lista de destinatários <nl> + estiver vazia , então apens os indivíduos receberão e - mails . <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . ca8a7de1972 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / smtp - server_pt_BR . html <nl> <nl> + < div > <nl> + Nome do servidor de SMTP . Deixe em branco para usar o servidor padrão <nl> + ( que normalmente está executando em localhost ) . <nl> + <nl> + < p > <nl> + O Hudson usa o JavaMail para envier e - mails , e o JavaMail permite <nl> + que configurações adicionais sejam passadas como propriedades do sistema para o contêiner . <nl> + Veja < a href = "" http : / / java . sun . com / products / javamail / javadocs / overview - summary . html # overview_description "" > <nl> + esta documentação < / a > para possíveis valores e efeitos . <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . 3c82e1d45f6 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / smtp - use - ssl_pt_BR . html <nl> <nl> + < div > <nl> + Se para usar ou não SSL para conectar - se ao servidor de SMTP . O padrão aponta para porta 465 . <nl> + <nl> + < p > <nl> + Outras configurações avançadas podem ser feitas configurando as propriedades dos sistema . <nl> + Veja < a href = "" http : / / java . sun . com / products / javamail / javadocs / overview - summary . html # overview_description "" > <nl> + esta documentação < / a > para possíveis valores e efeitos . <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . bc8fd6a3d67 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / smtpAuth_pt_BR . html <nl> <nl> + < div > <nl> + Usa autenticação SMTP quando enviar e - mails . Se seu ambiente requer <nl> + o uso de autenticação SMTP , especifique o usuário e senha aqui . <nl> + < / div > <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . 2d64e516274 <nl> mmm / dev / null <nl> ppp b / war / resources / help / tasks / mailer / url_pt_BR . html <nl> <nl> + < div > <nl> + Opcionalmente especifique o endereço HTTP da instalação do Hudson , tal <nl> + como < tt > http : / / seuhost . seudominio / hudson / < / tt > . Este valor é usado para <nl> + por links nos e - mails gerados pelo Hudson . <nl> + <nl> + < p > <nl> + Isto é necessário porque o Hudson não pode confiavelmente detectar tal URL <nl> + de dentre dele mesmo . <nl> + < / div > <nl> \ No newline at end of file <nl>",Translated to portuguese - brazil,f028d039a3c940e68e3a780863f4fff25385b5e5,Trivial Why,,﻿Text file changes,,Illustrate Function,,,,,
293122,"mmm a / NOTICE . txt <nl> ppp b / NOTICE . txt <nl> Base64 Encoder and Decoder , which can be obtained at : <nl> * HOMEPAGE : <nl> * http : / / iharder . sourceforge . net / current / java / base64 / <nl> <nl> - This product contains a modified version of ' JZlib ' , a re - implementation of <nl> - zlib in pure Java , which can be obtained at : <nl> - <nl> - * LICENSE : <nl> - * license / LICENSE . jzlib . txt ( BSD Style License ) <nl> - * HOMEPAGE : <nl> - * http : / / www . jcraft . com / jzlib / <nl> - <nl> This product contains a modified portion of ' Webbit ' , an event based <nl> WebSocket and HTTP server , which can be obtained at : <nl> <nl> mmm a / codec / src / test / java / io / netty / handler / codec / compression / JZlibTest . java <nl> ppp b / codec / src / test / java / io / netty / handler / codec / compression / JZlibTest . java <nl> <nl> <nl> public class JZlibTest { <nl> <nl> - @ After <nl> - public void resetSnappy ( ) { <nl> - } <nl> - <nl> @ Test <nl> public void testZLIB ( ) throws Exception { <nl> ByteBuf data = Unpooled . wrappedBuffer ( "" test "" . getBytes ( ) ) ; <nl> public void testGZIP ( ) throws Exception { <nl> assertEquals ( data , chDecoder . readInbound ( ) ) ; <nl> } <nl> <nl> - <nl> - / / This case will be failed with netty ' s jzlib . <nl> - { <nl> + { <nl> EmbeddedByteChannel chDecoder = <nl> new EmbeddedByteChannel ( new JZlibDecoder ( ZlibWrapper . ZLIB_OR_NONE ) ) ; <nl> <nl> deleted file mode 100644 <nl> index 29ad562af0a . . 00000000000 <nl> mmm a / license / LICENSE . jzlib . txt <nl> ppp / dev / null <nl> <nl> - Copyright ( c ) 2000 , 2001 , 2002 , 2003 , 2004 ymnk , JCraft , Inc . All rights reserved . <nl> - <nl> - Redistribution and use in source and binary forms , with or without <nl> - modification , are permitted provided that the following conditions are met : <nl> - <nl> - 1 . Redistributions of source code must retain the above copyright notice , <nl> - this list of conditions and the following disclaimer . <nl> - <nl> - 2 . Redistributions in binary form must reproduce the above copyright <nl> - notice , this list of conditions and the following disclaimer in <nl> - the documentation and / or other materials provided with the distribution . <nl> - <nl> - 3 . The names of the authors may not be used to endorse or promote products <nl> - derived from this software without specific prior written permission . <nl> - <nl> - THIS SOFTWARE IS PROVIDED ` ` AS IS ' ' AND ANY EXPRESSED OR IMPLIED WARRANTIES , <nl> - INCLUDING , BUT NOT LIMITED TO , THE IMPLIED WARRANTIES OF MERCHANTABILITY AND <nl> - FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED . IN NO EVENT SHALL JCRAFT , <nl> - INC . OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT , INDIRECT , <nl> - INCIDENTAL , SPECIAL , EXEMPLARY , OR CONSEQUENTIAL DAMAGES ( INCLUDING , BUT NOT <nl> - LIMITED TO , PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES ; LOSS OF USE , DATA , <nl> - OR PROFITS ; OR BUSINESS INTERRUPTION ) HOWEVER CAUSED AND ON ANY THEORY OF <nl> - LIABILITY , WHETHER IN CONTRACT , STRICT LIABILITY , OR TORT ( INCLUDING <nl> - NEGLIGENCE OR OTHERWISE ) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE , <nl> - EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE . <nl> - <nl>",[ ] Cleanup,c93f5afa99c74e1a03cb19ccd198887f6e4003e2,Missing Why,,,,Missing What,,,,,
252745,"mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / CoGroupFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / CoGroupFunction . java <nl> <nl> import eu . stratosphere . types . Value ; <nl> import eu . stratosphere . util . Collector ; <nl> <nl> - / * * <nl> - * The CoGroupFunction must be extended to provide a co - grouper implementation which is called by a CoGroup PACT . <nl> - * By definition , a CoGroup PACT has two input sets of records . It calls the co - grouper implementation once for each <nl> - * distinct key in its inputs . Together with the key , two iterators over the records containing that key from both <nl> - * inputs are handed to the < code > coGroup ( ) < / code > method . <nl> - * For details on the CoGroup PACT read the documentation of the PACT programming model . <nl> - * < p > <nl> - * The CoGroupFunction extension must be parameterized with the type of the key of its input . <nl> - * < p > <nl> - * For a coGroup implementation , the < code > coGroup ( ) < / code > method must be implemented . <nl> - * / <nl> + <nl> public abstract class CoGroupFunction extends AbstractArrayModelFunction implements GenericCoGrouper < Value [ ] , Value [ ] , Value [ ] > { <nl> <nl> / * * <nl> mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / CrossFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / CrossFunction . java <nl> <nl> import eu . stratosphere . types . Value ; <nl> import eu . stratosphere . util . Collector ; <nl> <nl> - / * * <nl> - * The CrossFunction must be extended to provide a cross implementation which is called by a Cross PACT . <nl> - * By definition , a Cross PACT has two input sets of records . It calls the cross implementation for each <nl> - * element of the Cartesian product of both input sets . For details on the Cross PACT read the <nl> - * documentation of the PACT programming model . <nl> - * < p > <nl> - * For a cross implementation , the < code > cross ( ) < / code > method must be implemented . <nl> - * / <nl> public abstract class CrossFunction extends AbstractArrayModelFunction implements GenericCrosser < Value [ ] , Value [ ] , Value [ ] > { <nl> <nl> / * * <nl> mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / JoinFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / JoinFunction . java <nl> <nl> import eu . stratosphere . types . Value ; <nl> import eu . stratosphere . util . Collector ; <nl> <nl> - / * * <nl> - * The JoinFunction must be extended to provide a matcher implementation which is <nl> - * called by a Match PACT . By definition , a Match PACT has two input sets of <nl> - * key - value pairs . It calls the match implementation once for each two pairs <nl> - * that share the same key and come from different input sets . It resembles an <nl> - * equality join of both inputs on their keys . For details on the Match PACT <nl> - * read the documentation of the PACT programming model . <nl> - * < p > <nl> - * The JoinFunction extension must be parameterized with the type of the key that is matched on . <nl> - * < p > <nl> - * For a match implementation , the < code > match ( ) < / code > method must be implemented . <nl> - * / <nl> + <nl> public abstract class JoinFunction extends AbstractArrayModelFunction implements GenericJoiner < Value [ ] , Value [ ] , Value [ ] > { <nl> <nl> / * * <nl> <nl> * decide whether to retry the combiner execution . <nl> * / <nl> @ Override <nl> - public abstract void match ( Value [ ] value1 , Value [ ] value2 , Collector < Value [ ] > out ) throws Exception ; <nl> + public abstract void join ( Value [ ] value1 , Value [ ] value2 , Collector < Value [ ] > out ) throws Exception ; <nl> <nl> @ Override <nl> public Method getUDFMethod ( ) { <nl> mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / MapFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / MapFunction . java <nl> <nl> import eu . stratosphere . types . Value ; <nl> import eu . stratosphere . util . Collector ; <nl> <nl> - / * * <nl> - * The MapFunction must be extended to provide a mapper implementation which is called by a Map PACT . <nl> - * By definition , the Map PACT calls the mapper implementation for each individual input record . <nl> - * For details on the Map PACT read the documentation of the PACT programming model . <nl> - * < p > <nl> - * For a mapper implementation , the < code > map ( ) < / code > method must be implemented . <nl> - * / <nl> public abstract class MapFunction extends AbstractArrayModelFunction implements GenericMapper < Value [ ] , Value [ ] > { <nl> <nl> / * * <nl> mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / ReduceFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / ReduceFunction . java <nl> <nl> import eu . stratosphere . types . Value ; <nl> import eu . stratosphere . util . Collector ; <nl> <nl> - / * * <nl> - * The ReduceFunction must be extended to provide a reducer implementation which is called by a Reduce PACT . <nl> - * By definition , the Reduce PACT calls the reduce implementation once for each distinct key and all records <nl> - * that come with that key . For details on the Reduce PACT read the documentation of the PACT programming model . <nl> - * < p > <nl> - * The ReduceFunction extension must be parameterized with the types of its input keys . <nl> - * < p > <nl> - * For a reduce implementation , the < code > reduce ( ) < / code > method must be implemented . <nl> - * / <nl> + <nl> public abstract class ReduceFunction extends AbstractArrayModelFunction implements GenericReducer < Value [ ] , Value [ ] > { <nl> <nl> / * * <nl> mmm a / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / ReduceWithKeyFunction . java <nl> ppp b / stratosphere - addons / array - datamodel / src / main / java / eu / stratosphere / arraymodel / functions / ReduceWithKeyFunction . java <nl> <nl> import eu . stratosphere . util . Collector ; <nl> import eu . stratosphere . util . InstantiationUtil ; <nl> <nl> - / * * <nl> - * The ReduceFunction must be extended to provide a reducer implementation which is called by a Reduce PACT . <nl> - * By definition , the Reduce PACT calls the reduce implementation once for each distinct key and all records <nl> - * that come with that key . For details on the Reduce PACT read the documentation of the PACT programming model . <nl> - * < p > <nl> - * The ReduceFunction extension must be parameterized with the types of its input keys . <nl> - * < p > <nl> - * For a reduce implementation , the < code > reduce ( ) < / code > method must be implemented . <nl> - * / <nl> + <nl> public abstract class ReduceWithKeyFunction extends AbstractArrayModelFunction implements GenericReducer < Value [ ] , Value [ ] > { <nl> <nl> public abstract void reduce ( Value key , Iterator < Value [ ] > records , Collector < Value [ ] > out ) ; <nl> mmm a / stratosphere - compiler / src / test / java / eu / stratosphere / pact / compiler / util / DummyMatchStub . java <nl> ppp b / stratosphere - compiler / src / test / java / eu / stratosphere / pact / compiler / util / DummyMatchStub . java <nl> <nl> private static final long serialVersionUID = 1L ; <nl> <nl> @ Override <nl> - public void match ( Record value1 , Record value2 , Collector < Record > out ) throws Exception { <nl> + public void join ( Record value1 , Record value2 , Collector < Record > out ) throws Exception { <nl> out . collect ( value1 ) ; <nl> } <nl> } <nl> mmm a / stratosphere - compiler / ",Renamed ' match ' in functions to ' join ' .,c38c68e1bc0d6abf79c0d4f9ceea5bb2a8b8a1d0,Trivial Why,,﻿Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
33354,"mmm a / flink - core / src / main / java / org / apache / flink / configuration / Configuration . java <nl> ppp b / flink - core / src / main / java / org / apache / flink / configuration / Configuration . java <nl> <nl> implements IOReadableWritable , java . io . Serializable , Cloneable { <nl> <nl> private static final long serialVersionUID = 1L ; <nl> - <nl> + <nl> private static final byte TYPE_STRING = 0 ; <nl> private static final byte TYPE_INT = 1 ; <nl> private static final byte TYPE_LONG = 2 ; <nl> <nl> private static final byte TYPE_FLOAT = 4 ; <nl> private static final byte TYPE_DOUBLE = 5 ; <nl> private static final byte TYPE_BYTES = 6 ; <nl> - <nl> + <nl> / * * The log object used for debugging . * / <nl> private static final Logger LOG = LoggerFactory . getLogger ( Configuration . class ) ; <nl> - <nl> + <nl> <nl> / * * Stores the concrete key / value pairs of this configuration object . * / <nl> protected final HashMap < String , Object > confData ; <nl> - <nl> + <nl> / / mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm - - <nl> <nl> / * * <nl> private Object getRawValueFromOption ( ConfigOption < ? > configOption ) { <nl> Object o = getRawValue ( configOption . key ( ) ) ; <nl> <nl> if ( o ! = null ) { <nl> + / / found a value for the current proper key <nl> return o ; <nl> } <nl> else if ( configOption . hasDeprecatedKeys ( ) ) { <nl> + / / try the deprecated keys <nl> for ( String deprecatedKey : configOption . deprecatedKeys ( ) ) { <nl> Object oo = getRawValue ( deprecatedKey ) ; <nl> if ( oo ! = null ) { <nl> + LOG . warn ( "" Config uses deprecated configuration key ' { } ' instead of proper key ' { } ' "" , <nl> + deprecatedKey , configOption . key ( ) ) ; <nl> return oo ; <nl> } <nl> } <nl> new file mode 100644 <nl> index 000000000000 . . 40d75e8f9286 <nl> mmm / dev / null <nl> ppp b / flink - fs - tests / src / test / java / org / apache / flink / hdfstests / FsNegativeRunningJobsRegistryTest . java <nl> <nl> + / * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License , Version 2 . 0 ( the <nl> + * "" License "" ) ; you may not use this file except in compliance <nl> + * with the License . You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package org . apache . flink . hdfstests ; <nl> + <nl> + import org . apache . flink . api . common . JobID ; <nl> + import org . apache . flink . core . fs . Path ; <nl> + import org . apache . flink . runtime . highavailability . FsNegativeRunningJobsRegistry ; <nl> + <nl> + import org . apache . hadoop . conf . Configuration ; <nl> + import org . apache . hadoop . hdfs . MiniDFSCluster ; <nl> + <nl> + import org . junit . AfterClass ; <nl> + import org . junit . BeforeClass ; <nl> + import org . junit . ClassRule ; <nl> + import org . junit . Test ; <nl> + import org . junit . rules . TemporaryFolder ; <nl> + <nl> + import java . io . File ; <nl> + <nl> + import static org . junit . Assert . assertFalse ; <nl> + import static org . junit . Assert . assertTrue ; <nl> + <nl> + public class FsNegativeRunningJobsRegistryTest { <nl> + <nl> + @ ClassRule <nl> + public static final TemporaryFolder TEMP_DIR = new TemporaryFolder ( ) ; <nl> + <nl> + private static MiniDFSCluster HDFS_CLUSTER ; <nl> + <nl> + private static Path HDFS_ROOT_PATH ; <nl> + <nl> + / / mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm <nl> + / / startup / shutdown <nl> + / / mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm <nl> + <nl> + @ BeforeClass <nl> + public static void createHDFS ( ) throws Exception { <nl> + final File tempDir = TEMP_DIR . newFolder ( ) ; <nl> + <nl> + Configuration hdConf = new Configuration ( ) ; <nl> + hdConf . set ( MiniDFSCluster . HDFS_MINIDFS_BASEDIR , tempDir . getAbsolutePath ( ) ) ; <nl> + <nl> + MiniDFSCluster . Builder builder = new MiniDFSCluster . Builder ( hdConf ) ; <nl> + HDFS_CLUSTER = builder . build ( ) ; <nl> + <nl> + HDFS_ROOT_PATH = new Path ( "" hdfs : / / "" + HDFS_CLUSTER . getURI ( ) . getHost ( ) + "" : "" <nl> + + HDFS_CLUSTER . getNameNodePort ( ) + "" / "" ) ; <nl> + } <nl> + <nl> + @ AfterClass <nl> + public static void destroyHDFS ( ) { <nl> + if ( HDFS_CLUSTER ! = null ) { <nl> + HDFS_CLUSTER . shutdown ( ) ; <nl> + } <nl> + HDFS_CLUSTER = null ; <nl> + HDFS_ROOT_PATH = null ; <nl> + } <nl> + <nl> + / / mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm <nl> + / / Tests <nl> + / / mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm <nl> + <nl> + @ Test <nl> + public void testCreateAndSetFinished ( ) throws Exception { <nl> + final Path workDir = new Path ( HDFS_ROOT_PATH , "" test - work - dir "" ) ; <nl> + final JobID jid = new JobID ( ) ; <nl> + <nl> + FsNegativeRunningJobsRegistry registry = new FsNegativeRunningJobsRegistry ( workDir ) ; <nl> + <nl> + / / initially , without any call , the job is considered running <nl> + assertTrue ( registry . isJobRunning ( jid ) ) ; <nl> + <nl> + / / repeated setting should not affect the status <nl> + registry . setJobRunning ( jid ) ; <nl> + assertTrue ( registry . isJobRunning ( jid ) ) ; <nl> + <nl> + / / set the job to finished and validate <nl> + registry . setJobFinished ( jid ) ; <nl> + assertFalse ( registry . isJobRunning ( jid ) ) ; <nl> + <nl> + / / another registry should pick this up <nl> + FsNegativeRunningJobsRegistry otherRegistry = new FsNegativeRunningJobsRegistry ( workDir ) ; <nl> + assertFalse ( otherRegistry . isJobRunning ( jid ) ) ; <nl> + } <nl> + <nl> + @ Test <nl> + public void testSetFinishedAndRunning ( ) throws Exception { <nl> + final Path workDir = new Path ( HDFS_ROOT_PATH , "" änother_wörk_directörü "" ) ; <nl> + final JobID jid = new JobID ( ) ; <nl> + <nl> + FsNegativeRunningJobsRegistry registry = new FsNegativeRunningJobsRegistry ( workDir ) ; <nl> + <nl> + / / set the job to finished and validate <nl> + registry . setJobFinished ( jid ) ; <nl> + assertFalse ( registry . isJobRunning ( jid ) ) ; <nl> + <nl> + / / set the job to back to running and validate <nl> + registry . setJobRunning ( jid ) ; <nl> + assertTrue ( registry . isJobRunning ( jid ) ) ; <nl> + <nl> + / / another registry should pick this up <nl> + FsNegativeRunningJobsRegistry otherRegistry = new FsNegativeRunningJobsRegistry ( workDir ) ; <nl> + assertTrue ( otherRegistry . isJobRunning ( jid ) ) ; <nl> + } <nl> + } <nl> mmm a / flink - runtime / src / main / java / org / apache / flink / runtime / fs / hdfs / HadoopFileSystem . java <nl> ppp b / flink - runtime / src / main / java / org / apache / flink / runtime / fs / hdfs / HadoopFileSystem . java <nl> <nl> import java . net . URI ; <nl> import java . net . UnknownHostException ; <nl> <nl> + import static org . apache . flink . util . Preconditions . checkNotNull ; <nl> + <nl> / * * <nl> * Concrete implementation of the { @ link FileSystem } base class for the Hadoop File System . The <nl> * class is a wrapper class which encapsulated the original Hadoop HDFS API . <nl> <nl> <nl> <nl> / * * <nl> - * Creates a new DistributedFileSystem object to access HDFS <nl> + * Creates a new DistributedFileSystem object to access HDFS , based on a class name <nl> + * and picking up the configuration from the class path or the Flink configuration . <nl> * <nl> * @ throws IOException <nl> * throw if the required HDFS classes cannot be instantiated <nl> public HadoopFileSystem ( Class < ? extends org . apache . hadoop . fs . FileSystem > fsClass <",[ FLINK - 5254 ] [ yarn ] Implement YARN High - Availability Services,2a7dbda79a00863a511fcf64b339770d1d00f805,,Missing Why,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
67427,"mmm a / core / src / main / java / org / elasticsearch / cluster / routing / PlainShardsIterator . java <nl> ppp b / core / src / main / java / org / elasticsearch / cluster / routing / PlainShardsIterator . java <nl> public int sizeActive ( ) { <nl> return count ; <nl> } <nl> <nl> - @ Override <nl> - public int assignedReplicasIncludingRelocating ( ) { <nl> - int count = 0 ; <nl> - for ( ShardRouting shard : shards ) { <nl> - if ( shard . unassigned ( ) ) { <nl> - continue ; <nl> - } <nl> - / / if the shard is primary and relocating , add one to the counter since we perform it on the replica as well <nl> - / / ( and we already did it on the primary ) <nl> - if ( shard . primary ( ) ) { <nl> - if ( shard . relocating ( ) ) { <nl> - count + + ; <nl> - } <nl> - } else { <nl> - count + + ; <nl> - / / if we are relocating the replica , we want to perform the index operation on both the relocating <nl> - / / shard and the target shard . This means that we won ' t loose index operations between end of recovery <nl> - / / and reassignment of the shard by the master node <nl> - if ( shard . relocating ( ) ) { <nl> - count + + ; <nl> - } <nl> - } <nl> - } <nl> - return count ; <nl> - } <nl> - <nl> @ Override <nl> public Iterable < ShardRouting > asUnordered ( ) { <nl> return shards ; <nl> mmm a / core / src / main / java / org / elasticsearch / cluster / routing / ShardsIterator . java <nl> ppp b / core / src / main / java / org / elasticsearch / cluster / routing / ShardsIterator . java <nl> <nl> * / <nl> int sizeActive ( ) ; <nl> <nl> - / * * <nl> - * Returns the number of replicas in this iterator that are not in the <nl> - * { @ link ShardRoutingState # UNASSIGNED } . The returned double - counts replicas <nl> - * that are in the state { @ link ShardRoutingState # RELOCATING } <nl> - * / <nl> - int assignedReplicasIncludingRelocating ( ) ; <nl> - <nl> / * * <nl> * Returns the next shard , or < tt > null < / tt > if none available . <nl> * / <nl>",Remove unused assignedReplicasIncludingRelocating from ShardsIterator interface ( ),6a16a60c7e2a4d0eb9aba6b6d5d72d43dab1d7fc,,Trivial Why,,Code refactoring,﻿Summarize Code Object Change,,﻿Object of change,,,
332717,"mmm a / lib / java / com / google / android / material / card / MaterialCardViewHelper . java <nl> ppp b / lib / java / com / google / android / material / card / MaterialCardViewHelper . java <nl> <nl> private @ ColorInt int strokeColor ; <nl> private @ ColorInt int rippleColor ; <nl> private @ Dimension int strokeWidth ; <nl> + private @ Dimension float radius ; <nl> + <nl> + private GradientDrawable fgDrawable ; <nl> + private LayerDrawable layerDrawable ; <nl> + private Drawable rippleDrawable ; <nl> <nl> public MaterialCardViewHelper ( MaterialCardView card ) { <nl> materialCardView = card ; <nl> public void loadFromAttributes ( TypedArray attributes ) { <nl> } <nl> <nl> void setStrokeColor ( @ ColorInt int strokeColor ) { <nl> + if ( this . strokeColor = = strokeColor ) { <nl> + return ; <nl> + } <nl> + <nl> this . strokeColor = strokeColor ; <nl> updateForeground ( ) ; <nl> } <nl> public void getOutline ( View view , Outline outline ) { <nl> * @ return drawable representing foreground for a card . <nl> * / <nl> private Drawable createForegroundDrawable ( ) { <nl> - GradientDrawable fgDrawable = new GradientDrawable ( ) ; <nl> - fgDrawable . setColor ( Color . TRANSPARENT ) ; <nl> + if ( fgDrawable = = null ) { <nl> + fgDrawable = new GradientDrawable ( ) ; <nl> + fgDrawable . setColor ( Color . TRANSPARENT ) ; <nl> + } <nl> + <nl> float radius = materialCardView . getRadius ( ) ; <nl> - fgDrawable . setCornerRadius ( radius ) ; <nl> + if ( Math . abs ( radius - this . radius ) > 0 . 001f ) { <nl> + fgDrawable . setCornerRadius ( radius ) ; <nl> + } <nl> <nl> + this . radius = radius ; <nl> / / In order to set a stroke , a size and color both need to be set . We default to a zero - width <nl> / / width size , but won ' t set a default color . This prevents drawing a stroke that blends in with <nl> / / the card but that could affect card spacing . <nl> private Drawable createForegroundDrawable ( ) { <nl> return fgDrawable ; <nl> } <nl> <nl> - Drawable rippleDrawable = createForegroundRippleDrawable ( radius ) ; <nl> + if ( rippleDrawable = = null ) { <nl> + rippleDrawable = createForegroundRippleDrawable ( ) ; <nl> + } else { <nl> + updateRippleShape ( ) ; <nl> + } <nl> <nl> - return new LayerDrawable ( <nl> - new Drawable [ ] { <nl> - rippleDrawable , fgDrawable , <nl> - } ) ; <nl> + if ( layerDrawable = = null ) { <nl> + layerDrawable = new LayerDrawable ( new Drawable [ ] { rippleDrawable , fgDrawable } ) ; <nl> + layerDrawable . setId ( 0 , R . id . foregroundRippleLayerDrawable ) ; <nl> + layerDrawable . setId ( 1 , R . id . foregroundBorderLayerDrawable ) ; <nl> + } else { <nl> + layerDrawable . setDrawableByLayerId ( R . id . foregroundRippleLayerDrawable , rippleDrawable ) ; <nl> + layerDrawable . setDrawableByLayerId ( R . id . foregroundBorderLayerDrawable , fgDrawable ) ; <nl> + } <nl> + <nl> + return layerDrawable ; <nl> + } <nl> + <nl> + private void updateRippleShape ( ) { <nl> + / / noinspection NewApi <nl> + if ( RippleUtils . USE_FRAMEWORK_RIPPLE & & rippleDrawable instanceof RippleDrawable ) { <nl> + ShapeDrawable shapeDrawable = <nl> + ( ShapeDrawable ) ( ( RippleDrawable ) rippleDrawable ) . getDrawable ( 0 ) ; <nl> + shapeDrawable . setShape ( createRoundRectShape ( ) ) ; <nl> + return ; <nl> + } <nl> + <nl> + / / No way to update this one , create a new one . <nl> + rippleDrawable = createCompatRippleDrawable ( ) ; <nl> } <nl> <nl> / * * Guarantee at least enough content padding to account for the stroke width . * / <nl> private int getRippleColor ( ) { <nl> return value . data ; <nl> } <nl> <nl> - private Drawable createForegroundRippleDrawable ( float radius ) { <nl> + private Drawable createForegroundRippleDrawable ( ) { <nl> if ( RippleUtils . USE_FRAMEWORK_RIPPLE ) { <nl> / / noinspection NewApi <nl> return new RippleDrawable ( <nl> - ColorStateList . valueOf ( rippleColor ) , null , createForegroundShape ( radius ) ) ; <nl> + ColorStateList . valueOf ( rippleColor ) , null , createForegroundShapeDrawable ( ) ) ; <nl> } <nl> <nl> + return createCompatRippleDrawable ( ) ; <nl> + } <nl> + <nl> + private Drawable createCompatRippleDrawable ( ) { <nl> Drawable rippleDrawable = new StateListDrawable ( ) ; <nl> - ShapeDrawable foregroundShape = createForegroundShape ( radius ) ; <nl> + ShapeDrawable foregroundShape = createForegroundShapeDrawable ( ) ; <nl> foregroundShape . getPaint ( ) . setColor ( rippleColor ) ; <nl> ( ( StateListDrawable ) rippleDrawable ) <nl> . addState ( new int [ ] { android . R . attr . state_pressed } , foregroundShape ) ; <nl> - <nl> return rippleDrawable ; <nl> } <nl> <nl> - private ShapeDrawable createForegroundShape ( float radius ) { <nl> + private ShapeDrawable createForegroundShapeDrawable ( ) { <nl> + RoundRectShape shape = createRoundRectShape ( ) ; <nl> + return new ShapeDrawable ( shape ) ; <nl> + } <nl> + <nl> + private RoundRectShape createRoundRectShape ( ) { <nl> float [ ] radii = new float [ 8 ] ; <nl> Arrays . fill ( radii , radius ) ; <nl> - RoundRectShape shape = new RoundRectShape ( radii , null , null ) ; <nl> - return new ShapeDrawable ( shape ) ; <nl> + return new RoundRectShape ( radii , null , null ) ; <nl> } <nl> } <nl> new file mode 100644 <nl> index 000000000 . . 15533247a <nl> mmm / dev / null <nl> ppp b / lib / java / com / google / android / material / card / res / values / ids . xml <nl> <nl> + < ? xml version = "" 1 . 0 "" encoding = "" utf - 8 "" ? > <nl> + < ! - - <nl> + Copyright 2018 The Android Open Source Project <nl> + <nl> + Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + you may not use this file except in compliance with the License . <nl> + You may obtain a copy of the License at <nl> + <nl> + http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + <nl> + Unless required by applicable law or agreed to in writing , software <nl> + distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + See the License for the specific language governing permissions and <nl> + limitations under the License . <nl> + - - > <nl> + <nl> + < resources > <nl> + < item name = "" foregroundBorderLayerDrawable "" type = "" id "" / > <nl> + < item name = "" foregroundRippleLayerDrawable "" type = "" id "" / > <nl> + < / resources > <nl>",MaterialCardView update foreground drawables instead of creating new ones .,1ddb5f585a60d8d898e281fdf79045af67ed8269,Missing Why,,,,,Summarize code object change,,Constrast before and after,,
248881,"mmm a / Rakefile <nl> ppp b / Rakefile <nl> task : test_py = > [ <nl> ] <nl> <nl> task : test_dotnet = > [ <nl> + "" / / dotnet / test : unit : run "" , <nl> "" / / dotnet / test : firefox : run "" <nl> ] <nl> <nl> mmm a / WebDriver . sln <nl> ppp b / WebDriver . sln <nl> Project ( "" { FAE04EC0 - 301F - 11D3 - BF4B - 00C04F79EFBC } "" ) = "" WebDriver "" , "" dotnet \ src \ Web <nl> EndProject <nl> Project ( "" { 8BC9CEB8 - 8B4A - 11D0 - 8D11 - 00A0C91BC942 } "" ) = "" webdriver - server "" , "" cpp \ webdriver - server \ webdriver - server . vcxproj "" , "" { 35A23A16 - EF17 - 4CC3 - 8854 - 785025A304F3 } "" <nl> EndProject <nl> - Project ( "" { FAE04EC0 - 301F - 11D3 - BF4B - 00C04F79EFBC } "" ) = "" WebDriver . Remote . UnitTests "" , "" dotnet \ test \ WebDriver . Remote . UnitTests \ WebDriver . Remote . UnitTests . csproj "" , "" { D9387770 - DA92 - 4898 - 801F - F61255739D38 } "" <nl> + Project ( "" { FAE04EC0 - 301F - 11D3 - BF4B - 00C04F79EFBC } "" ) = "" WebDriver . UnitTests "" , "" dotnet \ test \ WebDriver . UnitTests \ WebDriver . UnitTests . csproj "" , "" { D9387770 - DA92 - 4898 - 801F - F61255739D38 } "" <nl> EndProject <nl> Global <nl> GlobalSection ( SolutionConfigurationPlatforms ) = preSolution <nl> mmm a / cpp / IEDriver / Generated / atoms . h <nl> ppp b / cpp / IEDriver / Generated / atoms . h <nl> <nl> - / * <nl> - * Copyright 2011 WebDriver committers <nl> - * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - / * AUTO GENERATED - DO NOT EDIT BY HAND * / <nl> - # ifndef WEBDRIVER_ATOMS_H_ <nl> - # define WEBDRIVER_ATOMS_H_ <nl> - <nl> - # include < stddef . h > / / For wchar_t . <nl> - # include < string > / / For std : : ( w ) string . <nl> - <nl> - namespace webdriver { <nl> - namespace atoms { <nl> - <nl> - const wchar_t * const CLICK [ ] = { <nl> - L "" function ( ) { return function ( ) { function g ( a ) { throw a ; } var i = void 0 , j = nul "" , <nl> - L "" l ; function m ( a ) { return function ( ) { return this [ a ] } } function n ( a ) { return "" , <nl> - L "" function ( ) { return a } } var o , q = this ; \ nfunction s ( a ) { var b = typeof a ; if ( b "" , <nl> - L "" = = \ "" object \ "" ) if ( a ) { if ( a instanceof Array ) return \ "" array \ "" ; else if ( a ins "" , <nl> - L "" tanceof Object ) return b ; var c = Object . prototype . toString . call ( a ) ; if ( c = = "" , <nl> - L "" \ "" [ object Window ] \ "" ) return \ "" object \ "" ; if ( c = = \ "" [ object Array ] \ "" | | typeof "" , <nl> - L "" a . length = = \ "" number \ "" & & typeof a . splice ! = \ "" undefined \ "" & & typeof a . propert "" , <nl> - L "" yIsEnumerable ! = \ "" undefined \ "" & & ! a . propertyIsEnumerable ( \ "" splice \ "" ) ) retu "" , <nl> - L "" rn \ "" array \ "" ; if ( c = = \ "" [ object Function ] \ "" | | typeof a . call ! = \ "" undefined \ "" & "" , <nl> - L "" & typeof a . propertyIsEnumerable ! = \ "" undefined \ "" & & ! a . propertyIsEnumerable "" , <nl> - L "" ( \ "" call \ "" ) ) return \ "" function \ "" } else return \ "" null \ "" ; \ nelse if ( b = = \ "" funct "" , <nl> - L "" ion \ "" & & typeof a . call = = \ "" undefined \ "" ) return \ "" object \ "" ; return b } function "" , <nl> - L "" aa ( a ) { var b = s ( a ) ; return b = = \ "" array \ "" | | b = = \ "" object \ "" & & typeof a . length = "" , <nl> - L "" = \ "" number \ "" } function t ( a ) { return typeof a = = \ "" string \ "" } function v ( a ) { re "" , <nl> - L "" turn s ( a ) = = \ "" function \ "" } function ba ( a ) { a = s ( a ) ; return a = = \ "" object \ "" | | a = "" , <nl> - L "" = \ "" array \ "" | | a = = \ "" function \ "" } var ca = \ "" closure_uid_ \ "" + Math . floor ( Math . ra "" , <nl> - L "" ndom ( ) * 2147483648 ) . toString ( 36 ) , da = 0 , ea = Date . now | | function ( ) { return + ne "" , <nl> - L "" w Date } ; \ nfunction w ( a , b ) { function c ( ) { } c . prototype = b . prototype ; a . W = b . "" , <nl> - L "" prototype ; a . prototype = new c } ; function fa ( a ) { for ( var b = 1 ; b < arguments . le "" , <nl> - L "" ngth ; b + + ) var c = String ( arguments [ b ] ) . replace ( / \ \ $ / g , \ "" $ $ $ $ \ "" ) , a = a . repla "" , <nl> - L "" ce ( / \ \ % s / , c ) ; return a } function ga ( a ) { return a . replace ( / ^ [ \ \ s \ \ xa0 ] + | [ "" , <nl> - L "" \ \ s \ \ xa0 ] + $ / g , \ "" \ "" ) } function ha ( a ) { if ( ! ia . test ( a ) ) return a ; a . indexOf ( "" , <nl> - L "" \ "" & \ "" ) ! = - 1 & & ( a = a . replace ( ja , \ "" & amp ; \ "" ) ) ; a . indexOf ( \ "" < \ "" ) ! = - 1 & & ( a = a . rep "" , <nl> - L "" lace ( ka , \ "" & lt ; \ "" ) ) ; a . indexOf ( \ "" > \ "" ) ! = - 1 & & ( a = a . replace ( la , \ "" & gt ; \ "" ) ) ; a . "" , <nl> - L "" indexOf ( ' \ "" ' ) ! = - 1 & & ( a = a . replace ( ma , \ "" & quot ; \ "" ) ) ; return a } var ja = / & / g , k "" , <nl> - L "" a = / < / g , la = / > / g , ma = / \ \ \ "" / g , ia = / [ & < > \ \ \ "" ] / ; \ nfunction na ( a , b ) { if ( a < b ) ret "" , <nl> - L "" urn - 1 ; else if ( a > b ) return 1 ; return 0 } var oa = Math . random ( ) * 2147483648 | 0 , "" , <nl> - L "" pa = { } ; function qa ( a ) { return pa [ a ] | | ( pa [ a ] = String ( a ) . replace ( / \ \ - ( [ a - z ] "" , <nl> - L "" ) / g , function ( a , c ) { return c . toUpperCase ( ) } ) ) } ; var ra , sa , ta , ua = q . navigat "" , <nl> - L "" or ; ta = ua & & ua . platform | | \ "" \ "" ; ra = ta . indexOf ( \ "" Mac \ "" ) ! = - 1 ; sa = ta . indexOf ( "" , <nl> - L "" \ "" Win \ "" ) ! = - 1 ; var va = ta . indexOf ( \ "" Linux \ "" ) ! = - 1 , wa ; var xa = \ "" \ "" , ya = / MSIE "" , <nl> - L "" \ \ s + ( [ ^ \ \ ) ; ] + ) ( \ \ ) | ; ) / . exec ( q . navigator ? q . navigator . userAgent : j ) , xa = ya "" , <nl> - L "" ? ya [ 1 ] : \ "" \ "" , za , Aa = q . document ; za = Aa ? Aa . documentMode : i ; wa = za > parseFloat ( "" , <nl> - L "" xa ) ? String ( za ) : xa ; var Ba = { } ; \ nfunction x ( a ) { var b ; if ( ! ( b = Ba [ a ] ) ) { b = 0 ; f "" , <nl> - L "" or ( var c = ga ( String ( wa ) ) . split ( \ "" . \ "" ) , d = ga ( String ( a ) ) . split ( \ "" . \ "" ) , e = Ma "" , <nl> - L "" th . max ( c . length , d . length ) , f = 0 ; b = = 0 & & f < e ; f + + ) { var h = c [ f ] | | \ "" \ "" , k = d [ f ] | | "" , <nl> - L "" \ "" \ "" , l = RegExp ( \ "" ( \ \ \ \ d * ) ( \ \ \ \ D * ) \ "" , \ "" g \ "" ) , r = RegExp ( \ "" ( \ \ \ \ d * ) ( \ \ \ \ D * ) "" , <nl> - L "" \ "" , \ "" g \ "" ) ; do { var p = l . exec ( h ) | | [ \ "" \ "" , \ "" \ "" , \ "" \ "" ] , u = r . exec ( k ) | | [ \ "" \ "" , \ "" \ "" "" , <nl> - L "" , \ "" \ "" ] ; if ( p [ 0 ] . length = = 0 & & u [ 0 ] . length = = 0 ) break ; b = na ( p [ 1 ] . length = = 0 ? 0 : p "" , <nl> - L "" arseInt ( p [ 1 ] , 10 ) , u [ 1 ] . length = = 0 ? 0 : parseInt ( u [ 1 ] , 10 ) ) | | na ( p [ 2 ] . length = = "" , <nl> - L "" 0 , u [ 2 ] . length = = 0 ) | | na ( p [ 2 ] , u [ 2 ] ) } while ( b = = 0 ) } b = Ba [ a ] = b > = 0 } return b } var "" , <nl> - L "" Ca = { } ; \ nfunction Da ( ) { return Ca [ 9 ] | | ( Ca [ 9 ] = document . documentMode & & doc "" , <nl> - L "" ument . documentMode > = 9 ) } ; var Ea = window ; function y ( a ) { this . stack = Error ( ) "" , <nl> - L "" . stack | | \ "" \ "" ; if ( a ) this . message = String ( a ) } w ( y , Error ) ; y . prototype . name = "" , <nl> - L "" \ "" CustomError \ "" ; function Fa ( a , b ) { for ( var c in a ) b . call ( i , a [ c ] , c , a ) } var "" , <nl> - L "" Ga = [ \ "" constructor \ "" , \ "" hasOwnProperty \ "" , \ "" isPrototypeOf \ "" , \ "" propertyIs "" , <nl> - L "" Enumerable \ "" , \ "" toLocaleString \ "" , \ "" toString \ "" , \ "" valueOf \ "" ] ; function Ha ( "" , <nl> - L "" a ) { for ( var b , c , d = 1 ; d < arguments . length ; d + + ) { c = arguments [ d ] ; for ( b in c ) a "" , <nl> - L "" [ b ] = c [ b ] ; for ( var e =",DanielWagnerHall : Making C # UnitTests fit in better with the C # project structure,013bbdc668fd7d01f508ca0be4282a365fc2e39f,﻿Describe Objective,,﻿To make improvements,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
78693,"mmm a / plugins / repository - s3 / src / main / java / org / elasticsearch / repositories / s3 / InternalAwsS3Service . java <nl> ppp b / plugins / repository - s3 / src / main / java / org / elasticsearch / repositories / s3 / InternalAwsS3Service . java <nl> public synchronized AmazonS3 client ( Settings repositorySettings ) { <nl> Strings . collectionToDelimitedString ( clientsSettings . keySet ( ) , "" , "" ) ) ; <nl> } <nl> <nl> - Integer maxRetries = getValue ( repositorySettings , settings , <nl> - S3Repository . Repository . MAX_RETRIES_SETTING , <nl> - S3Repository . Repositories . MAX_RETRIES_SETTING ) ; <nl> - boolean useThrottleRetries = getValue ( repositorySettings , settings , <nl> - S3Repository . Repository . USE_THROTTLE_RETRIES_SETTING , <nl> - S3Repository . Repositories . USE_THROTTLE_RETRIES_SETTING ) ; <nl> / / If the user defined a path style access setting , we rely on it , <nl> / / otherwise we use the default value set by the SDK <nl> Boolean pathStyleAccess = null ; <nl> public synchronized AmazonS3 client ( Settings repositorySettings ) { <nl> S3Repository . Repositories . PATH_STYLE_ACCESS_SETTING ) ; <nl> } <nl> <nl> - logger . debug ( "" creating S3 client with client_name [ { } ] , endpoint [ { } ] , max_retries [ { } ] , "" + <nl> - "" use_throttle_retries [ { } ] , path_style_access [ { } ] "" , <nl> - clientName , clientSettings . endpoint , maxRetries , useThrottleRetries , pathStyleAccess ) ; <nl> + logger . debug ( "" creating S3 client with client_name [ { } ] , endpoint [ { } ] , path_style_access [ { } ] "" , <nl> + clientName , clientSettings . endpoint , pathStyleAccess ) ; <nl> <nl> AWSCredentialsProvider credentials = buildCredentials ( logger , clientSettings ) ; <nl> - ClientConfiguration configuration = buildConfiguration ( clientSettings , maxRetries , useThrottleRetries ) ; <nl> + ClientConfiguration configuration = buildConfiguration ( clientSettings , repositorySettings ) ; <nl> <nl> client = new AmazonS3Client ( credentials , configuration ) ; <nl> <nl> public synchronized AmazonS3 client ( Settings repositorySettings ) { <nl> } <nl> <nl> / / pkg private for tests <nl> - static ClientConfiguration buildConfiguration ( S3ClientSettings clientSettings , Integer maxRetries , boolean useThrottleRetries ) { <nl> + static ClientConfiguration buildConfiguration ( S3ClientSettings clientSettings , Settings repositorySettings ) { <nl> ClientConfiguration clientConfiguration = new ClientConfiguration ( ) ; <nl> / / the response metadata cache is only there for diagnostics purposes , <nl> / / but can force objects from every response to the old generation . <nl> static ClientConfiguration buildConfiguration ( S3ClientSettings clientSettings , I <nl> clientConfiguration . setProxyPassword ( clientSettings . proxyPassword ) ; <nl> } <nl> <nl> + Integer maxRetries = getRepoValue ( repositorySettings , S3Repository . Repository . MAX_RETRIES_SETTING , clientSettings . maxRetries ) ; <nl> if ( maxRetries ! = null ) { <nl> / / If not explicitly set , default to 3 with exponential backoff policy <nl> clientConfiguration . setMaxErrorRetry ( maxRetries ) ; <nl> } <nl> + boolean useThrottleRetries = getRepoValue ( repositorySettings , <nl> + S3Repository . Repository . USE_THROTTLE_RETRIES_SETTING , clientSettings . throttleRetries ) ; <nl> clientConfiguration . setUseThrottleRetries ( useThrottleRetries ) ; <nl> clientConfiguration . setSocketTimeout ( clientSettings . readTimeoutMillis ) ; <nl> <nl> static AWSCredentialsProvider buildCredentials ( Logger logger , S3ClientSettings c <nl> } <nl> } <nl> <nl> + / * * Returns the value for a given setting from the repository , or returns the fallback value . * / <nl> + private static < T > T getRepoValue ( Settings repositorySettings , Setting < T > repositorySetting , T fallback ) { <nl> + if ( repositorySetting . exists ( repositorySettings ) ) { <nl> + return repositorySetting . get ( repositorySettings ) ; <nl> + } <nl> + return fallback ; <nl> + } <nl> + <nl> @ Override <nl> protected void doStart ( ) throws ElasticsearchException { <nl> } <nl> mmm a / plugins / repository - s3 / src / main / java / org / elasticsearch / repositories / s3 / S3ClientSettings . java <nl> ppp b / plugins / repository - s3 / src / main / java / org / elasticsearch / repositories / s3 / S3ClientSettings . java <nl> <nl> import org . elasticsearch . common . settings . SecureSetting ; <nl> import org . elasticsearch . common . settings . SecureString ; <nl> import org . elasticsearch . common . settings . Setting ; <nl> + import org . elasticsearch . common . settings . Setting . Property ; <nl> import org . elasticsearch . common . settings . Settings ; <nl> import org . elasticsearch . common . unit . TimeValue ; <nl> <nl> <nl> <nl> / * * An override for the s3 endpoint to connect to . * / <nl> static final Setting . AffixSetting < String > ENDPOINT_SETTING = Setting . affixKeySetting ( PREFIX , "" endpoint "" , <nl> - key - > new Setting < > ( key , "" "" , s - > s . toLowerCase ( Locale . ROOT ) , <nl> - Setting . Property . NodeScope ) ) ; <nl> + key - > new Setting < > ( key , "" "" , s - > s . toLowerCase ( Locale . ROOT ) , Property . NodeScope ) ) ; <nl> <nl> / * * The protocol to use to connect to s3 . * / <nl> static final Setting . AffixSetting < Protocol > PROTOCOL_SETTING = Setting . affixKeySetting ( PREFIX , "" protocol "" , <nl> - key - > new Setting < > ( key , "" https "" , s - > Protocol . valueOf ( s . toUpperCase ( Locale . ROOT ) ) , Setting . Property . NodeScope ) ) ; <nl> + key - > new Setting < > ( key , "" https "" , s - > Protocol . valueOf ( s . toUpperCase ( Locale . ROOT ) ) , Property . NodeScope ) ) ; <nl> <nl> / * * The host name of a proxy to connect to s3 through . * / <nl> static final Setting . AffixSetting < String > PROXY_HOST_SETTING = Setting . affixKeySetting ( PREFIX , "" proxy . host "" , <nl> - key - > Setting . simpleString ( key , Setting . Property . NodeScope ) ) ; <nl> + key - > Setting . simpleString ( key , Property . NodeScope ) ) ; <nl> <nl> / * * The port of a proxy to connect to s3 through . * / <nl> static final Setting . AffixSetting < Integer > PROXY_PORT_SETTING = Setting . affixKeySetting ( PREFIX , "" proxy . port "" , <nl> - key - > Setting . intSetting ( key , 80 , 0 , 1 < < 16 , Setting . Property . NodeScope ) ) ; <nl> + key - > Setting . intSetting ( key , 80 , 0 , 1 < < 16 , Property . NodeScope ) ) ; <nl> <nl> / * * The username of a proxy to connect to s3 through . * / <nl> static final Setting . AffixSetting < SecureString > PROXY_USERNAME_SETTING = Setting . affixKeySetting ( PREFIX , "" proxy . username "" , <nl> <nl> <nl> / * * The socket timeout for connecting to s3 . * / <nl> static final Setting . AffixSetting < TimeValue > READ_TIMEOUT_SETTING = Setting . affixKeySetting ( PREFIX , "" read_timeout "" , <nl> - key - > Setting . timeSetting ( key , TimeValue . timeValueMillis ( ClientConfiguration . DEFAULT_SOCKET_TIMEOUT ) , <nl> - Setting . Property . NodeScope ) ) ; <nl> + key - > Setting . timeSetting ( key , TimeValue . timeValueMillis ( ClientConfiguration . DEFAULT_SOCKET_TIMEOUT ) , Property . NodeScope ) ) ; <nl> + <nl> + / * * The number of retries to use when an s3 request fails . * / <nl> + static final Setting . AffixSetting < Integer > MAX_RETRIES_SETTING = Setting . affixKeySetting ( PREFIX , "" max_retries "" , <nl> + key - > Setting . intSetting ( key , S3Repository . Repositories . MAX_RETRIES_SETTING , 0 , Property . NodeScope ) ) ; <nl> + <nl> + / * * Whether retries should be throttled ( ie use backoff ) . * / <nl> + static final Setting . AffixSetting < Boolean > USE_THROTTLE_RETRIES_SETTING = Setting . affixKeySetting ( PREFIX , "" use_throttle_retries "" , <nl> + key - > Setting . boolSetting ( key , S3Repository . Repositories . USE_THROTTLE_RETRIES_SETTING , Property . NodeScope ) ) ; <nl> <nl> / * * Credentials to authenticate with s3 . * / <nl> final BasicAWSCredentials credentials ; <nl> <nl> / * * The read timeout for the s3 client . * / <nl> final int readTimeoutMillis ; <nl> <nl> + / * * The number of retries to use for the s3 client . * / <nl> + final int maxRetries ; <nl> + <nl> + / * * Whether","S3 Repository: Deprecate remaining repositories.s3.* settings (#24144)
Most of these settings should always be pulled from the repository
settings. A couple were leftover that should be moved to client
settings. The path style access setting should be removed altogether.
This commit adds deprecations for all of these existing settings, as
well as adding new client specific settings for max retries and
throttling.

relates #24143",51b33f1fd549b474e901e70a460440d73a1751ce,Describe Issue,Introduce issue/PR reference,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
359545,mmm a / library / build . gradle <nl> ppp b / library / build . gradle <nl> android { <nl> } <nl> <nl> dependencies { <nl> - testCompile ' com . squareup : fest - android : 1 . 0 . 7 ' <nl> - testCompile ' org . robolectric : robolectric : 2 . 1 . 1 ' <nl> + testCompile ' com . squareup . assertj : assertj - android : 1 . 0 . 0 ' <nl> + testCompile ' org . robolectric : robolectric : 2 . 4 ' <nl> testCompile ' junit : junit : 4 . 12 ' <nl> compile ' com . android . support : support - v4 : 22 . 1 . 1 ' <nl> } <nl> mmm a / library / test / com / nostra13 / universalimageloader / core / assist / ImageSizeTest . java <nl> ppp b / library / test / com / nostra13 / universalimageloader / core / assist / ImageSizeTest . java <nl> <nl> import com . nostra13 . universalimageloader . core . imageaware . ImageAware ; <nl> import com . nostra13 . universalimageloader . core . imageaware . ImageViewAware ; <nl> import com . nostra13 . universalimageloader . utils . ImageSizeUtils ; <nl> - import org . fest . assertions . api . Assertions ; <nl> + import static org . assertj . android . api . Assertions . assertThat ; <nl> import org . junit . Before ; <nl> import org . junit . Test ; <nl> import org . junit . runner . RunWith ; <nl> mmm a / library / test / com / nostra13 / universalimageloader / core / download / BaseImageDownloaderTest . java <nl> ppp b / library / test / com / nostra13 / universalimageloader / core / download / BaseImageDownloaderTest . java <nl> <nl> package com . nostra13 . universalimageloader . core . download ; <nl> <nl> - import org . fest . assertions . api . Assertions ; <nl> + import static org . assertj . android . api . Assertions . assertThat ; <nl> import org . junit . Test ; <nl> import org . junit . runner . RunWith ; <nl> import org . robolectric . RobolectricTestRunner ; <nl>,Upgraded Robolectric And AssertJ,06d055fde6e70f297b90524eb37e5ccda5b75dd2,,Illustrate Requirement,,Runtime or development environment change,,Trivial What,,,,
20821,"mmm a / double - dispatch / src / main / java / com / iluwatar / App . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / App . java <nl> <nl> public static void main ( String [ ] args ) { <nl> List < GameObject > objects = new ArrayList < > ( ) ; <nl> objects . add ( new FlamingAsteroid ( 0 , 0 , 5 , 5 ) ) ; <nl> - objects . add ( new SpaceStationMir ( 1 , 1 , 4 , 4 ) ) ; <nl> + objects . add ( new SpaceStationMir ( 1 , 1 , 2 , 2 ) ) ; <nl> objects . add ( new Meteoroid ( 10 , 10 , 15 , 15 ) ) ; <nl> - objects . add ( new SpaceStationIss ( 12 , 11 , 14 , 15 ) ) ; <nl> - objects . stream ( ) . forEach ( o1 - > objects . stream ( ) . forEach ( o2 - > { if ( o1 ! = o2 ) System . out . println ( String . format ( "" % s - > % s "" , o1 , o2 ) ) ; } ) ) ; <nl> + objects . add ( new SpaceStationIss ( 12 , 12 , 14 , 14 ) ) ; <nl> + <nl> + objects . stream ( ) . forEach ( o - > System . out . println ( o ) ) ; <nl> + System . out . println ( "" "" ) ; <nl> + <nl> + objects . stream ( ) . forEach ( o1 - > objects . stream ( ) . forEach ( o2 - > { if ( o1 ! = o2 & & o1 . intersectsWith ( o2 ) ) o1 . collision ( o2 ) ; } ) ) ; <nl> + System . out . println ( "" "" ) ; <nl> + <nl> + objects . stream ( ) . forEach ( o - > System . out . println ( o ) ) ; <nl> + System . out . println ( "" "" ) ; <nl> } <nl> } <nl> mmm a / double - dispatch / src / main / java / com / iluwatar / FlamingAsteroid . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / FlamingAsteroid . java <nl> public FlamingAsteroid ( int left , int top , int right , int bottom ) { <nl> super ( left , top , right , bottom ) ; <nl> setOnFire ( true ) ; <nl> } <nl> + <nl> + @ Override <nl> + public void collision ( GameObject gameObject ) { <nl> + gameObject . collisionResolve ( this ) ; <nl> + } <nl> } <nl> mmm a / double - dispatch / src / main / java / com / iluwatar / GameObject . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / GameObject . java <nl> public boolean isDamaged ( ) { <nl> public void setDamaged ( boolean damaged ) { <nl> this . damaged = damaged ; <nl> } <nl> + <nl> + public abstract void collision ( GameObject gameObject ) ; <nl> + <nl> + public abstract void collisionResolve ( FlamingAsteroid asteroid ) ; <nl> + <nl> + public abstract void collisionResolve ( Meteoroid meteoroid ) ; <nl> + <nl> + public abstract void collisionResolve ( SpaceStationMir mir ) ; <nl> + <nl> + public abstract void collisionResolve ( SpaceStationIss iss ) ; <nl> } <nl> mmm a / double - dispatch / src / main / java / com / iluwatar / Meteoroid . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / Meteoroid . java <nl> <nl> public Meteoroid ( int left , int top , int right , int bottom ) { <nl> super ( left , top , right , bottom ) ; <nl> } <nl> + <nl> + @ Override <nl> + public void collision ( GameObject gameObject ) { <nl> + gameObject . collisionResolve ( this ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( FlamingAsteroid asteroid ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , asteroid . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( Meteoroid meteoroid ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , meteoroid . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( SpaceStationMir mir ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , mir . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( SpaceStationIss iss ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , iss . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + } <nl> } <nl> mmm a / double - dispatch / src / main / java / com / iluwatar / SpaceStationIss . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / SpaceStationIss . java <nl> <nl> public SpaceStationIss ( int left , int top , int right , int bottom ) { <nl> super ( left , top , right , bottom ) ; <nl> } <nl> + <nl> + @ Override <nl> + public void collision ( GameObject gameObject ) { <nl> + gameObject . collisionResolve ( this ) ; <nl> + } <nl> } <nl> mmm a / double - dispatch / src / main / java / com / iluwatar / SpaceStationMir . java <nl> ppp b / double - dispatch / src / main / java / com / iluwatar / SpaceStationMir . java <nl> <nl> public SpaceStationMir ( int left , int top , int right , int bottom ) { <nl> super ( left , top , right , bottom ) ; <nl> } <nl> + <nl> + @ Override <nl> + public void collision ( GameObject gameObject ) { <nl> + gameObject . collisionResolve ( this ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( FlamingAsteroid asteroid ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , asteroid . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + setDamaged ( true ) ; <nl> + setOnFire ( true ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( Meteoroid meteoroid ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , meteoroid . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + setDamaged ( true ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( SpaceStationMir mir ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , mir . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + setDamaged ( true ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void collisionResolve ( SpaceStationIss iss ) { <nl> + System . out . println ( String . format ( "" % s hits % s "" , iss . getClass ( ) . getSimpleName ( ) , this . getClass ( ) . getSimpleName ( ) ) ) ; <nl> + setDamaged ( true ) ; <nl> + } <nl> } <nl>",Completed Double Dispatch example .,8c13dd0e10dcbcc609a8fd74c33043994b9ed940,,Trivial Why,,Text file changes,﻿Summarize Code Object Change,,﻿Object of change,,,
147744,"mmm a / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / ClusterConfiguration . java <nl> ppp b / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / ClusterConfiguration . java <nl> <nl> <nl> package org . apache . flink . runtime . entrypoint ; <nl> <nl> - import org . apache . flink . util . Preconditions ; <nl> + import javax . annotation . Nonnull ; <nl> + <nl> + import java . util . Properties ; <nl> <nl> / * * <nl> * Configuration class which contains the parsed command line arguments for <nl> * the { @ link ClusterEntrypoint } . <nl> * / <nl> public class ClusterConfiguration { <nl> + <nl> + @ Nonnull <nl> private final String configDir ; <nl> <nl> - private final int restPort ; <nl> + @ Nonnull <nl> + private final Properties dynamicProperties ; <nl> + <nl> + @ Nonnull <nl> + private final String [ ] args ; <nl> <nl> - public ClusterConfiguration ( String configDir , int restPort ) { <nl> - this . configDir = Preconditions . checkNotNull ( configDir ) ; <nl> - this . restPort = restPort ; <nl> + public ClusterConfiguration ( @ Nonnull String configDir , @ Nonnull Properties dynamicProperties , @ Nonnull String [ ] args ) { <nl> + this . configDir = configDir ; <nl> + this . dynamicProperties = dynamicProperties ; <nl> + this . args = args ; <nl> } <nl> <nl> + @ Nonnull <nl> public String getConfigDir ( ) { <nl> return configDir ; <nl> } <nl> <nl> - public int getRestPort ( ) { <nl> - return restPort ; <nl> + @ Nonnull <nl> + public Properties getDynamicProperties ( ) { <nl> + return dynamicProperties ; <nl> + } <nl> + <nl> + @ Nonnull <nl> + public String [ ] getArgs ( ) { <nl> + return args ; <nl> } <nl> } <nl> new file mode 100644 <nl> index 000000000000 . . 12115d726a43 <nl> mmm / dev / null <nl> ppp b / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / ClusterConfigurationParserFactory . java <nl> <nl> + / * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License , Version 2 . 0 ( the <nl> + * "" License "" ) ; you may not use this file except in compliance <nl> + * with the License . You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package org . apache . flink . runtime . entrypoint ; <nl> + <nl> + import org . apache . flink . runtime . entrypoint . parser . ParserResultFactory ; <nl> + <nl> + import org . apache . commons . cli . CommandLine ; <nl> + import org . apache . commons . cli . Options ; <nl> + <nl> + import javax . annotation . Nonnull ; <nl> + <nl> + import java . util . Properties ; <nl> + <nl> + import static org . apache . flink . runtime . entrypoint . parser . CommandLineOptions . CONFIG_DIR_OPTION ; <nl> + import static org . apache . flink . runtime . entrypoint . parser . CommandLineOptions . DYNAMIC_PROPERTY_OPTION ; <nl> + <nl> + / * * <nl> + * Parser factory which generates a { @ link ClusterConfiguration } from the given <nl> + * list of command line arguments . <nl> + * / <nl> + public class ClusterConfigurationParserFactory implements ParserResultFactory < ClusterConfiguration > { <nl> + <nl> + @ Override <nl> + public Options getOptions ( ) { <nl> + final Options options = new Options ( ) ; <nl> + options . addOption ( CONFIG_DIR_OPTION ) ; <nl> + options . addOption ( DYNAMIC_PROPERTY_OPTION ) ; <nl> + <nl> + return options ; <nl> + } <nl> + <nl> + @ Override <nl> + public ClusterConfiguration createResult ( @ Nonnull CommandLine commandLine ) { <nl> + final String configDir = commandLine . getOptionValue ( CONFIG_DIR_OPTION . getOpt ( ) ) ; <nl> + <nl> + final Properties dynamicProperties = commandLine . getOptionProperties ( DYNAMIC_PROPERTY_OPTION . getOpt ( ) ) ; <nl> + <nl> + return new ClusterConfiguration ( configDir , dynamicProperties , commandLine . getArgs ( ) ) ; <nl> + } <nl> + } <nl> mmm a / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / ClusterEntrypoint . java <nl> ppp b / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / ClusterEntrypoint . java <nl> <nl> package org . apache . flink . runtime . entrypoint ; <nl> <nl> import org . apache . flink . api . common . time . Time ; <nl> - import org . apache . flink . api . java . utils . ParameterTool ; <nl> import org . apache . flink . configuration . ConfigOption ; <nl> import org . apache . flink . configuration . ConfigOptions ; <nl> import org . apache . flink . configuration . Configuration ; <nl> <nl> import org . apache . flink . runtime . dispatcher . DispatcherId ; <nl> import org . apache . flink . runtime . dispatcher . HistoryServerArchivist ; <nl> import org . apache . flink . runtime . dispatcher . MiniDispatcher ; <nl> + import org . apache . flink . runtime . entrypoint . parser . CommandLineParser ; <nl> import org . apache . flink . runtime . heartbeat . HeartbeatServices ; <nl> import org . apache . flink . runtime . highavailability . HighAvailabilityServices ; <nl> import org . apache . flink . runtime . highavailability . HighAvailabilityServicesUtils ; <nl> protected abstract ArchivedExecutionGraphStore createSerializableExecutionGraphS <nl> Configuration configuration , <nl> ScheduledExecutor scheduledExecutor ) throws IOException ; <nl> <nl> - protected static ClusterConfiguration parseArguments ( String [ ] args ) { <nl> - ParameterTool parameterTool = ParameterTool . fromArgs ( args ) ; <nl> + private static EntrypointClusterConfiguration parseArguments ( String [ ] args ) throws FlinkParseException { <nl> + final CommandLineParser < EntrypointClusterConfiguration > clusterConfigurationParser = new CommandLineParser < > ( new EntrypointClusterConfigurationParserFactory ( ) ) ; <nl> <nl> - final String configDir = parameterTool . get ( "" configDir "" , "" "" ) ; <nl> - <nl> - final int restPort ; <nl> - <nl> - final String portKey = "" webui - port "" ; <nl> - if ( parameterTool . has ( portKey ) ) { <nl> - restPort = Integer . valueOf ( parameterTool . get ( portKey ) ) ; <nl> - } else { <nl> - restPort = - 1 ; <nl> - } <nl> - <nl> - return new ClusterConfiguration ( configDir , restPort ) ; <nl> + return clusterConfigurationParser . parse ( args ) ; <nl> } <nl> <nl> - protected static Configuration loadConfiguration ( ClusterConfiguration clusterConfiguration ) { <nl> - final Configuration configuration = GlobalConfiguration . loadConfiguration ( clusterConfiguration . getConfigDir ( ) ) ; <nl> + protected static Configuration loadConfiguration ( EntrypointClusterConfiguration entrypointClusterConfiguration ) { <nl> + final Configuration configuration = GlobalConfiguration . loadConfiguration ( entrypointClusterConfiguration . getConfigDir ( ) ) ; <nl> <nl> - final int restPort = clusterConfiguration . getRestPort ( ) ; <nl> + final int restPort = entrypointClusterConfiguration . getRestPort ( ) ; <nl> <nl> if ( restPort > = 0 ) { <nl> configuration . setInteger ( RestOptions . PORT , restPort ) ; <nl> new file mode 100644 <nl> index 000000000000 . . 75cad7aa946f <nl> mmm / dev / null <nl> ppp b / flink - runtime / src / main / java / org / apache / flink / runtime / entrypoint / EntrypointClusterConfiguration . java <nl> <nl> + / * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License",[ FLINK - 9818 ] Add cluster component command line parser,ab9bd87e521d19db7c7d783268a3532d2e876a5d,Missing Why,,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
44681,"mmm a / res / menu / conversation_context . xml <nl> ppp b / res / menu / conversation_context . xml <nl> <nl> <nl> < item android : title = "" @ string / conversation_context__menu_forward_message "" <nl> android : id = "" @ + id / menu_context_forward "" / > <nl> + <nl> + < item android : title = "" @ string / conversation_context__menu_resend_message "" <nl> + android : id = "" @ + id / menu_context_resend "" <nl> + android : visible = "" false "" / > <nl> < / menu > <nl> mmm a / res / values / strings . xml <nl> ppp b / res / values / strings . xml <nl> <nl> < string name = "" conversation_context__menu_copy_text "" > Copy text < / string > <nl> < string name = "" conversation_context__menu_delete_message "" > Delete message < / string > <nl> < string name = "" conversation_context__menu_forward_message "" > Forward message < / string > <nl> + < string name = "" conversation_context__menu_resend_message "" > Resend message < / string > <nl> <nl> < ! - - conversation_insecure - - > <nl> < string name = "" conversation_insecure__menu_start_secure_session "" > Start Secure Session < / string > <nl> mmm a / src / org / thoughtcrime / securesms / ConversationFragment . java <nl> ppp b / src / org / thoughtcrime / securesms / ConversationFragment . java <nl> <nl> import android . support . v4 . content . Loader ; <nl> import android . text . ClipboardManager ; <nl> import android . view . ContextMenu ; <nl> + import android . view . MenuItem ; <nl> import android . view . LayoutInflater ; <nl> import android . view . View ; <nl> import android . view . ViewGroup ; <nl> <nl> import org . thoughtcrime . securesms . database . loaders . ConversationLoader ; <nl> import org . thoughtcrime . securesms . database . model . MessageRecord ; <nl> import org . thoughtcrime . securesms . recipients . Recipients ; <nl> + import org . thoughtcrime . securesms . sms . MessageSender ; <nl> <nl> import java . sql . Date ; <nl> import java . text . SimpleDateFormat ; <nl> public void onCreateContextMenu ( ContextMenu menu , View v , ContextMenu . ContextMe <nl> menu . clear ( ) ; <nl> <nl> inflater . inflate ( R . menu . conversation_context , menu ) ; <nl> + <nl> + MessageRecord messageRecord = getMessageRecord ( ) ; <nl> + if ( messageRecord . isFailed ( ) ) { <nl> + MenuItem resend = menu . findItem ( R . id . menu_context_resend ) ; <nl> + resend . setVisible ( true ) ; <nl> + } <nl> } <nl> <nl> @ Override <nl> public boolean onContextItemSelected ( android . view . MenuItem item ) { <nl> - Cursor cursor = ( ( CursorAdapter ) getListAdapter ( ) ) . getCursor ( ) ; <nl> - ConversationItem conversationItem = ( ConversationItem ) ( ( ( ConversationAdapter ) getListAdapter ( ) ) . newView ( getActivity ( ) , cursor , null ) ) ; <nl> - MessageRecord messageRecord = conversationItem . getMessageRecord ( ) ; <nl> - <nl> + MessageRecord messageRecord = getMessageRecord ( ) ; <nl> switch ( item . getItemId ( ) ) { <nl> case R . id . menu_context_copy : handleCopyMessage ( messageRecord ) ; return true ; <nl> case R . id . menu_context_delete_message : handleDeleteMessage ( messageRecord ) ; return true ; <nl> case R . id . menu_context_details : handleDisplayDetails ( messageRecord ) ; return true ; <nl> case R . id . menu_context_forward : handleForwardMessage ( messageRecord ) ; return true ; <nl> + case R . id . menu_context_resend : handleResendMessage ( messageRecord ) ; return true ; <nl> } <nl> <nl> return false ; <nl> public void onAttach ( Activity activity ) { <nl> this . listener = ( ConversationFragmentListener ) activity ; <nl> } <nl> <nl> + private MessageRecord getMessageRecord ( ) { <nl> + Cursor cursor = ( ( CursorAdapter ) getListAdapter ( ) ) . getCursor ( ) ; <nl> + ConversationItem conversationItem = ( ConversationItem ) ( ( ( ConversationAdapter ) getListAdapter ( ) ) . newView ( getActivity ( ) , cursor , null ) ) ; <nl> + return conversationItem . getMessageRecord ( ) ; <nl> + } <nl> + <nl> public void reload ( Recipients recipients , long threadId ) { <nl> this . recipients = recipients ; <nl> this . threadId = threadId ; <nl> private void handleForwardMessage ( MessageRecord message ) { <nl> startActivity ( composeIntent ) ; <nl> } <nl> <nl> + private void handleResendMessage ( MessageRecord message ) { <nl> + long messageId = message . getId ( ) ; <nl> + final Activity activity = getActivity ( ) ; <nl> + MessageSender . resend ( activity , messageId , message . isMms ( ) ) ; <nl> + } <nl> + <nl> private void initializeResources ( ) { <nl> this . masterSecret = ( MasterSecret ) this . getActivity ( ) . getIntent ( ) <nl> . getParcelableExtra ( "" master_secret "" ) ; <nl> mmm a / src / org / thoughtcrime / securesms / database / MmsDatabase . java <nl> ppp b / src / org / thoughtcrime / securesms / database / MmsDatabase . java <nl> private void updateMailboxBitmask ( long id , long maskOff , long maskOn ) { <nl> "" WHERE "" + ID + "" = ? "" , new String [ ] { id + "" "" } ) ; <nl> } <nl> <nl> + public void markAsSending ( long messageId ) { <nl> + updateMailboxBitmask ( messageId , Types . BASE_TYPE_MASK , Types . BASE_SENDING_TYPE ) ; <nl> + notifyConversationListeners ( getThreadIdForMessage ( messageId ) ) ; <nl> + } <nl> + <nl> public void markAsSentFailed ( long messageId ) { <nl> updateMailboxBitmask ( messageId , Types . BASE_TYPE_MASK , Types . BASE_SENT_FAILED_TYPE ) ; <nl> notifyConversationListeners ( getThreadIdForMessage ( messageId ) ) ; <nl> mmm a / src / org / thoughtcrime / securesms / service / MmsSender . java <nl> ppp b / src / org / thoughtcrime / securesms / service / MmsSender . java <nl> public void process ( MasterSecret masterSecret , Intent intent ) { <nl> Log . w ( "" MmsSender "" , me ) ; <nl> if ( messageId ! = - 1 ) <nl> database . markAsSentFailed ( messageId ) ; <nl> - } <nl> + } <nl> } else if ( intent . getAction ( ) . equals ( SendReceiveService . SEND_MMS_CONNECTIVITY_ACTION ) ) { <nl> handleConnectivityChange ( ) ; <nl> } <nl> mmm a / src / org / thoughtcrime / securesms / sms / MessageSender . java <nl> ppp b / src / org / thoughtcrime / securesms / sms / MessageSender . java <nl> public static long send ( Context context , MasterSecret masterSecret , <nl> return threadId ; <nl> } <nl> <nl> + public static void resend ( Context context , long messageId , boolean isMms ) <nl> + { <nl> + <nl> + Intent intent ; <nl> + if ( isMms ) { <nl> + DatabaseFactory . getMmsDatabase ( context ) . markAsSending ( messageId ) ; <nl> + intent = new Intent ( SendReceiveService . SEND_MMS_ACTION , null , <nl> + context , SendReceiveService . class ) ; <nl> + } else { <nl> + DatabaseFactory . getSmsDatabase ( context ) . markAsSending ( messageId ) ; <nl> + intent = new Intent ( SendReceiveService . SEND_SMS_ACTION , null , <nl> + context , SendReceiveService . class ) ; <nl> + } <nl> + intent . putExtra ( "" message_id "" , messageId ) ; <nl> + context . startService ( intent ) ; <nl> + } <nl> + <nl> private static void sendMms ( Context context , Recipients recipients , MasterSecret masterSecret , <nl> SendReq sendRequest , long threadId , int distributionType , boolean secure ) <nl> throws MmsException <nl>",Allow to resend a failed message,04eafd5fab529f336d75e4740918bda3763baa95,Missing Why,,,,﻿﻿llustrate Function,,,,,
36781,"mmm a / microbench / pom . xml <nl> ppp b / microbench / pom . xml <nl> <nl> < / plugins > <nl> < / build > <nl> < / profile > <nl> + < profile > <nl> + < id > benchmark - jar < / id > <nl> + < build > <nl> + < plugins > <nl> + < plugin > <nl> + < groupId > org . apache . maven . plugins < / groupId > <nl> + < artifactId > maven - shade - plugin < / artifactId > <nl> + < version > 2 . 2 < / version > <nl> + < executions > <nl> + < execution > <nl> + < phase > package < / phase > <nl> + < goals > <nl> + < goal > shade < / goal > <nl> + < / goals > <nl> + < configuration > <nl> + < finalName > microbenchmarks < / finalName > <nl> + < transformers > <nl> + < transformer implementation = "" org . apache . maven . plugins . shade . resource . ManifestResourceTransformer "" > <nl> + < mainClass > org . openjdk . jmh . Main < / mainClass > <nl> + < / transformer > <nl> + < / transformers > <nl> + < filters > <nl> + < filter > <nl> + < ! - - <nl> + Shading signed JARs will fail without this . <nl> + http : / / stackoverflow . com / questions / 999489 / invalid - signature - file - when - attempting - to - run - a - jar <nl> + - - > <nl> + < artifact > * : * < / artifact > <nl> + < excludes > <nl> + < exclude > META - INF / * . SF < / exclude > <nl> + < exclude > META - INF / * . DSA < / exclude > <nl> + < exclude > META - INF / * . RSA < / exclude > <nl> + < / excludes > <nl> + < / filter > <nl> + < / filters > <nl> + < / configuration > <nl> + < / execution > <nl> + < / executions > <nl> + < / plugin > <nl> + < / plugins > <nl> + < / build > <nl> + < / profile > <nl> < / profiles > <nl> <nl> < dependencies > <nl>",Allow to generate a jmh uber jar to run benchmarks easily from cmdline with different arguments . ( ),8635d88d4de056b82f86af901ff6cc95b37e422b,﻿Describe Objective,,﻿To make improvements,,,Summarize code object change,,Characteristics of changes,,
44751,"mmm a / README . md <nl> ppp b / README . md <nl> The manual schema initial script is in ` https : / / github . com / apache / incubator - shar <nl> please execute it before you first run the example . <nl> <nl> Please make sure master - slave data sync on MySQL is running correctly . Otherwise this example will query empty data from slave . <nl> + <nl> + # # Using docker - compose to config startup environment <nl> + # # # before we use docker compose , please install docker first : https : / / docs . docker . com / compose / install / <nl> + # # # usage is as following : <nl> + 1 . access the docker folder ( cd docker ) <nl> + 2 . launch the environment by docker compose ( docker - compose up - d ) <nl> + 3 . access mysql / etcd / zookeeper as you want <nl> + 4 . if there is conflict on port , just modify the mapper port in docker - compose . yml and then launch docker compose again ( docker - compose up - d ) <nl> + 5 . if you want to stop these environment , use command docker - compose stop <nl> + <nl> + to clean the docker container , you could use docker rm ` docker ps - a - q ` ( be careful ) <nl> + <nl>",add docker compose manual for example .,eaa43ec24be42bd73b320ec3879211c6f11b3c76,Trivial Why,,﻿Text file changes,,﻿Summarize Code Object Change,,﻿Object of change,,,
148291,"mmm a / UVa / SimplyEmirp . java <nl> ppp b / UVa / SimplyEmirp . java <nl> <nl> * 199 is emirp . <nl> * / <nl> <nl> - <nl> / / https : / / uva . onlinejudge . org / index . php ? option = com_onlinejudge & Itemid = 8 & page = show_problem & problem = 1176 <nl> <nl> <nl> - import static java . lang . Integer . parseInt ; <nl> - import static java . lang . System . exit ; <nl> - <nl> - import java . io . BufferedReader ; <nl> - import java . io . IOException ; <nl> - import java . io . InputStreamReader ; <nl> - import java . io . OutputStreamWriter ; <nl> - import java . io . PrintWriter ; <nl> import java . math . BigInteger ; <nl> import java . util . Scanner ; <nl> - import java . util . StringTokenizer ; <nl> <nl> public class SimplyEmirp { <nl> <nl> - static void solve ( ) throws Exception { <nl> - Scanner input = new Scanner ( System . in ) ; <nl> - while ( input . hasNext ( ) ) { <nl> - String inputGiven = input . next ( ) ; <nl> - BigInteger number = new BigInteger ( inputGiven ) ; <nl> - if ( ! number . isProbablePrime ( 10 ) ) { <nl> - System . out . println ( number + "" is not prime . "" ) ; <nl> - } else { <nl> - String numberReversedAsString = new StringBuilder ( number . toString ( ) ) . reverse ( ) . toString ( ) ; <nl> - BigInteger numberReversed = new BigInteger ( numberReversedAsString ) ; <nl> - if ( numberReversed . isProbablePrime ( 10 ) & & numberReversed . compareTo ( number ) ! = 0 ) { <nl> - System . out . println ( number + "" is emirp . "" ) ; <nl> - } else { <nl> - System . out . println ( number + "" is prime . "" ) ; <nl> + static void solve ( ) throws Exception { <nl> + Scanner input = new Scanner ( System . in ) ; <nl> + while ( input . hasNext ( ) ) { <nl> + String inputGiven = input . next ( ) ; <nl> + BigInteger number = new BigInteger ( inputGiven ) ; <nl> + if ( ! number . isProbablePrime ( 10 ) ) { <nl> + System . out . println ( number + "" is not prime . "" ) ; <nl> + } else { <nl> + String numberReversedAsString = new StringBuilder ( <nl> + number . toString ( ) ) . reverse ( ) . toString ( ) ; <nl> + BigInteger numberReversed = new BigInteger ( <nl> + numberReversedAsString ) ; <nl> + if ( numberReversed . isProbablePrime ( 10 ) <nl> + & & numberReversed . compareTo ( number ) ! = 0 ) { <nl> + System . out . println ( number + "" is emirp . "" ) ; <nl> + } else { <nl> + System . out . println ( number + "" is prime . "" ) ; <nl> + } <nl> + } <nl> } <nl> - } <nl> - } <nl> - input . close ( ) ; <nl> - } <nl> - <nl> - static int nextInt ( ) throws IOException { <nl> - return parseInt ( next ( ) ) ; <nl> - } <nl> - <nl> - static String next ( ) throws IOException { <nl> - while ( tok = = null | | ! tok . hasMoreTokens ( ) ) { <nl> - tok = new StringTokenizer ( in . readLine ( ) ) ; <nl> - } <nl> - return tok . nextToken ( ) ; <nl> - } <nl> - <nl> - public static void main ( String [ ] args ) { <nl> - try { <nl> - in = new BufferedReader ( new InputStreamReader ( System . in ) ) ; <nl> - out = new PrintWriter ( new OutputStreamWriter ( System . out ) ) ; <nl> - solve ( ) ; <nl> - in . close ( ) ; <nl> - out . close ( ) ; <nl> - } catch ( Throwable e ) { <nl> - e . printStackTrace ( ) ; <nl> - exit ( 0 ) ; <nl> + input . close ( ) ; <nl> } <nl> - } <nl> - <nl> - static BufferedReader in ; <nl> - static PrintWriter out ; <nl> - static StringTokenizer tok ; <nl> } <nl>",Refactor SimplyEmirp :,992464d4ee2719ad563c21a432cff683f7e2846d,Trivial Why,,﻿Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
211627,"mmm a / guava / src / com / google / common / util / concurrent / ServiceManager . java <nl> ppp b / guava / src / com / google / common / util / concurrent / ServiceManager . java <nl> <nl> import static com . google . common . base . Preconditions . checkArgument ; <nl> import static com . google . common . base . Preconditions . checkNotNull ; <nl> import static com . google . common . base . Preconditions . checkState ; <nl> + import static com . google . common . base . Predicates . instanceOf ; <nl> + import static com . google . common . base . Predicates . not ; <nl> import static java . util . concurrent . TimeUnit . MILLISECONDS ; <nl> <nl> import com . google . common . annotations . Beta ; <nl> import com . google . common . base . Function ; <nl> import com . google . common . base . Objects ; <nl> import com . google . common . base . Stopwatch ; <nl> + import com . google . common . collect . Collections2 ; <nl> import com . google . common . collect . ImmutableList ; <nl> import com . google . common . collect . ImmutableMap ; <nl> import com . google . common . collect . ImmutableMultimap ; <nl> <nl> * / <nl> public ServiceManager ( Iterable < ? extends Service > services ) { <nl> ImmutableList < Service > copy = ImmutableList . copyOf ( services ) ; <nl> + if ( copy . isEmpty ( ) ) { <nl> + / / Having no services causes the manager to behave strangely . Notably , listeners are never <nl> + / / fired . To avoid this we substitute a placeholder service . <nl> + logger . log ( Level . WARNING , <nl> + "" ServiceManager configured with no services . Is your application configured properly ? "" , <nl> + new EmptyServiceManagerWarning ( ) ) ; <nl> + copy = ImmutableList . < Service > of ( new NoOpService ( ) ) ; <nl> + } <nl> this . state = new ServiceManagerState ( copy . size ( ) ) ; <nl> ImmutableMap . Builder < Service , ServiceListener > builder = ImmutableMap . builder ( ) ; <nl> Executor executor = MoreExecutors . sameThreadExecutor ( ) ; <nl> public boolean isHealthy ( ) { <nl> public ImmutableMultimap < State , Service > servicesByState ( ) { <nl> ImmutableMultimap . Builder < State , Service > builder = ImmutableMultimap . builder ( ) ; <nl> for ( Service service : services . keySet ( ) ) { <nl> - builder . put ( service . state ( ) , service ) ; <nl> + if ( ! ( service instanceof NoOpService ) ) { <nl> + builder . put ( service . state ( ) , service ) ; <nl> + } <nl> } <nl> return builder . build ( ) ; <nl> } <nl> public boolean isHealthy ( ) { <nl> for ( Map . Entry < Service , ServiceListener > entry : services . entrySet ( ) ) { <nl> Service service = entry . getKey ( ) ; <nl> State state = service . state ( ) ; <nl> - if ( state ! = State . NEW & state ! = State . STARTING ) { <nl> + if ( state ! = State . NEW & state ! = State . STARTING & ! ( service instanceof NoOpService ) ) { <nl> loadTimes . add ( Maps . immutableEntry ( service , entry . getValue ( ) . startupTimeMillis ( ) ) ) ; <nl> } <nl> } <nl> public boolean isHealthy ( ) { <nl> <nl> @ Override public String toString ( ) { <nl> return Objects . toStringHelper ( ServiceManager . class ) <nl> - . add ( "" services "" , services . keySet ( ) ) <nl> + . add ( "" services "" , Collections2 . filter ( services . keySet ( ) , not ( instanceOf ( NoOpService . class ) ) ) ) <nl> . toString ( ) ; <nl> } <nl> <nl> private void executeListeners ( ) { <nl> } <nl> <nl> @ Override public void terminated ( State from ) { <nl> - logger . log ( Level . FINE , "" Service { 0 } has terminated . Previous state was : { 1 } "" , <nl> - new Object [ ] { service , from } ) ; <nl> + if ( ! ( service instanceof NoOpService ) ) { <nl> + logger . log ( Level . FINE , "" Service { 0 } has terminated . Previous state was : { 1 } "" , <nl> + new Object [ ] { service , from } ) ; <nl> + } <nl> state . monitor . enter ( ) ; <nl> try { <nl> if ( from = = State . NEW ) { <nl> private void executeListeners ( ) { <nl> void finishedStarting ( boolean currentlyHealthy ) { <nl> synchronized ( watch ) { <nl> watch . stop ( ) ; <nl> - logger . log ( Level . FINE , "" Started { 0 } in { 1 } ms . "" , <nl> - new Object [ ] { service , startupTimeMillis ( ) } ) ; <nl> + if ( ! ( service instanceof NoOpService ) ) { <nl> + logger . log ( Level . FINE , "" Started { 0 } in { 1 } ms . "" , <nl> + new Object [ ] { service , startupTimeMillis ( ) } ) ; <nl> + } <nl> } <nl> state . serviceFinishedStarting ( service , currentlyHealthy ) ; <nl> } <nl> void startTimer ( ) { <nl> synchronized ( watch ) { <nl> if ( ! watch . isRunning ( ) ) { / / only start the watch once . <nl> watch . start ( ) ; <nl> - logger . log ( Level . FINE , "" Starting { 0 } . "" , service ) ; <nl> + if ( ! ( service instanceof NoOpService ) ) { <nl> + logger . log ( Level . FINE , "" Starting { 0 } . "" , service ) ; <nl> + } <nl> } <nl> } <nl> } <nl> void execute ( Runnable runnable ) { <nl> } <nl> } <nl> } <nl> + <nl> + / * * <nl> + * A { @ link Service } instance that does nothing . This is only useful as a placeholder to <nl> + * ensure that the { @ link ServiceManager } functions properly even when it is managing no services . <nl> + * <nl> + * < p > The use of this class is considered an implementation detail of the class and as such it is <nl> + * excluded from { @ link # servicesByState } , { @ link # startupTimes } , { @ link # toString } and all <nl> + * logging statements . <nl> + * / <nl> + private static final class NoOpService extends AbstractService { <nl> + @ Override protected void doStart ( ) { notifyStarted ( ) ; } <nl> + @ Override protected void doStop ( ) { notifyStopped ( ) ; } <nl> + } <nl> + <nl> + / * * This is never thrown but only used for logging . * / <nl> + private static final class EmptyServiceManagerWarning extends Throwable { } <nl> } <nl>","Automated g4 rollback of changelist 42665747.
*** Reason for rollback ***

All the broke tests have been fixed... i think.

*** Original change description ***

Automated g4 rollback of changelist 42655638.

*** Reason for rollback ***

Broke tests relying on previous empty service manager behavior.

*** Original change description ***

Provide a potentially more reasonable behavior for an empty ServiceManager. This is a situation that typically only arises in testing situations (but could theoretically happen w

... description truncated by g4 rollback ...
-------------
Created by MOE: http://code.google.com/p/moe-java
MOE_MIGRATED_REVID=43389638
",50a7e39a635b6e60332810eb286c4967c3849a4a,﻿Describe Objective,,﻿To make improvements,,"Summarize Code Object Change


",,Change list,,,
42184,"mmm a / modules / elasticsearch / src / main / java / org / elasticsearch / index / shard / recovery / RecoverySource . java <nl> ppp b / modules / elasticsearch / src / main / java / org / elasticsearch / index / shard / recovery / RecoverySource . java <nl> <nl> this . translogBatchSize = componentSettings . getAsInt ( "" translog_batch_size "" , 100 ) ; <nl> this . compress = componentSettings . getAsBoolean ( "" compress "" , true ) ; <nl> <nl> - logger . debug ( "" using file_chunk_size [ { } ] , translog_batch_size [ { } ] , and compress [ { } ] "" , fileChunkSize , translogBatchSize , compress ) ; <nl> + logger . debug ( "" using concurrent_streams [ { } ] , file_chunk_size [ { } ] , translog_batch_size [ { } ] , and compress [ { } ] "" , concurrentStreams , fileChunkSize , translogBatchSize , compress ) ; <nl> <nl> transportService . registerHandler ( Actions . START_RECOVERY , new StartRecoveryTransportRequestHandler ( ) ) ; <nl> } <nl>",add log message on hte concurrent streams used,d0eed79175023c208d1dfed5d9b18c3245baaa86,Missing Why,,,,﻿Summarize Code Object Change,,Object of change,,,
288506,"mmm a / sharding - core / src / main / java / io / shardingsphere / core / executor / sql / prepare / SQLExecutePrepareTemplate . java <nl> ppp b / sharding - core / src / main / java / io / shardingsphere / core / executor / sql / prepare / SQLExecutePrepareTemplate . java <nl> <nl> package io . shardingsphere . core . executor . sql . prepare ; <nl> <nl> import com . google . common . collect . Lists ; <nl> + import io . shardingsphere . core . constant . ConnectionMode ; <nl> import io . shardingsphere . core . executor . ShardingExecuteGroup ; <nl> import io . shardingsphere . core . executor . sql . SQLExecuteUnit ; <nl> import io . shardingsphere . core . routing . RouteUnit ; <nl> <nl> * <nl> * @ author zhaojun <nl> * @ author zhangliang <nl> + * @ author panjuan <nl> * / <nl> @ RequiredArgsConstructor <nl> public final class SQLExecutePrepareTemplate { <nl> <nl> private ShardingExecuteGroup < SQLExecuteUnit > getSQLExecuteGroup ( <nl> final Connection connection , final String dataSourceName , final List < SQLUnit > sqlUnitGroup , final SQLExecutePrepareCallback callback ) throws SQLException { <nl> List < SQLExecuteUnit > result = new LinkedList < > ( ) ; <nl> + ConnectionMode connectionMode = 1 = = sqlUnitGroup . size ( ) ? ConnectionMode . MEMORY_STRICTLY : ConnectionMode . CONNECTION_STRICTLY ; <nl> for ( SQLUnit each : sqlUnitGroup ) { <nl> - result . add ( callback . createSQLExecuteUnit ( connection , new RouteUnit ( dataSourceName , each ) ) ) ; <nl> + result . add ( callback . createSQLExecuteUnit ( connection , new RouteUnit ( dataSourceName , each ) , connectionMode ) ) ; <nl> } <nl> return new ShardingExecuteGroup < > ( result ) ; <nl> } <nl> } <nl> + <nl>",modify getSQLExecuteGroup ( ),93f8b588ef2611e0028a54f53348b8a0623d822e,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
279554,"mmm a / compiler / src / org . graalvm . compiler . nodes / src / org / graalvm / compiler / nodes / GraphDecoder . java <nl> ppp b / compiler / src / org . graalvm . compiler . nodes / src / org / graalvm / compiler / nodes / GraphDecoder . java <nl> protected LoopScope processNextNode ( MethodScope methodScope , LoopScope loopScope <nl> assert node . getNodeClass ( ) = = methodScope . encodedGraph . getNodeClasses ( ) [ typeId ] ; <nl> makeFixedNodeInputs ( methodScope , loopScope , node ) ; <nl> readProperties ( methodScope , node ) ; <nl> + <nl> + if ( node instanceof IntegerSwitchNode & & ( ( IntegerSwitchNode ) node ) . value ( ) . isConstant ( ) ) { <nl> + IntegerSwitchNode switchNode = ( IntegerSwitchNode ) node ; <nl> + int value = switchNode . value ( ) . asJavaConstant ( ) . asInt ( ) ; <nl> + int survivingIndex = switchNode . successorIndexAtKey ( value ) ; <nl> + AbstractBeginNode survivingSuccessor = null ; <nl> + Edges edges = node . getNodeClass ( ) . getSuccessorEdges ( ) ; <nl> + <nl> + / / TODO : encode the graph so that we can directly skip to survivingIndex . <nl> + for ( int index = 0 ; index < edges . getDirectCount ( ) ; index + + ) { <nl> + readOrderId ( methodScope ) ; <nl> + } <nl> + for ( int index = edges . getDirectCount ( ) ; index < edges . getCount ( ) ; index + + ) { <nl> + int size = methodScope . reader . getSVInt ( ) ; <nl> + if ( size ! = - 1 ) { <nl> + NodeList < Node > nodeList = new NodeSuccessorList < > ( node , size ) ; <nl> + edges . initializeList ( node , index , nodeList ) ; <nl> + for ( int idx = 0 ; idx < size ; idx + + ) { <nl> + int orderId = readOrderId ( methodScope ) ; <nl> + if ( survivingIndex = = idx ) { <nl> + survivingSuccessor = ( AbstractBeginNode ) makeStubNode ( methodScope , loopScope , orderId ) ; <nl> + } <nl> + } <nl> + } <nl> + } <nl> + <nl> + graph . removeSplit ( switchNode , survivingSuccessor ) ; <nl> + return loopScope ; <nl> + } <nl> + <nl> makeSuccessorStubs ( methodScope , successorAddScope , node , updatePredecessors ) ; <nl> <nl> LoopScope resultScope = loopScope ; <nl> protected void makeSuccessorStubs ( MethodScope methodScope , LoopScope loopScope , <nl> edges . initializeList ( node , index , nodeList ) ; <nl> for ( int idx = 0 ; idx < size ; idx + + ) { <nl> int orderId = readOrderId ( methodScope ) ; <nl> - Node value = makeStubNode ( methodScope , loopScope , orderId ) ; <nl> + Node value = null ; <nl> + value = makeStubNode ( methodScope , loopScope , orderId ) ; <nl> nodeList . initialize ( idx , value ) ; <nl> if ( updatePredecessors & & value ! = null ) { <nl> edges . update ( node , null , value ) ; <nl> mmm a / compiler / src / org . graalvm . compiler . nodes / src / org / graalvm / compiler / nodes / SimplifyingGraphDecoder . java <nl> ppp b / compiler / src / org . graalvm . compiler . nodes / src / org / graalvm / compiler / nodes / SimplifyingGraphDecoder . java <nl> protected Node canonicalizeFixedNode ( MethodScope methodScope , Node node ) { <nl> } else if ( node instanceof ArrayLengthNode ) { <nl> ArrayLengthNode arrayLengthNode = ( ArrayLengthNode ) node ; <nl> return arrayLengthNode . canonical ( canonicalizerTool ) ; <nl> - } else if ( node instanceof IntegerSwitchNode & & ( ( IntegerSwitchNode ) node ) . value ( ) . isConstant ( ) ) { <nl> - IntegerSwitchNode switchNode = ( IntegerSwitchNode ) node ; <nl> - int value = switchNode . value ( ) . asJavaConstant ( ) . asInt ( ) ; <nl> - AbstractBeginNode survivingSuccessor = switchNode . successorAtKey ( value ) ; <nl> - List < Node > allSuccessors = switchNode . successors ( ) . snapshot ( ) ; <nl> - <nl> - graph . removeSplit ( switchNode , survivingSuccessor ) ; <nl> - for ( Node successor : allSuccessors ) { <nl> - if ( successor ! = survivingSuccessor ) { <nl> - assert ( ( AbstractBeginNode ) successor ) . next ( ) = = null : "" must not be parsed yet "" ; <nl> - successor . safeDelete ( ) ; <nl> - } <nl> - } <nl> - return node ; <nl> } else if ( node instanceof Canonicalizable ) { <nl> return ( ( Canonicalizable ) node ) . canonical ( canonicalizerTool ) ; <nl> } else { <nl>",Avoid making stubs for dead switch successors,efdfd046c625de77b3080d99564c927275c188cd,﻿Illustrate Requirement,,﻿Usage need,,Illustrate Function,,,,,
13639,mmm a / bin / connect - distributed . sh <nl> ppp b / bin / connect - distributed . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / connect - mirror - maker . sh <nl> ppp b / bin / connect - mirror - maker . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / connect - standalone . sh <nl> ppp b / bin / connect - standalone . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / kafka - server - stop . sh <nl> ppp b / bin / kafka - server - stop . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / trogdor . sh <nl> ppp b / bin / trogdor . sh <nl> <nl> - # ! / usr / bin / env bash <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / zookeeper - server - stop . sh <nl> ppp b / bin / zookeeper - server - stop . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl> mmm a / bin / zookeeper - shell . sh <nl> ppp b / bin / zookeeper - shell . sh <nl> <nl> - # ! / bin / sh <nl> + # ! / bin / bash <nl> # Licensed to the Apache Software Foundation ( ASF ) under one or more <nl> # contributor license agreements . See the NOTICE file distributed with <nl> # this work for additional information regarding copyright ownership . <nl>,KAFKA - 10018 : Change command line tools from / bin / sh to / bin / bash ( ),2c1096cb0edb73c052c3517da82deaf3725d13b6,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
24082,"mmm a / src / main / java / com / alibaba / druid / filter / FilterChainImpl . java <nl> ppp b / src / main / java / com / alibaba / druid / filter / FilterChainImpl . java <nl> public ConnectionProxy connection_connect ( Properties info ) throws SQLException { <nl> String url = dataSource . getRawJdbcUrl ( ) ; <nl> <nl> Connection nativeConnection = driver . connect ( url , info ) ; <nl> - return wrap ( nativeConnection , info ) ; <nl> + <nl> + if ( nativeConnection = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new ConnectionProxyImpl ( dataSource , nativeConnection , info , dataSource . createConnectionId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public StatementProxy connection_createStatement ( ConnectionProxy connection ) thr <nl> } <nl> <nl> Statement statement = connection . getRawObject ( ) . createStatement ( ) ; <nl> - return wrap ( connection , statement ) ; <nl> + <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new StatementProxyImpl ( connection , statement , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public StatementProxy connection_createStatement ( ConnectionProxy connection , int <nl> } <nl> <nl> Statement statement = connection . getRawObject ( ) . createStatement ( resultSetType , resultSetConcurrency ) ; <nl> - return wrap ( connection , statement ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new StatementProxyImpl ( connection , statement , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public StatementProxy connection_createStatement ( ConnectionProxy connection , int <nl> <nl> Statement statement = connection . getRawObject ( ) . createStatement ( resultSetType , resultSetConcurrency , <nl> resultSetHoldability ) ; <nl> - return wrap ( connection , statement ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new StatementProxyImpl ( connection , statement , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public CallableStatementProxy connection_prepareCall ( ConnectionProxy connection , <nl> } <nl> <nl> CallableStatement statement = connection . getRawObject ( ) . prepareCall ( sql ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new CallableStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public CallableStatementProxy connection_prepareCall ( ConnectionProxy connection , <nl> } <nl> <nl> CallableStatement statement = connection . getRawObject ( ) . prepareCall ( sql , resultSetType , resultSetConcurrency ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new CallableStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public CallableStatementProxy connection_prepareCall ( ConnectionProxy connection , <nl> <nl> CallableStatement statement = connection . getRawObject ( ) . prepareCall ( sql , resultSetType , resultSetConcurrency , <nl> resultSetHoldability ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + return new CallableStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> } <nl> <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> } <nl> <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql , autoGeneratedKeys ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql , resultSetType , <nl> resultSetConcurrency ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql , resultSetType , <nl> resultSetConcurrency , <nl> resultSetHoldability ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> } <nl> <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql , columnIndexes ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public PreparedStatementProxy connection_prepareStatement ( ConnectionProxy connec <nl> } <nl> <nl> PreparedStatement statement = connection . getRawObject ( ) . prepareStatement ( sql , columnNames ) ; <nl> - return wrap ( connection , statement , sql ) ; <nl> + if ( statement = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new PreparedStatementProxyImpl ( connection , statement , sql , dataSource . createStatementId ( ) ) ; <nl> } <nl> <nl> @ Override <nl> public ResultSetMetaData resultSet_getMetaData ( ResultSetProxy resultSet ) throws <nl> if ( this . pos < filterSize ) { <nl> return nextFilter ( ) . resultSet_getMetaData ( this , resultSet ) ; <nl> } <nl> - return wrap ( resultSet . getResultSetRaw ( ) . getMetaData ( ) , resultSet ) ; <nl> + <nl> + ResultSetMetaData metaData = resultSet . getResultSetRaw ( ) . getMetaData ( ) ; <nl> + if ( metaData = = null ) { <nl> + return null ; <nl> + } <nl> + <nl> + return new ResultSetMetaDataProxyImpl ( metaData , dataSource . createMetaDataId ( ) , resultSet ) ; <nl> } <nl> <nl> @ Override <nl> public Object resultSet_getObject ( ResultSetProxy resultSet , int columnIndex ) thr <nl> Object obj = resultSet . getResultSetRaw ( ) . getObject ( columnIndex ) ; <nl> <nl> if ( obj instanceof ResultSet ) { <nl> - return wrap ( resultSet . getStatementProxy ( ) , ( ResultSet ) obj ) ; <nl> + StatementProxy statement = resultSet . getStatementProxy ( ) ; <nl> + return new ResultSetProxyImpl ( statement , ( ResultSet ) obj , dataSource . createResultSetId ( ) , <nl> + statement . getLastExecuteSql ( ) ) ; <nl> } <nl> <nl> if ( obj instanceof Clob ) { <nl> public Object resultSet_getObject ( ResultSetProxy resultSet , String columnLabel ) <nl> Object obj = resultSet . getResultSetRaw ( ) . getObject ( columnLabel ) ; <nl> <nl> if ( obj instanceof ResultSet ) { <nl> - return wrap ( resultSet . getStatementProxy ( ) , ( ResultSet ) obj ) ; <nl> + StatementProxy statement = resultSet . getStatementProxy ( ) ; <nl> + return new ResultSetProxyImpl ( statement , ( ResultSet ) obj , dataSource . createResultSetId ( ) , <nl> + statement . getLastExecuteSql ( ) ) ; <nl> } <nl> <nl> if ( obj instanceof Clob ) { <nl> public ",refactor & bug fixed .,450f6bdd4b6fab2dcc42009d9c0397cca99accbc,Trivial Why,,﻿Code refactoring,,,Missing What,,,,
352996,"mmm a / rxjava - contrib / rxjava - debug / src / main / java / rx / operators / DebugSubscriber . java <nl> ppp b / rxjava - contrib / rxjava - debug / src / main / java / rx / operators / DebugSubscriber . java <nl> <nl> private final Func1 < T , T > onNextHook ; <nl> final Action1 < DebugNotification > events ; <nl> final Observer < ? super T > o ; <nl> - Operator < T , ? > from = null ; <nl> - Operator < ? , T > to = null ; <nl> + Operator < ? extends T , ? > from = null ; <nl> + Operator < ? , ? super T > to = null ; <nl> <nl> public DebugSubscriber ( <nl> Func1 < T , T > onNextHook , <nl> Action1 < DebugNotification > _events , <nl> Subscriber < ? super T > _o , <nl> - Operator < T , ? > _out , <nl> - Operator < ? , T > _in ) { <nl> + Operator < ? extends T , ? > _out , <nl> + Operator < ? , ? super T > _in ) { <nl> super ( _o ) ; <nl> this . events = _events ; <nl> this . o = _o ; <nl> public void onNext ( T t ) { <nl> o . onNext ( onNextHook . call ( t ) ) ; <nl> } <nl> <nl> - public Operator < T , ? > getFrom ( ) { <nl> + public Operator < ? extends T , ? > getFrom ( ) { <nl> return from ; <nl> } <nl> <nl> - public void setFrom ( Operator < T , ? > op ) { <nl> - this . from = op ; <nl> + public void setFrom ( Operator < ? extends T , ? > bind ) { <nl> + this . from = bind ; <nl> } <nl> <nl> - public Operator < ? , T > getTo ( ) { <nl> + public Operator < ? , ? super T > getTo ( ) { <nl> return to ; <nl> } <nl> <nl> - public void setTo ( Operator < ? , T > op ) { <nl> + public void setTo ( Operator < ? , ? super T > op ) { <nl> this . to = op ; <nl> } <nl> <nl> mmm a / rxjava - contrib / rxjava - debug / src / main / java / rx / plugins / DebugHook . java <nl> ppp b / rxjava - contrib / rxjava - debug / src / main / java / rx / plugins / DebugHook . java <nl> public void call ( Subscriber < ? super T > o ) { <nl> } <nl> <nl> @ Override <nl> - public < T , R > Operator < R , T > onLift ( final Operator < R , T > bind ) { <nl> + public < T , R > Operator < ? extends R , ? super T > onLift ( final Operator < ? extends R , ? super T > bind ) { <nl> return new Operator < R , T > ( ) { <nl> @ Override <nl> public Subscriber < ? super T > call ( final Subscriber < ? super R > o ) { <nl> public void call ( Subscriber < ? super T > o ) { <nl> } <nl> <nl> @ SuppressWarnings ( "" unchecked "" ) <nl> - private < R > Subscriber < ? super R > wrapOutbound ( Operator < R , ? > bind , Subscriber < ? super R > o ) { <nl> + private < R > Subscriber < ? super R > wrapOutbound ( Operator < ? extends R , ? > bind , Subscriber < ? super R > o ) { <nl> if ( o instanceof DebugSubscriber ) { <nl> if ( bind ! = null ) <nl> ( ( DebugSubscriber < R > ) o ) . setFrom ( bind ) ; <nl> public void call ( Subscriber < ? super T > o ) { <nl> } <nl> <nl> @ SuppressWarnings ( "" unchecked "" ) <nl> - private < T > Subscriber < ? super T > wrapInbound ( Operator < ? , T > bind , Subscriber < ? super T > o ) { <nl> + private < T > Subscriber < ? super T > wrapInbound ( Operator < ? , ? super T > bind , Subscriber < ? super T > o ) { <nl> if ( o instanceof DebugSubscriber ) { <nl> if ( bind ! = null ) <nl> ( ( DebugSubscriber < T > ) o ) . setTo ( bind ) ; <nl> mmm a / rxjava - contrib / rxjava - debug / src / main / java / rx / plugins / DebugNotification . java <nl> ppp b / rxjava - contrib / rxjava - debug / src / main / java / rx / plugins / DebugNotification . java <nl> <nl> } <nl> <nl> private final OnSubscribe < T > source ; <nl> - private final Operator < T , ? > from ; <nl> + private final Operator < ? extends T , ? > from ; <nl> private final Kind kind ; <nl> private final Notification < T > notification ; <nl> - private final Operator < ? , T > to ; <nl> + private final Operator < ? , ? super T > to ; <nl> private final long nanoTime ; <nl> private final long threadId ; <nl> private Observer o ; <nl> <nl> public static < T > DebugNotification < T > createSubscribe ( Observer < ? super T > o , OnSubscribe < T > source ) { <nl> - Operator < ? , T > to = null ; <nl> - Operator < T , ? > from = null ; <nl> + Operator < ? , ? super T > to = null ; <nl> + Operator < ? extends T , ? > from = null ; <nl> if ( o instanceof DebugSubscriber ) { <nl> to = ( ( DebugSubscriber < T > ) o ) . getTo ( ) ; <nl> from = ( ( DebugSubscriber < T > ) o ) . getFrom ( ) ; <nl> <nl> return new DebugNotification < T > ( o , from , Kind . Subscribe , null , to , source ) ; <nl> } <nl> <nl> - public static < T > DebugNotification < T > createOnNext ( Observer < ? super T > o , Operator < T , ? > from , T t , Operator < ? , T > to ) { <nl> + public static < T > DebugNotification < T > createOnNext ( Observer < ? super T > o , Operator < ? extends T , ? > from , T t , Operator < ? , ? super T > to ) { <nl> return new DebugNotification < T > ( o , from , Kind . OnNext , Notification . createOnNext ( t ) , to , null ) ; <nl> } <nl> <nl> - public static < T > DebugNotification < T > createOnError ( Observer < ? super T > o , Operator < T , ? > from , Throwable e , Operator < ? , T > to ) { <nl> + public static < T > DebugNotification < T > createOnError ( Observer < ? super T > o , Operator < ? extends T , ? > from , Throwable e , Operator < ? , ? super T > to ) { <nl> return new DebugNotification < T > ( o , from , Kind . OnError , Notification . < T > createOnError ( e ) , to , null ) ; <nl> } <nl> <nl> - public static < T > DebugNotification < T > createOnCompleted ( Observer < ? super T > o , Operator < T , ? > from , Operator < ? , T > to ) { <nl> + public static < T > DebugNotification < T > createOnCompleted ( Observer < ? super T > o , Operator < ? extends T , ? > from , Operator < ? , ? super T > to ) { <nl> return new DebugNotification < T > ( o , from , Kind . OnCompleted , Notification . < T > createOnCompleted ( ) , to , null ) ; <nl> } <nl> <nl> - public static < T > DebugNotification < T > createUnsubscribe ( Observer < ? super T > o , Operator < T , ? > from , Operator < ? , T > to ) { <nl> + public static < T > DebugNotification < T > createUnsubscribe ( Observer < ? super T > o , Operator < ? extends T , ? > from , Operator < ? , ? super T > to ) { <nl> return new DebugNotification < T > ( o , from , Kind . Unsubscribe , null , to , null ) ; <nl> } <nl> <nl> - private DebugNotification ( Observer o , Operator < T , ? > from , Kind kind , Notification < T > notification , Operator < ? , T > to , OnSubscribe < T > source ) { <nl> + private DebugNotification ( Observer o , Operator < ? extends T , ? > from , Kind kind , Notification < T > notification , Operator < ? , ? super T > to , OnSubscribe < T > source ) { <nl> this . o = ( o instanceof SafeSubscriber ) ? ( ( SafeSubscriber ) o ) . getActual ( ) : o ; <nl> this . from = from ; <nl> this . kind = kind ; <nl> private DebugNotification ( Observer o , Operator < T , ? > from , Kind kind , Notificati <nl> this . threadId = Thread . currentThread ( ) . getId ( ) ; <nl> } <nl> <nl> - public Operator < T , ? > getFrom ( ) { <nl> + public Operator < ? extends T , ? > getFrom ( ) { <nl> return from ; <nl> } <nl> <nl> private DebugNotification ( Observer o , Operator < T , ? > from , Kind kind , Notificati <nl> return notification ; <nl> } <nl> <nl> - public Operator < ? , T > getTo ( ) { <nl> + public Operator < ? , ? super T > getTo ( ) { <nl> return to ; <nl> } <nl> <nl> deleted file mode 100644 <nl> index 000e741b78 . . 0000000000 <nl> mmm a / rxjava - contrib / rxjava - debug / src / main / java / rx / plugins / NotificationEvent . java <nl> ppp / dev / null <nl> <nl> - package rx . plugins ; <nl> - <nl> - import rx . Notification ; <nl> - import rx . Observable . OnSubscribe ; <nl> - import rx . Observable . Operator ; <nl> - import rx . Observer ; <nl> - import rx . observers . SafeSubscriber ; <nl> - import rx . operators . DebugSubscriber ; <nl> - <nl> - public class NotificationEvent < T > { <nl> - public static enum Kind { <nl> - OnNext , OnError , OnCompleted , Subscribe , Unsubscribe <nl> - } <nl> - <nl> - private final OnSubscribe < T > source ; <nl> - private final Operator < T , ? > from ; <nl> - private final Kind kind ; <nl> - private final Notification < T > notification ; <nl> - private final Operator < ? , T > t",Fixing the generics for merge and lift,98e75c2044a97166ca7e96ca9ce16055c07eaab6,,Describe Objective,,To fix defects,﻿Summarize Code Object Change,,﻿Object of change,,,
124549,"mmm a / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / java / com / dangdang / ddframe / rdb / sharding / example / jdbc / Main . java <nl> ppp b / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / java / com / dangdang / ddframe / rdb / sharding / example / jdbc / Main . java <nl> <nl> public class Main { <nl> public static void main ( final String [ ] args ) { <nl> / / CHECKSTYLE : ON <nl> - ApplicationContext applicationContext = new ClassPathXmlApplicationContext ( "" META - INF / mybatisContext . xml "" ) ; <nl> + ApplicationContext applicationContext = new ClassPathXmlApplicationContext ( "" META - INF / mybatis / mysql / mybatisContext . xml "" ) ; <nl> OrderService orderService = applicationContext . getBean ( OrderService . class ) ; <nl> orderService . clear ( ) ; <nl> orderService . fooService ( ) ; <nl> mmm a / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / mappers / OrderMapper . xml <nl> ppp b / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / mappers / OrderMapper . xml <nl> <nl> < / sql > <nl> <nl> < insert id = "" insert "" useGeneratedKeys = "" true "" keyProperty = "" orderId "" > <nl> - INSERT INTO ` t_order ` ( <nl> + INSERT INTO t_order ( <nl> user_id , status <nl> ) <nl> VALUES ( <nl> <nl> < / insert > <nl> <nl> < update id = "" update "" > <nl> - UPDATE ` t_order ` <nl> - SET ` status ` = ' UPDATED ' <nl> - WHERE ` user_id ` in <nl> + UPDATE t_order <nl> + SET status = ' UPDATED ' <nl> + WHERE user_id in <nl> < foreach item = "" item "" index = "" index "" collection = "" list "" open = "" ( "" separator = "" , "" close = "" ) "" > <nl> # { item } <nl> < / foreach > <nl> < / update > <nl> <nl> < delete id = "" deleteAll "" > <nl> - DELETE FROM ` t_order ` <nl> + DELETE FROM t_order <nl> < / delete > <nl> <nl> < select id = "" selectAll "" resultMap = "" baseResultMap "" > <nl> SELECT <nl> < include refid = "" baseColumnList "" / > <nl> - FROM ` t_order ` <nl> + FROM t_order <nl> < / select > <nl> < / mapper > <nl> similarity index 100 % <nl> rename from sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatisContext . xml <nl> rename to sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / mysql / mybatisContext . xml <nl> similarity index 100 % <nl> rename from sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / shardingContext . xml <nl> rename to sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / mysql / shardingContext . xml <nl> new file mode 100644 <nl> index 00000000000 . . e90942269c5 <nl> mmm / dev / null <nl> ppp b / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / postgresql / mybatisContext . xml <nl> <nl> + < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> + < beans xmlns = "" http : / / www . springframework . org / schema / beans "" <nl> + xmlns : xsi = "" http : / / www . w3 . org / 2001 / XMLSchema - instance "" <nl> + xsi : schemaLocation = "" http : / / www . springframework . org / schema / beans <nl> + http : / / www . springframework . org / schema / beans / spring - beans . xsd <nl> + "" > <nl> + < import resource = "" shardingContext . xml "" / > <nl> + <nl> + < bean id = "" sqlSessionFactory "" class = "" org . mybatis . spring . SqlSessionFactoryBean "" > <nl> + < property name = "" dataSource "" ref = "" shardingDataSource "" / > <nl> + < property name = "" mapperLocations "" value = "" classpath * : META - INF / mybatis / mappers / OrderMapper . xml "" / > <nl> + < / bean > <nl> + <nl> + < bean class = "" org . mybatis . spring . mapper . MapperScannerConfigurer "" > <nl> + < property name = "" basePackage "" value = "" com . dangdang . ddframe . rdb . sharding . example . jdbc "" / > <nl> + < property name = "" sqlSessionFactoryBeanName "" value = "" sqlSessionFactory "" / > <nl> + < / bean > <nl> + < / beans > <nl> new file mode 100644 <nl> index 00000000000 . . c403bea73f0 <nl> mmm / dev / null <nl> ppp b / sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / mybatis / postgresql / shardingContext . xml <nl> <nl> + < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> + < beans xmlns = "" http : / / www . springframework . org / schema / beans "" <nl> + xmlns : xsi = "" http : / / www . w3 . org / 2001 / XMLSchema - instance "" <nl> + xmlns : context = "" http : / / www . springframework . org / schema / context "" <nl> + xmlns : tx = "" http : / / www . springframework . org / schema / tx "" <nl> + xmlns : rdb = "" http : / / www . dangdang . com / schema / ddframe / rdb "" <nl> + xsi : schemaLocation = "" http : / / www . springframework . org / schema / beans <nl> + http : / / www . springframework . org / schema / beans / spring - beans . xsd <nl> + http : / / www . springframework . org / schema / tx <nl> + http : / / www . springframework . org / schema / tx / spring - tx . xsd <nl> + http : / / www . springframework . org / schema / context <nl> + http : / / www . springframework . org / schema / context / spring - context . xsd <nl> + http : / / www . dangdang . com / schema / ddframe / rdb <nl> + http : / / www . dangdang . com / schema / ddframe / rdb / rdb . xsd "" > <nl> + < context : component - scan base - package = "" com . dangdang . ddframe . rdb . sharding . example . jdbc "" / > <nl> + <nl> + < bean id = "" ds_0 "" class = "" org . apache . commons . dbcp . BasicDataSource "" destroy - method = "" close "" > <nl> + < property name = "" driverClassName "" value = "" org . postgresql . Driver "" / > <nl> + < property name = "" url "" value = "" jdbc : postgresql : / / localhost : 5432 / ds_0 "" / > <nl> + < property name = "" username "" value = "" postgres "" / > <nl> + < property name = "" password "" value = "" "" / > <nl> + < / bean > <nl> + <nl> + < bean id = "" ds_1 "" class = "" org . apache . commons . dbcp . BasicDataSource "" destroy - method = "" close "" > <nl> + < property name = "" driverClassName "" value = "" org . postgresql . Driver "" / > <nl> + < property name = "" url "" value = "" jdbc : postgresql : / / localhost : 5432 / ds_1 "" / > <nl> + < property name = "" username "" value = "" postgres "" / > <nl> + < property name = "" password "" value = "" "" / > <nl> + < / bean > <nl> + <nl> + < rdb : strategy id = "" databaseShardingStrategy "" sharding - columns = "" user_id "" algorithm - class = "" com . dangdang . ddframe . rdb . sharding . example . jdbc . algorithm . SingleKeyModuloDatabaseShardingAlgorithm "" / > <nl> + < rdb : strategy id = "" tableShardingStrategy "" sharding - columns = "" order_id "" algorithm - class = "" com . dangdang . ddframe . rdb . sharding . example . jdbc . algorithm . SingleKeyModuloTableShardingAlgorithm "" / > <nl> + <nl> + < rdb : data - source id = "" shardingDataSource "" > <nl> + < rdb : sharding - rule data - sources = "" ds_0 , ds_1 "" > <nl> + < rdb : table - rules > <nl> + < rdb : table - rule logic - table = "" t_order "" actual - tables = "" t_order_ $ { 0 . . 1 } "" database - strategy = "" databaseShardingStrategy "" table - strategy = "" tableShardingStrategy "" > <nl> + < rdb : generate - key - column column - name = "" order_id "" / > <nl> + < / rdb : table - rule > <nl> + < / rdb : table - rules > <nl> + < / rdb : sharding - rule > <nl> + < / rdb : data - source > <nl> + <nl> + < bean id = "" transactionManager "" class = "" org . springframework . jdbc . datasource . DataSourceTransactionManager "" > <nl> + < property name = "" dataSource "" ref = "" shardingDataSource "" / > <nl> + < / bean > <nl> + < tx : annotation - driven transaction - manager = "" transactionManager "" / > <nl> + < / beans > <nl> similarity index 97 % <nl> rename from sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / all_schema . sql <nl> rename to sharding - jdbc - example / sharding - jdbc - example - mybatis / src / main / resources / META - INF / schema / mysql . sql <nl> mmm a / shar",Add postgresql sample for sharding - jdbc - example - mybatis .,773194371b3d9d3765f2a42917ba27973c70d70d,Imply Necessity,,Relation to implemented feature,,﻿Summarize Code Object Change,,﻿Object of change,,,
250928,"mmm a / py / selenium / webdriver / remote / webelement . py <nl> ppp b / py / selenium / webdriver / remote / webelement . py <nl> def is_local_file ( cls , * keys ) : <nl> if file_path is ' ' : <nl> return None <nl> <nl> - if os . path . exists ( file_path ) : <nl> - return file_path <nl> - else : <nl> - return None <nl> + try : <nl> + if os . path . exists ( file_path ) : <nl> + return file_path <nl> + except : <nl> + pass <nl> + return None <nl> + <nl>",JasonLeyba : Gracefully handle exceptions raised while testing if a string,fc7b049f4fd46e87e07f37e833470df57a793d57,﻿Describe Objective,,﻿To make improvements,,,Summarize code object change,,Characteristics of changes,,
112257,mmm a / spring - boot / src / test / java / org / springframework / boot / context / embedded / AbstractEmbeddedServletContainerFactoryTests . java <nl> ppp b / spring - boot / src / test / java / org / springframework / boot / context / embedded / AbstractEmbeddedServletContainerFactoryTests . java <nl> public void onStartup ( ServletContext servletContext ) <nl> @ Test <nl> public void specificPort ( ) throws Exception { <nl> AbstractEmbeddedServletContainerFactory factory = getFactory ( ) ; <nl> - int specificPort = SocketUtils . findAvailableTcpPort ( 40000 ) ; <nl> + int specificPort = SocketUtils . findAvailableTcpPort ( 41000 ) ; <nl> factory . setPort ( specificPort ) ; <nl> this . container = factory <nl> . getEmbeddedServletContainer ( exampleServletRegistration ( ) ) ; <nl>,Tweak port usage to try and fix Windows CI build,44c122307e968c2aabc4a89d410c804c632246b1,﻿Describe Objective,,﻿To fix defects,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
308090,"new file mode 100644 <nl> index 00000000000 . . 7782fd0479f <nl> mmm / dev / null <nl> ppp b / java - ee - 8 - security - api / app - auth - basic - store - db / pom . xml <nl> <nl> + < ? xml version = "" 1 . 0 "" encoding = "" UTF - 8 "" ? > <nl> + < project xmlns = "" http : / / maven . apache . org / POM / 4 . 0 . 0 "" <nl> + xmlns : xsi = "" http : / / www . w3 . org / 2001 / XMLSchema - instance "" <nl> + xsi : schemaLocation = "" http : / / maven . apache . org / POM / 4 . 0 . 0 http : / / maven . apache . org / xsd / maven - 4 . 0 . 0 . xsd "" > <nl> + < modelVersion > 4 . 0 . 0 < / modelVersion > <nl> + <nl> + < artifactId > app - auth - basic - store - db < / artifactId > <nl> + < packaging > war < / packaging > <nl> + <nl> + < parent > <nl> + < groupId > com . baeldung < / groupId > <nl> + < artifactId > java - ee - 8 - security - api < / artifactId > <nl> + < version > 1 . 0 - SNAPSHOT < / version > <nl> + < / parent > <nl> + <nl> + < properties > <nl> + < h2 - version > 1 . 4 . 197 < / h2 - version > <nl> + < / properties > <nl> + <nl> + < build > <nl> + < plugins > <nl> + < plugin > <nl> + < groupId > net . wasdev . wlp . maven . plugins < / groupId > <nl> + < artifactId > liberty - maven - plugin < / artifactId > <nl> + < executions > <nl> + < execution > <nl> + < id > install - server < / id > <nl> + < phase > prepare - package < / phase > <nl> + < goals > <nl> + < goal > install - server < / goal > <nl> + < goal > create - server < / goal > <nl> + < goal > install - feature < / goal > <nl> + < / goals > <nl> + < / execution > <nl> + < execution > <nl> + < id > install - apps < / id > <nl> + < phase > package < / phase > <nl> + < goals > <nl> + < goal > install - apps < / goal > <nl> + < / goals > <nl> + < / execution > <nl> + < / executions > <nl> + < / plugin > <nl> + < plugin > <nl> + < groupId > org . apache . maven . plugins < / groupId > <nl> + < artifactId > maven - dependency - plugin < / artifactId > <nl> + < executions > <nl> + < execution > <nl> + < id > copy < / id > <nl> + < phase > package < / phase > <nl> + < goals > <nl> + < goal > copy < / goal > <nl> + < / goals > <nl> + < / execution > <nl> + < / executions > <nl> + < configuration > <nl> + < artifactItems > <nl> + < artifactItem > <nl> + < groupId > com . h2database < / groupId > <nl> + < artifactId > h2 < / artifactId > <nl> + < version > $ { h2 - version } < / version > <nl> + < type > jar < / type > <nl> + < outputDirectory > <nl> + $ { project . build . directory } / liberty / wlp / usr / servers / defaultServer / lib / global <nl> + < / outputDirectory > <nl> + < / artifactItem > <nl> + < / artifactItems > <nl> + < / configuration > <nl> + < / plugin > <nl> + < / plugins > <nl> + < / build > <nl> + < / project > <nl> new file mode 100644 <nl> index 00000000000 . . 32adbf1abb4 <nl> mmm / dev / null <nl> ppp b / java - ee - 8 - security - api / app - auth - basic - store - db / src / main / java / com / baeldung / javaee / security / AdminServlet . java <nl> <nl> + package com . baeldung . javaee . security ; <nl> + <nl> + import javax . servlet . ServletException ; <nl> + import javax . servlet . annotation . HttpConstraint ; <nl> + import javax . servlet . annotation . ServletSecurity ; <nl> + import javax . servlet . annotation . WebServlet ; <nl> + import javax . servlet . http . HttpServlet ; <nl> + import javax . servlet . http . HttpServletRequest ; <nl> + import javax . servlet . http . HttpServletResponse ; <nl> + import java . io . IOException ; <nl> + <nl> + @ WebServlet ( "" / admin "" ) <nl> + @ ServletSecurity ( value = @ HttpConstraint ( rolesAllowed = { "" admin_role "" } ) ) <nl> + public class AdminServlet extends HttpServlet { <nl> + <nl> + @ Override <nl> + protected void doGet ( HttpServletRequest request , HttpServletResponse response ) throws ServletException , IOException { <nl> + response . getWriter ( ) . append ( "" User : "" + request . getUserPrincipal ( ) . getName ( ) + "" \ n "" ) ; <nl> + response . getWriter ( ) . append ( "" User in Role user_role : "" + request . isUserInRole ( "" user_role "" ) + "" \ n "" ) ; <nl> + response . getWriter ( ) . append ( "" User in Role admin_role : "" + request . isUserInRole ( "" admin_role "" ) ) ; <nl> + } <nl> + } <nl> \ No newline at end of file <nl> new file mode 100644 <nl> index 00000000000 . . a16d944f5a5 <nl> mmm / dev / null <nl> ppp b / java - ee - 8 - security - api / app - auth - basic - store - db / src / main / java / com / baeldung / javaee / security / AppConfig . java <nl> <nl> + package com . baeldung . javaee . security ; <nl> + <nl> + import javax . enterprise . context . ApplicationScoped ; <nl> + import javax . security . enterprise . authentication . mechanism . http . BasicAuthenticationMechanismDefinition ; <nl> + import javax . security . enterprise . authentication . mechanism . http . CustomFormAuthenticationMechanismDefinition ; <nl> + import javax . security . enterprise . identitystore . DatabaseIdentityStoreDefinition ; <nl> + <nl> + @ BasicAuthenticationMechanismDefinition ( realmName = "" defaultRealm "" ) <nl> + @ DatabaseIdentityStoreDefinition ( <nl> + dataSourceLookup = "" java : comp / env / jdbc / securityDS "" , <nl> + callerQuery = "" select password from users where username = ? "" , <nl> + groupsQuery = "" select GROUPNAME from groups where username = ? "" <nl> + ) <nl> + @ ApplicationScoped <nl> + public class AppConfig { <nl> + } <nl> new file mode 100644 <nl> index 00000000000 . . 3658826e4dd <nl> mmm / dev / null <nl> ppp b / java - ee - 8 - security - api / app - auth - basic - store - db / src / main / java / com / baeldung / javaee / security / DatabaseSetupServlet . java <nl> <nl> + package com . baeldung . javaee . security ; <nl> + <nl> + import javax . annotation . Resource ; <nl> + import javax . annotation . sql . DataSourceDefinition ; <nl> + import javax . inject . Inject ; <nl> + import javax . security . enterprise . identitystore . Pbkdf2PasswordHash ; <nl> + import javax . servlet . ServletException ; <nl> + import javax . servlet . annotation . WebServlet ; <nl> + import javax . servlet . http . HttpServlet ; <nl> + import javax . sql . DataSource ; <nl> + import java . sql . Connection ; <nl> + import java . sql . PreparedStatement ; <nl> + import java . sql . SQLException ; <nl> + <nl> + @ DataSourceDefinition ( <nl> + name = "" java : comp / env / jdbc / securityDS "" , <nl> + className = "" org . h2 . jdbcx . JdbcDataSource "" , <nl> + url = "" jdbc : h2 : ~ / securityTest ; MODE = Oracle "" <nl> + ) <nl> + @ WebServlet ( value = "" / init "" , loadOnStartup = 0 ) <nl> + public class DatabaseSetupServlet extends HttpServlet { <nl> + <nl> + @ Resource ( lookup = "" java : comp / env / jdbc / securityDS "" ) <nl> + private DataSource dataSource ; <nl> + <nl> + @ Inject <nl> + private Pbkdf2PasswordHash passwordHash ; <nl> + <nl> + @ Override <nl> + public void init ( ) throws ServletException { <nl> + super . init ( ) ; <nl> + initdb ( ) ; <nl> + } <nl> + <nl> + private void initdb ( ) { <nl> + executeUpdate ( dataSource , "" DROP TABLE IF EXISTS USERS "" ) ; <nl> + executeUpdate ( dataSource , "" DROP TABLE IF EXISTS GROUPS "" ) ; <nl> + <nl> + executeUpdate ( dataSource , "" CREATE TABLE IF NOT EXISTS USERS ( username VARCHAR ( 64 ) PRIMARY KEY , password VARCHAR ( 255 ) ) "" ) ; <nl> + executeUpdate ( dataSource , "" CREATE TABLE IF NOT EXISTS GROUPS ( username VARCHAR ( 64 ) , GROUPNAME VARCHAR ( 64 ) ) "" ) ; <nl> + <nl> + executeUpdate ( dataSource , "" INSERT INTO USERS VALUES ( ' admin ' , ' "" + passwordHash . generate ( "" passadmin "" . toCharArray ( ) ) + "" ' ) "" ) ; <nl> + executeUpdate ( dataSource , "" INSERT INTO USERS VALUES ( ' user ' , ' "" + passwordHash . generate ( "" passuser "" . toCharArray ( ) ) + "" ' ) "" ) ; <nl> + <nl> + executeUpdate ( dataSource , "" INSERT INTO GROUPS VALUES ( ' admin ' , ' admin_role ' ) "" ) ; <nl> + executeUpdate ( dataSource , "" INSERT INTO GROUPS VALUES ( ' admin ' , ' user_role ' ) "" ) ; <nl> + executeUpdate ( dataSource , "" INSERT INTO GROUPS VALUES ( ' user ' , ' user_role ' ) "" ) ; <nl> + } <nl> + <nl> + private void executeUpdate ( DataSource dataSource , String query ) { <nl> + try ( Connection connection = dataSource ",Merge pull request from eelhazati / master,26038028f1bb66749ab40f70dc856f15940d5e4d,Trivial Why,,﻿Version management,,Trivial What,,,,,
247056,"mmm a / gdx / src / com / badlogic / gdx / graphics / g3d / utils / MeshBuilder . java <nl> ppp b / gdx / src / com / badlogic / gdx / graphics / g3d / utils / MeshBuilder . java <nl> public void addMesh ( float [ ] vertices , short [ ] indices ) { <nl> / / TODO : The following methods are deprecated and will be removed in a future release <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void patch ( VertexInfo corner00 , VertexInfo corner10 , VertexInfo corner11 , VertexInfo corner01 , int divisionsU , <nl> int divisionsV ) { <nl> PatchShapeBuilder . build ( this , corner00 , corner10 , corner11 , corner01 , divisionsU , divisionsV ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void patch ( Vector3 corner00 , Vector3 corner10 , Vector3 corner11 , Vector3 corner01 , Vector3 normal , int divisionsU , <nl> int divisionsV ) { <nl> PatchShapeBuilder . build ( this , corner00 , corner10 , corner11 , corner01 , normal , divisionsU , divisionsV ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void patch ( float x00 , float y00 , float z00 , float x10 , float y10 , float z10 , float x11 , float y11 , float z11 , <nl> float x01 , float y01 , float z01 , float normalX , float normalY , float normalZ , int divisionsU , int divisionsV ) { <nl> PatchShapeBuilder . build ( this , x00 , y00 , z00 , x10 , y10 , z10 , x11 , y11 , z11 , x01 , y01 , z01 , normalX , normalY , normalZ , divisionsU , divisionsV ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void box ( VertexInfo corner000 , VertexInfo corner010 , VertexInfo corner100 , VertexInfo corner110 , VertexInfo corner001 , <nl> VertexInfo corner011 , VertexInfo corner101 , VertexInfo corner111 ) { <nl> BoxShapeBuilder . build ( this , corner000 , corner010 , corner100 , corner110 , corner001 , corner011 , corner101 , corner111 ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void box ( Vector3 corner000 , Vector3 corner010 , Vector3 corner100 , Vector3 corner110 , Vector3 corner001 , <nl> Vector3 corner011 , Vector3 corner101 , Vector3 corner111 ) { <nl> BoxShapeBuilder . build ( this , corner000 , corner010 , corner100 , corner110 , corner001 , corner011 , corner101 , corner111 ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void box ( Matrix4 transform ) { <nl> BoxShapeBuilder . build ( this , transform ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void box ( float width , float height , float depth ) { <nl> BoxShapeBuilder . build ( this , width , height , depth ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void box ( float x , float y , float z , float width , float height , float depth ) { <nl> BoxShapeBuilder . build ( this , x , y , z , width , height , depth ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , float centerX , float centerY , float centerZ , float normalX , float normalY , <nl> float normalZ ) { <nl> EllipseShapeBuilder . build ( this , radius , divisions , centerX , centerY , centerZ , normalX , normalY , normalZ ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , final Vector3 center , final Vector3 normal ) { <nl> EllipseShapeBuilder . build ( this , radius , divisions , center , normal ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , final Vector3 center , final Vector3 normal , final Vector3 tangent , <nl> final Vector3 binormal ) { <nl> EllipseShapeBuilder . build ( this , radius , divisions , center , normal , tangent , binormal ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , float centerX , float centerY , float centerZ , float normalX , float normalY , <nl> float normalZ , float tangentX , float tangentY , float tangentZ , float binormalX , float binormalY , float binormalZ ) { <nl> EllipseShapeBuilder . build ( this , radius , divisions , centerX , centerY , centerZ , normalX , normalY , normalZ , tangentX , <nl> public void circle ( float radius , int divisions , float centerX , float centerY , f <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , float centerX , float centerY , float centerZ , float normalX , float normalY , <nl> float normalZ , float angleFrom , float angleTo ) { <nl> EllipseShapeBuilder <nl> public void circle ( float radius , int divisions , float centerX , float centerY , f <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , final Vector3 center , final Vector3 normal , float angleFrom , float angleTo ) { <nl> EllipseShapeBuilder . build ( this , radius , divisions , center , normal , angleFrom , angleTo ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , final Vector3 center , final Vector3 normal , final Vector3 tangent , <nl> final Vector3 binormal , float angleFrom , float angleTo ) { <nl> circle ( radius , divisions , center . x , center . y , center . z , normal . x , normal . y , normal . z , tangent . x , tangent . y , tangent . z , <nl> public void circle ( float radius , int divisions , final Vector3 center , final Vec <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void circle ( float radius , int divisions , float centerX , float centerY , float centerZ , float normalX , float normalY , <nl> float normalZ , float tangentX , float tangentY , float tangentZ , float binormalX , float binormalY , float binormalZ , <nl> float angleFrom , float angleTo ) { <nl> public void circle ( float radius , int divisions , float centerX , float centerY , f <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , float centerX , float centerY , float centerZ , float normalX , <nl> float normalY , float normalZ ) { <nl> EllipseShapeBuilder . build ( this , width , height , divisions , centerX , centerY , centerZ , normalX , normalY , normalZ ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , final Vector3 center , final Vector3 normal ) { <nl> EllipseShapeBuilder . build ( this , width , height , divisions , center , normal ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , final Vector3 center , final Vector3 normal , <nl> final Vector3 tangent , final Vector3 binormal ) { <nl> EllipseShapeBuilder . build ( this , width , height , divisions , center , normal , tangent , binormal ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , float centerX , float centerY , float centerZ , float normalX , <nl> float normalY , float normalZ , float tangentX , float tangentY , float tangentZ , float binormalX , float binormalY , <nl> float binormalZ ) { <nl> public void ellipse ( float width , float height , int divisions , float centerX , fl <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , float centerX , float centerY , float centerZ , float normalX , <nl> float normalY , float normalZ , float angleFrom , float angleTo ) { <nl> EllipseShapeBuilder . build ( this , width , height , divisions , centerX , centerY , centerZ , normalX , normalY , normalZ , angleFrom , <nl> public void ellipse ( float width , float height , int divisions , float centerX , fl <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , final Vector3 center , final Vector3 normal , float angleFrom , <nl> float angleTo ) { <nl> EllipseShapeBuilder . build ( this , width , height , divisions , center , normal , angleFrom , angleTo ) ; <nl> } <nl> <nl> @ Override <nl> + @ Deprecated <nl> public void ellipse ( float width , float height , int divisions , final Vector3 center , final Vector3 normal , <nl> final Vector3 tangent , final Vector3 binormal , float angleFrom ,",actually deprecate stuff,9564b50deabf422682efab3213cdfaabb682cb49,,Illustrate Requirement,,Out of date,Missing What,,,,,
343146,"mmm a / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / autoconfigure / ManagementSecurityAutoConfiguration . java <nl> ppp b / spring - boot - actuator / src / main / java / org / springframework / boot / actuate / autoconfigure / ManagementSecurityAutoConfiguration . java <nl> <nl> import org . springframework . security . config . annotation . web . configuration . WebSecurityConfigurerAdapter ; <nl> import org . springframework . security . web . AuthenticationEntryPoint ; <nl> import org . springframework . security . web . authentication . www . BasicAuthenticationEntryPoint ; <nl> + import org . springframework . util . StringUtils ; <nl> <nl> / * * <nl> * { @ link EnableAutoConfiguration Auto - configuration } for security of framework endpoints . <nl> public void init ( WebSecurity builder ) throws Exception { <nl> ignored . remove ( "" none "" ) ; <nl> } <nl> if ( this . errorController ! = null ) { <nl> - ignored . add ( this . errorController . getErrorPath ( ) ) ; <nl> + ignored . add ( normalizePath ( this . errorController . getErrorPath ( ) ) ) ; <nl> } <nl> ignoring . antMatchers ( ignored . toArray ( new String [ 0 ] ) ) ; <nl> } <nl> <nl> + private String normalizePath ( String errorPath ) { <nl> + String result = StringUtils . cleanPath ( errorPath ) ; <nl> + if ( ! result . startsWith ( "" / "" ) ) { <nl> + result = "" / "" + result ; <nl> + } <nl> + return result ; <nl> + } <nl> + <nl> } <nl> <nl> @ Configuration <nl> mmm a / spring - boot - actuator / src / test / java / org / springframework / boot / actuate / autoconfigure / ManagementSecurityAutoConfigurationTests . java <nl> ppp b / spring - boot - actuator / src / test / java / org / springframework / boot / actuate / autoconfigure / ManagementSecurityAutoConfigurationTests . java <nl> <nl> import org . springframework . security . core . userdetails . UserDetailsService ; <nl> import org . springframework . security . web . FilterChainProxy ; <nl> import org . springframework . test . util . ReflectionTestUtils ; <nl> + import org . springframework . util . StringUtils ; <nl> import org . springframework . web . context . support . AnnotationConfigWebApplicationContext ; <nl> <nl> import static org . junit . Assert . assertEquals ; <nl> public void testWebConfiguration ( ) throws Exception { <nl> . size ( ) ) ; <nl> } <nl> <nl> + @ Test <nl> + public void testPathNormalization ( ) throws Exception { <nl> + String path = "" admin / . / error "" ; <nl> + assertEquals ( "" admin / error "" , StringUtils . cleanPath ( path ) ) ; <nl> + } <nl> + <nl> @ Test <nl> public void testWebConfigurationWithExtraRole ( ) throws Exception { <nl> this . context = new AnnotationConfigWebApplicationContext ( ) ; <nl>","Ensure path starts with "" / "" in ErrorController",00b85e8c42d445ce2ac01cded3f1aa1ba0a9a9e4,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
56494,"mmm a / rest - api - spec / test / ack_watch / 10_basic . yaml <nl> ppp b / rest - api - spec / test / ack_watch / 10_basic . yaml <nl> <nl> "" Test ack watch api "" : <nl> - do : <nl> cluster . health : <nl> - wait_for_status : green <nl> + wait_for_status : yellow <nl> <nl> - do : <nl> watcher . put_watch : <nl> <nl> <nl> - do : <nl> cluster . health : <nl> - wait_for_status : green <nl> + wait_for_status : yellow <nl> <nl> - do : <nl> watcher . ack_watch : <nl>","REST tests : Wait for yellow , not green",41b974b784bec6256834655e673539200a8ca735,Missing Why,,Missing Why,,﻿Summarize Code Object Change,,Object of change,,,
209376,mmm a / selenium - server / pom . xml <nl> ppp b / selenium - server / pom . xml <nl> <nl> < plugins > <nl> < plugin > <nl> < artifactId > maven - assembly - plugin < / artifactId > <nl> - < version > 2 . 2 - beta - 2 - SNAPSHOT < / version > <nl> + < version > 2 . 2 - beta - 3 - SNAPSHOT < / version > <nl> < configuration > <nl> < descriptor > src / main / assembly / dep . xml < / descriptor > <nl> < archive > <nl>,SRC - 511 applied,1707d6211c6605929fc9d32501de315081985029,Missing Why,,,,Missing What,,Missing What,,,
75606,"mmm a / src / main / java / com / google / devtools / build / lib / rules / objc / ObjcRuleClasses . java <nl> ppp b / src / main / java / com / google / devtools / build / lib / rules / objc / ObjcRuleClasses . java <nl> public Metadata getMetadata ( ) { <nl> "" cc_library "" , <nl> "" cc_inc_library "" , <nl> "" ios_framework "" , <nl> - "" swift_binary "" ) ; <nl> + "" swift_library "" ) ; <nl> <nl> @ Override <nl> public RuleClass build ( Builder builder , RuleDefinitionEnvironment env ) { <nl>",Rename swift_binary to swift_library as the intended rule is not executable .,70b2a5be94e91647fe6d3da589dfcf3061722005,﻿Describe Objective,,﻿To fix defects,,﻿Summarize Code Object Change,,﻿Object of change,,,
300033,"mmm a / modules / elasticsearch / src / main / java / org / elasticsearch / index / engine / robin / RobinEngine . java <nl> ppp b / modules / elasticsearch / src / main / java / org / elasticsearch / index / engine / robin / RobinEngine . java <nl> private void innerDelete ( Delete delete , IndexWriter writer ) throws IOException { <nl> <nl> if ( flushNeeded ) { <nl> flushNeeded = false ; <nl> - long time = System . currentTimeMillis ( ) ; <nl> try { <nl> long translogId = translogIdGenerator . incrementAndGet ( ) ; <nl> translog . newTransientTranslog ( translogId ) ; <nl> private void innerDelete ( Delete delete , IndexWriter writer ) throws IOException { <nl> failEngine ( e ) ; <nl> throw new FlushFailedEngineException ( shardId , e ) ; <nl> } <nl> - System . err . println ( "" Commit took "" + new TimeValue ( System . currentTimeMillis ( ) - time ) ) ; <nl> } <nl> } finally { <nl> rwl . readLock ( ) . unlock ( ) ; <nl>","d ' oh , remove debug out",e8ba7a7974cf60391cc94c7ecdf9bfc6e725cdcf,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
66364,"mmm a / projects / com . oracle . truffle . llvm . runtime / src / com / oracle / truffle / llvm / runtime / LLVMContext . java <nl> ppp b / projects / com . oracle . truffle . llvm . runtime / src / com / oracle / truffle / llvm / runtime / LLVMContext . java <nl> <nl> import java . util . Arrays ; <nl> import java . util . Collections ; <nl> import java . util . HashMap ; <nl> - import java . util . IdentityHashMap ; <nl> import java . util . LinkedHashMap ; <nl> import java . util . LinkedList ; <nl> import java . util . List ; <nl> <nl> import com . oracle . truffle . llvm . runtime . types . MetaType ; <nl> import com . oracle . truffle . llvm . runtime . types . PrimitiveType ; <nl> import com . oracle . truffle . llvm . runtime . types . Type ; <nl> + import org . graalvm . collections . EconomicMap ; <nl> + import org . graalvm . collections . Equivalence ; <nl> <nl> public final class LLVMContext { <nl> private final List < Path > libraryPaths = new ArrayList < > ( ) ; <nl> private Handle ( LLVMNativePointer pointer , TruffleObject managed ) { <nl> } <nl> <nl> private final Object handlesLock ; <nl> - private final IdentityHashMap < TruffleObject , Handle > handleFromManaged ; <nl> - private final HashMap < LLVMNativePointer , Handle > handleFromPointer ; <nl> + private final EconomicMap < TruffleObject , Handle > handleFromManaged ; <nl> + private final EconomicMap < LLVMNativePointer , Handle > handleFromPointer ; <nl> <nl> private final LLVMSourceContext sourceContext ; <nl> private final LLVMGlobalsStack globalStack ; <nl> public LLVMContext ( LLVMLanguage language , Env env , List < ContextExtension > contex <nl> this . sigDfl = LLVMNativePointer . create ( 0 ) ; <nl> this . sigIgn = LLVMNativePointer . create ( 1 ) ; <nl> this . sigErr = LLVMNativePointer . create ( - 1 ) ; <nl> - this . handleFromManaged = new IdentityHashMap < > ( ) ; <nl> - this . handleFromPointer = new HashMap < > ( ) ; <nl> + this . handleFromManaged = EconomicMap . create ( ForeignEquivalence . INSTANCE ) ; <nl> + this . handleFromPointer = EconomicMap . create ( ) ; <nl> this . handlesLock = new Object ( ) ; <nl> this . functionPointerRegistry = new LLVMFunctionPointerRegistry ( ) ; <nl> this . sourceContext = new LLVMSourceContext ( ) ; <nl> public TruffleObject getManagedObjectForHandle ( LLVMNativePointer address ) { <nl> } <nl> } <nl> <nl> - private static TruffleObject getIdentityKey ( TruffleObject obj ) { <nl> - if ( obj instanceof LLVMTypedForeignObject ) { <nl> - return ( ( LLVMTypedForeignObject ) obj ) . getForeign ( ) ; <nl> - } else { <nl> - return obj ; <nl> + private static class ForeignEquivalence extends Equivalence { <nl> + <nl> + private static final ForeignEquivalence INSTANCE = new ForeignEquivalence ( ) ; <nl> + <nl> + @ Override <nl> + public boolean equals ( Object a , Object b ) { <nl> + return getIdentityKey ( a ) = = getIdentityKey ( b ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public int hashCode ( Object o ) { <nl> + return System . identityHashCode ( getIdentityKey ( o ) ) ; <nl> + } <nl> + <nl> + private static Object getIdentityKey ( Object obj ) { <nl> + if ( obj instanceof LLVMTypedForeignObject ) { <nl> + return ( ( LLVMTypedForeignObject ) obj ) . getForeign ( ) ; <nl> + } else { <nl> + return obj ; <nl> + } <nl> } <nl> } <nl> <nl> public void releaseHandle ( LLVMMemory memory , LLVMNativePointer address ) { <nl> } <nl> <nl> if ( - - handle . refcnt = = 0 ) { <nl> - handleFromPointer . remove ( address ) ; <nl> - handleFromManaged . remove ( getIdentityKey ( handle . managed ) ) ; <nl> + handleFromPointer . removeKey ( address ) ; <nl> + handleFromManaged . removeKey ( handle . managed ) ; <nl> memory . free ( address ) ; <nl> } <nl> } <nl> public void releaseHandle ( LLVMMemory memory , LLVMNativePointer address ) { <nl> @ TruffleBoundary <nl> public LLVMNativePointer getHandleForManagedObject ( LLVMMemory memory , TruffleObject object ) { <nl> synchronized ( handlesLock ) { <nl> - Handle handle = handleFromManaged . computeIfAbsent ( getIdentityKey ( object ) , ( k ) - > { <nl> + Handle handle = handleFromManaged . get ( object ) ; <nl> + if ( handle = = null ) { <nl> LLVMNativePointer allocatedMemory = memory . allocateMemory ( Long . BYTES ) ; <nl> memory . putI64 ( allocatedMemory , 0xdeadbeef ) ; <nl> - Handle h = new Handle ( allocatedMemory , object ) ; <nl> - handleFromPointer . put ( allocatedMemory , h ) ; <nl> - return h ; <nl> - } ) ; <nl> + handle = new Handle ( allocatedMemory , object ) ; <nl> + handleFromManaged . put ( object , handle ) ; <nl> + handleFromPointer . put ( allocatedMemory , handle ) ; <nl> + } <nl> + <nl> handle . refcnt + + ; <nl> return handle . pointer ; <nl> } <nl> public LLVMNativePointer getHandleForManagedObject ( LLVMMemory memory , TruffleObj <nl> @ TruffleBoundary <nl> public LLVMNativePointer getDerefHandleForManagedObject ( LLVMMemory memory , TruffleObject object ) { <nl> synchronized ( handlesLock ) { <nl> - Handle handle = handleFromManaged . computeIfAbsent ( object , ( k ) - > { <nl> + Handle handle = handleFromManaged . get ( object ) ; <nl> + if ( handle = = null ) { <nl> LLVMNativePointer allocatedMemory = memory . allocateDerefMemory ( ) ; <nl> - Handle h = new Handle ( allocatedMemory , object ) ; <nl> - handleFromPointer . put ( allocatedMemory , h ) ; <nl> - return h ; <nl> - } ) ; <nl> + handle = new Handle ( allocatedMemory , object ) ; <nl> + handleFromManaged . put ( object , handle ) ; <nl> + handleFromPointer . put ( allocatedMemory , handle ) ; <nl> + } <nl> + <nl> handle . refcnt + + ; <nl> return handle . pointer ; <nl> } <nl>",Use EconomicMap in handle implementation .,e46cc44bcc2cacd53cb76e2e0a19f71426873f89,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
259339,mmm a / nephele / nephele - clustermanager / pom . xml <nl> ppp b / nephele / nephele - clustermanager / pom . xml <nl> <nl> < artifactId > nephele - server < / artifactId > <nl> < version > $ { version } < / version > <nl> < / dependency > <nl> - <nl> - < dependency > <nl> - < groupId > com . google . collections < / groupId > <nl> - < artifactId > google - collections < / artifactId > <nl> - < / dependency > <nl> < / dependencies > <nl> <nl> < build > <nl>,Removes Google collections from the build dependencies,4e00ad5944526b128cbeebb1aac2764b7905d77e,Missing Why,,Missing Why,,,Summarize code object change,,Object of change,,
224691,"mmm a / spring - boot - project / spring - boot - actuator - autoconfigure / src / test / java / org / springframework / boot / actuate / autoconfigure / cloudfoundry / reactive / CloudFoundryWebFluxEndpointIntegrationTests . java <nl> ppp b / spring - boot - project / spring - boot - actuator - autoconfigure / src / test / java / org / springframework / boot / actuate / autoconfigure / cloudfoundry / reactive / CloudFoundryWebFluxEndpointIntegrationTests . java <nl> <nl> import java . util . Arrays ; <nl> import java . util . Collections ; <nl> import java . util . Map ; <nl> - import java . util . function . BiConsumer ; <nl> import java . util . function . Consumer ; <nl> <nl> import org . junit . Test ; <nl> <nl> import org . springframework . boot . actuate . endpoint . web . EndpointMediaTypes ; <nl> import org . springframework . boot . actuate . endpoint . web . PathMapper ; <nl> import org . springframework . boot . actuate . endpoint . web . annotation . WebEndpointDiscoverer ; <nl> - import org . springframework . boot . web . embedded . netty . NettyReactiveWebServerFactory ; <nl> + import org . springframework . boot . autoconfigure . AutoConfigurations ; <nl> + import org . springframework . boot . autoconfigure . web . reactive . HttpHandlerAutoConfiguration ; <nl> + import org . springframework . boot . autoconfigure . web . reactive . ReactiveWebServerFactoryAutoConfiguration ; <nl> + import org . springframework . boot . autoconfigure . web . reactive . WebFluxAutoConfiguration ; <nl> + import org . springframework . boot . test . context . assertj . AssertableReactiveWebApplicationContext ; <nl> + import org . springframework . boot . test . context . runner . ContextConsumer ; <nl> + import org . springframework . boot . test . context . runner . ReactiveWebApplicationContextRunner ; <nl> import org . springframework . boot . web . reactive . context . AnnotationConfigReactiveWebServerApplicationContext ; <nl> - import org . springframework . boot . web . reactive . context . ReactiveWebServerInitializedEvent ; <nl> import org . springframework . context . ApplicationContext ; <nl> - import org . springframework . context . ApplicationListener ; <nl> import org . springframework . context . annotation . Bean ; <nl> import org . springframework . context . annotation . Configuration ; <nl> import org . springframework . context . annotation . Import ; <nl> import org . springframework . core . convert . support . DefaultConversionService ; <nl> import org . springframework . http . HttpStatus ; <nl> import org . springframework . http . MediaType ; <nl> - import org . springframework . http . server . reactive . HttpHandler ; <nl> import org . springframework . test . web . reactive . server . WebTestClient ; <nl> import org . springframework . util . Base64Utils ; <nl> import org . springframework . web . cors . CorsConfiguration ; <nl> - import org . springframework . web . reactive . config . EnableWebFlux ; <nl> - import org . springframework . web . server . adapter . WebHttpHandlerBuilder ; <nl> <nl> import static org . mockito . ArgumentMatchers . any ; <nl> import static org . mockito . ArgumentMatchers . eq ; <nl> <nl> * Tests for { @ link CloudFoundryWebFluxEndpointHandlerMapping } . <nl> * <nl> * @ author Madhura Bhave <nl> + * @ author Stephane Nicoll <nl> * / <nl> public class CloudFoundryWebFluxEndpointIntegrationTests { <nl> <nl> <nl> private static ReactiveCloudFoundrySecurityService securityService = mock ( <nl> ReactiveCloudFoundrySecurityService . class ) ; <nl> <nl> + private final ReactiveWebApplicationContextRunner contextRunner = new ReactiveWebApplicationContextRunner ( <nl> + AnnotationConfigReactiveWebServerApplicationContext : : new ) <nl> + . withConfiguration ( <nl> + AutoConfigurations . of ( WebFluxAutoConfiguration . class , <nl> + HttpHandlerAutoConfiguration . class , <nl> + ReactiveWebServerFactoryAutoConfiguration . class ) ) <nl> + . withUserConfiguration ( TestEndpointConfiguration . class ) <nl> + . withPropertyValues ( "" server . port = 0 "" ) ; <nl> + <nl> @ Test <nl> public void operationWithSecurityInterceptorForbidden ( ) { <nl> given ( tokenValidator . validate ( any ( ) ) ) . willReturn ( Mono . empty ( ) ) ; <nl> given ( securityService . getAccessLevel ( any ( ) , eq ( "" app - id "" ) ) ) <nl> . willReturn ( Mono . just ( AccessLevel . RESTRICTED ) ) ; <nl> - load ( TestEndpointConfiguration . class , <nl> - ( client ) - > client . get ( ) . uri ( "" / cfApplication / test "" ) <nl> - . accept ( MediaType . APPLICATION_JSON ) <nl> - . header ( "" Authorization "" , "" bearer "" + mockAccessToken ( ) ) . exchange ( ) <nl> - . expectStatus ( ) . isEqualTo ( HttpStatus . FORBIDDEN ) ) ; <nl> + this . contextRunner . run ( withWebTestClient ( ( client ) - > client . get ( ) <nl> + . uri ( "" / cfApplication / test "" ) . accept ( MediaType . APPLICATION_JSON ) <nl> + . header ( "" Authorization "" , "" bearer "" + mockAccessToken ( ) ) . exchange ( ) <nl> + . expectStatus ( ) . isEqualTo ( HttpStatus . FORBIDDEN ) ) ) ; <nl> } <nl> <nl> @ Test <nl> public void operationWithSecurityInterceptorSuccess ( ) { <nl> given ( tokenValidator . validate ( any ( ) ) ) . willReturn ( Mono . empty ( ) ) ; <nl> given ( securityService . getAccessLevel ( any ( ) , eq ( "" app - id "" ) ) ) <nl> . willReturn ( Mono . just ( AccessLevel . FULL ) ) ; <nl> - load ( TestEndpointConfiguration . class , <nl> - ( client ) - > client . get ( ) . uri ( "" / cfApplication / test "" ) <nl> - . accept ( MediaType . APPLICATION_JSON ) <nl> - . header ( "" Authorization "" , "" bearer "" + mockAccessToken ( ) ) . exchange ( ) <nl> - . expectStatus ( ) . isEqualTo ( HttpStatus . OK ) ) ; <nl> + this . contextRunner . run ( withWebTestClient ( ( client ) - > client . get ( ) <nl> + . uri ( "" / cfApplication / test "" ) . accept ( MediaType . APPLICATION_JSON ) <nl> + . header ( "" Authorization "" , "" bearer "" + mockAccessToken ( ) ) . exchange ( ) <nl> + . expectStatus ( ) . isEqualTo ( HttpStatus . OK ) ) ) ; <nl> } <nl> <nl> @ Test <nl> public void responseToOptionsRequestIncludesCorsHeaders ( ) { <nl> - load ( TestEndpointConfiguration . class , ( client ) - > client . options ( ) <nl> + this . contextRunner . run ( withWebTestClient ( ( client ) - > client . options ( ) <nl> . uri ( "" / cfApplication / test "" ) . accept ( MediaType . APPLICATION_JSON ) <nl> . header ( "" Access - Control - Request - Method "" , "" POST "" ) <nl> . header ( "" Origin "" , "" http : / / example . com "" ) . exchange ( ) . expectStatus ( ) . isOk ( ) <nl> . expectHeader ( ) <nl> . valueEquals ( "" Access - Control - Allow - Origin "" , "" http : / / example . com "" ) <nl> - . expectHeader ( ) . valueEquals ( "" Access - Control - Allow - Methods "" , "" GET , POST "" ) ) ; <nl> + . expectHeader ( ) . valueEquals ( "" Access - Control - Allow - Methods "" , "" GET , POST "" ) ) ) ; <nl> } <nl> <nl> @ Test <nl> public void linksToOtherEndpointsWithFullAccess ( ) { <nl> given ( tokenValidator . validate ( any ( ) ) ) . willReturn ( Mono . empty ( ) ) ; <nl> given ( securityService . getAccessLevel ( any ( ) , eq ( "" app - id "" ) ) ) <nl> . willReturn ( Mono . just ( AccessLevel . FULL ) ) ; <nl> - load ( TestEndpointConfiguration . class , ( client ) - > client . get ( ) <nl> + this . contextRunner . run ( withWebTestClient ( ( client ) - > client . get ( ) <nl> . uri ( "" / cfApplication "" ) . accept ( MediaType . APPLICATION_JSON ) <nl> . header ( "" Authorization "" , "" bearer "" + mockAccessToken ( ) ) . exchange ( ) <nl> . expectStatus ( ) . isOk ( ) . expectBody ( ) . jsonPath ( "" _links . length ( ) "" ) <nl> public void linksToOtherEndpointsWithFullAccess ( ) { <nl> . isEqualTo ( false ) . jsonPath ( "" _links . test . href "" ) . isNotEmpty ( ) <nl> . jsonPath ( "" _links . test . templated "" ) . isEqualTo ( false ) <nl> . jsonPath ( "" _links . test - part . href "" ) . isNotEmpty ( ) <nl> - . jsonPath ( "" _links . test - part . templated "" ) . isEqualTo ( true ) ) ; <nl> + . jsonPath ( "" _links . test - part . templated "" ) . isEqualTo ( true ) ) ) ; <nl> } <nl> <nl> @ Test <nl> public void linksToOtherEndpointsForbidden ( ) { <nl> CloudFoundryAuthorizationException",Polish test,b0d388830f71445efa3317fd465fe4136cfffe82,Trivial Why,,Code refactoring,,Trivial What,,,,,
281396,"mmm a / core - util / src / main / java / org / signal / core / util / StreamUtil . java <nl> ppp b / core - util / src / main / java / org / signal / core / util / StreamUtil . java <nl> public static String readFullyAsString ( InputStream in ) throws IOException { <nl> } <nl> <nl> public static long copy ( InputStream in , OutputStream out ) throws IOException { <nl> - byte [ ] buffer = new byte [ 8192 ] ; <nl> + byte [ ] buffer = new byte [ 64 * 1024 ] ; <nl> int read ; <nl> long total = 0 ; <nl> <nl>",Increase stream copy buffer size to 64K .,93e9de3932433c0468c576b0c3839e5398b4221c,Missing Why,,Missing Why,,﻿Summarize Code Object Change,,﻿Object of change,,,
104055,"new file mode 100644 <nl> index 00000000000 . . e1722fb0397 <nl> mmm / dev / null <nl> ppp b / java - numbers - 4 / pom . xml <nl> <nl> + < project xmlns = "" http : / / maven . apache . org / POM / 4 . 0 . 0 "" <nl> + xmlns : xsi = "" http : / / www . w3 . org / 2001 / XMLSchema - instance "" <nl> + xsi : schemaLocation = "" http : / / maven . apache . org / POM / 4 . 0 . 0 http : / / maven . apache . org / xsd / maven - 4 . 0 . 0 . xsd "" > <nl> + < modelVersion > 4 . 0 . 0 < / modelVersion > <nl> + < artifactId > java - numbers - 4 < / artifactId > <nl> + < name > java - numbers - 4 < / name > <nl> + < packaging > jar < / packaging > <nl> + <nl> + < parent > <nl> + < groupId > com . baeldung < / groupId > <nl> + < artifactId > parent - java < / artifactId > <nl> + < version > 0 . 0 . 1 - SNAPSHOT < / version > <nl> + < relativePath > . . / parent - java < / relativePath > <nl> + < / parent > <nl> + <nl> + < dependencies > <nl> + < dependency > <nl> + < groupId > io . vavr < / groupId > <nl> + < artifactId > vavr < / artifactId > <nl> + < version > $ { vavr . version } < / version > <nl> + < / dependency > <nl> + < dependency > <nl> + < groupId > org . apache . commons < / groupId > <nl> + < artifactId > commons - lang3 < / artifactId > <nl> + < version > $ { commons . version } < / version > <nl> + < scope > test < / scope > <nl> + < / dependency > <nl> + < dependency > <nl> + < groupId > org . assertj < / groupId > <nl> + < artifactId > assertj - core < / artifactId > <nl> + < version > $ { assertj . version } < / version > <nl> + < scope > test < / scope > <nl> + < / dependency > <nl> + < / dependencies > <nl> + <nl> + < build > <nl> + < finalName > java - numbers - 4 < / finalName > <nl> + < resources > <nl> + < resource > <nl> + < directory > src / main / resources < / directory > <nl> + < filtering > true < / filtering > <nl> + < / resource > <nl> + < / resources > <nl> + < / build > <nl> + <nl> + < properties > <nl> + < vavr . version > 0 . 10 . 2 < / vavr . version > <nl> + < commons . version > 3 . 9 < / commons . version > <nl> + < assertj . version > 3 . 6 . 1 < / assertj . version > <nl> + < / properties > <nl> + <nl> + < / project > <nl> similarity index 100 % <nl> rename from java - numbers - 3 / src / main / java / com / baeldung / probability / MaleHeightGenerator . java <nl> rename to java - numbers - 4 / src / main / java / com / baeldung / probability / MaleHeightGenerator . java <nl> similarity index 100 % <nl> rename from java - numbers - 3 / src / main / java / com / baeldung / probability / RandomInvoker . java <nl> rename to java - numbers - 4 / src / main / java / com / baeldung / probability / RandomInvoker . java <nl> similarity index 100 % <nl> rename from java - numbers - 3 / src / test / java / com / baeldung / probability / RandomInvokerUnitTest . java <nl> rename to java - numbers - 4 / src / test / java / com / baeldung / probability / RandomInvokerUnitTest . java <nl>",BAEL - 4405 move probability examples to java - numbers - 4,0d186f81e02a0024a6befd38ea14e0facf17f03a,Missing Why,,Missing Why,,Summarize code object change,,﻿Object of change,,,
314929,"mmm a / regex / src / com . oracle . truffle . regex / src / com / oracle / truffle / regex / tregex / string / Encodings . java <nl> ppp b / regex / src / com . oracle . truffle . regex / src / com / oracle / truffle / regex / tregex / string / Encodings . java <nl> public boolean isFixedCodePointWidth ( CodePointSet set ) { <nl> } <nl> <nl> @ Override <nl> - public StringBufferUTF16 createStringBuffer ( int capacity ) { <nl> - return new StringBufferUTF16 ( capacity ) ; <nl> + public StringBufferLATIN1 createStringBuffer ( int capacity ) { <nl> + return new StringBufferLATIN1 ( capacity ) ; <nl> } <nl> <nl> @ Override <nl> public LoopOptimizationNode extractLoopOptNode ( CodePointSet cps ) { <nl> - return new LoopOptIndexOfAnyCharNode ( cps . inverseToCharArray ( this ) ) ; <nl> + return new LoopOptIndexOfAnyByteNode ( cps . inverseToByteArray ( this ) ) ; <nl> } <nl> <nl> @ Override <nl> new file mode 100644 <nl> index 000000000000 . . 9d6aaae90cbb <nl> mmm / dev / null <nl> ppp b / regex / src / com . oracle . truffle . regex / src / com / oracle / truffle / regex / tregex / string / StringBufferLATIN1 . java <nl> <nl> + / * <nl> + * Copyright ( c ) 2020 , 2020 , Oracle and / or its affiliates . All rights reserved . <nl> + * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER . <nl> + * <nl> + * The Universal Permissive License ( UPL ) , Version 1 . 0 <nl> + * <nl> + * Subject to the condition set forth below , permission is hereby granted to any <nl> + * person obtaining a copy of this software , associated documentation and / or <nl> + * data ( collectively the "" Software "" ) , free of charge and under any and all <nl> + * copyright rights in the Software , and any and all patent rights owned or <nl> + * freely licensable by each licensor hereunder covering either ( i ) the <nl> + * unmodified Software as contributed to or provided by such licensor , or ( ii ) <nl> + * the Larger Works ( as defined below ) , to deal in both <nl> + * <nl> + * ( a ) the Software , and <nl> + * <nl> + * ( b ) any piece of software and / or hardware listed in the lrgrwrks . txt file if <nl> + * one is included with the Software each a "" Larger Work "" to which the Software <nl> + * is contributed by such licensors ) , <nl> + * <nl> + * without restriction , including without limitation the rights to copy , create <nl> + * derivative works of , display , perform , and distribute the Software and make , <nl> + * use , sell , offer for sale , import , export , have made , and have sold the <nl> + * Software and the Larger Work ( s ) , and to sublicense the foregoing rights on <nl> + * either these or other terms . <nl> + * <nl> + * This license is subject to the following condition : <nl> + * <nl> + * The above copyright notice and either this complete permission notice or at a <nl> + * minimum a reference to the UPL must be included in all copies or substantial <nl> + * portions of the Software . <nl> + * <nl> + * THE SOFTWARE IS PROVIDED "" AS IS "" , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> + * IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> + * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL THE <nl> + * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER <nl> + * LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , <nl> + * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE <nl> + * SOFTWARE . <nl> + * / <nl> + package com . oracle . truffle . regex . tregex . string ; <nl> + <nl> + import com . oracle . truffle . regex . tregex . buffer . ByteArrayBuffer ; <nl> + import com . oracle . truffle . regex . tregex . string . Encodings . Encoding ; <nl> + <nl> + public final class StringBufferLATIN1 extends ByteArrayBuffer implements AbstractStringBuffer { <nl> + <nl> + public StringBufferLATIN1 ( ) { <nl> + this ( 16 ) ; <nl> + } <nl> + <nl> + public StringBufferLATIN1 ( int capacity ) { <nl> + super ( capacity ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public Encoding getEncoding ( ) { <nl> + return Encodings . LATIN_1 ; <nl> + } <nl> + <nl> + @ Override <nl> + public void append ( int codepoint ) { <nl> + assert codepoint < = Encodings . LATIN_1 . getMaxValue ( ) ; <nl> + add ( ( byte ) codepoint ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void appendOR ( int c1 , int c2 ) { <nl> + assert c1 < = Encodings . LATIN_1 . getMaxValue ( ) ; <nl> + assert c2 < = Encodings . LATIN_1 . getMaxValue ( ) ; <nl> + add ( ( byte ) ( c1 | c2 ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void appendXOR ( int c1 , int c2 ) { <nl> + assert c1 < = Encodings . LATIN_1 . getMaxValue ( ) ; <nl> + assert c2 < = Encodings . LATIN_1 . getMaxValue ( ) ; <nl> + add ( ( byte ) ( c1 ^ c2 ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public StringLATIN1 materialize ( ) { <nl> + return new StringLATIN1 ( toArray ( ) ) ; <nl> + } <nl> + } <nl> new file mode 100644 <nl> index 000000000000 . . f980a0eab4ca <nl> mmm / dev / null <nl> ppp b / regex / src / com . oracle . truffle . regex / src / com / oracle / truffle / regex / tregex / string / StringLATIN1 . java <nl> <nl> + / * <nl> + * Copyright ( c ) 2020 , 2020 , Oracle and / or its affiliates . All rights reserved . <nl> + * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER . <nl> + * <nl> + * The Universal Permissive License ( UPL ) , Version 1 . 0 <nl> + * <nl> + * Subject to the condition set forth below , permission is hereby granted to any <nl> + * person obtaining a copy of this software , associated documentation and / or <nl> + * data ( collectively the "" Software "" ) , free of charge and under any and all <nl> + * copyright rights in the Software , and any and all patent rights owned or <nl> + * freely licensable by each licensor hereunder covering either ( i ) the <nl> + * unmodified Software as contributed to or provided by such licensor , or ( ii ) <nl> + * the Larger Works ( as defined below ) , to deal in both <nl> + * <nl> + * ( a ) the Software , and <nl> + * <nl> + * ( b ) any piece of software and / or hardware listed in the lrgrwrks . txt file if <nl> + * one is included with the Software each a "" Larger Work "" to which the Software <nl> + * is contributed by such licensors ) , <nl> + * <nl> + * without restriction , including without limitation the rights to copy , create <nl> + * derivative works of , display , perform , and distribute the Software and make , <nl> + * use , sell , offer for sale , import , export , have made , and have sold the <nl> + * Software and the Larger Work ( s ) , and to sublicense the foregoing rights on <nl> + * either these or other terms . <nl> + * <nl> + * This license is subject to the following condition : <nl> + * <nl> + * The above copyright notice and either this complete permission notice or at a <nl> + * minimum a reference to the UPL must be included in all copies or substantial <nl> + * portions of the Software . <nl> + * <nl> + * THE SOFTWARE IS PROVIDED "" AS IS "" , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> + * IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> + * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL THE <nl> + * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER <nl> + * LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , <nl> + * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE <nl> + * SOFTWARE . <nl> + * / <nl> + package com . oracle . truffle . regex . tregex . string ; <nl> + <nl> + import java . util . Arrays ; <nl> + <nl> + import com . oracle . truffle . api . CompilerDirectives . CompilationFinal ; <nl> + <nl> + public final class StringLATIN1 implements AbstractString { <nl> + <nl> + @ CompilationFinal ( dimensions = 1 ) private final byte [ ] str ; <nl> + <nl> + public StringLATIN1 ( byte [ ] str ) { <nl> + this . str = str ; <nl> + } <nl> + <nl> + @ Override <nl> + public int encodedLength ( ) { <nl> + return str . length ; <nl> + } <nl> + <nl> + @ Override <nl> + public Object content ( ) { <nl> + return str ; <nl> + } <nl> + <nl> + @ O",TRegex : add support for byte array string constants in LATIN - 1 / BYTES mode,3f4af0806bcdc89b093708182ed8d6db9f4d6b2e,Imply Necessity,,Relation to an implemented feature,,Illustrate Function,,,,,
16578,"mmm a / selenium / src / java / org / openqa / selenium / internal / seleniumemulation / Timer . java <nl> ppp b / selenium / src / java / org / openqa / selenium / internal / seleniumemulation / Timer . java <nl> public Timer ( long timeout ) { <nl> } <nl> <nl> public < T > T run ( SeleneseCommand < T > command , WebDriver driver , String [ ] args ) { <nl> - final SeleneseTimerTask myTimerTask = new SeleneseTimerTask ( ) ; <nl> + Thread thread = Thread . currentThread ( ) ; <nl> + final SeleneseTimerTask myTimerTask = new SeleneseTimerTask ( thread ) ; <nl> <nl> try { <nl> timer . schedule ( myTimerTask , timeout ) ; <nl> } catch ( IllegalArgumentException e ) { <nl> + Thread . interrupted ( ) ; <nl> + <nl> / / This should only ever happen the user tries to do something with Selenium after calling <nl> / / stop . Since this RejectedExecutionException is really vague , rethrow it with a more <nl> / / explicit message . <nl> throw new RuntimeException ( <nl> "" Illegal attempt to execute a command after calling stop ( ) "" , e ) ; <nl> } <nl> + / / Because we call Thread to interrupt , we should ensure that the <nl> + / / interrupted status is cleared . This will be a no - op if called twice . <nl> + Thread . interrupted ( ) ; <nl> <nl> try { <nl> return command . apply ( driver , args ) ; <nl> public void stop ( ) { <nl> class SeleneseTimerTask extends TimerTask { <nl> private final Thread thread ; <nl> <nl> - SeleneseTimerTask ( ) { <nl> - thread = Thread . currentThread ( ) ; <nl> + SeleneseTimerTask ( Thread thread ) { <nl> + this . thread = thread ; <nl> } <nl> <nl> @ Override <nl> mmm a / selenium / test / java / org / openqa / selenium / SingleTestSuite . java <nl> ppp b / selenium / test / java / org / openqa / selenium / SingleTestSuite . java <nl> <nl> private static final String SELENIUM = "" org . openqa . selenium . SeleneseBackedWebDriver "" ; <nl> <nl> public static Test suite ( ) throws Exception { <nl> - String driver = CHROME ; <nl> + String driver = FIREFOX_TEST ; <nl> <nl> System . setProperty ( "" jna . library . path "" , "" . . \ \ build ; build "" ) ; <nl> System . setProperty ( "" webdriver . selenium . server . port "" , String . valueOf ( findFreePort ( ) ) ) ; <nl> public static Test suite ( ) throws Exception { <nl> TestSuiteBuilder builder = new TestSuiteBuilder ( ) <nl> . addSourceDir ( "" common "" ) <nl> . addSourceDir ( "" firefox "" ) <nl> + . addSourceDir ( "" selenium "" ) <nl> . addSourceDir ( "" support "" ) <nl> . usingDriver ( driver ) <nl> . keepDriverInstance ( ) <nl> . includeJavascriptTests ( ) <nl> - . onlyRun ( "" ElementAttributeTest "" ) <nl> - . method ( "" testShouldReturnValueOfOnClickAttribute "" ) <nl> + . onlyRun ( "" WebDriverBackedSeleniumLargeTest "" ) <nl> + / / . method ( "" testShouldReturnValueOfOnClickAttribute "" ) <nl> . exclude ( ALL ) <nl> . exclude ( Ignore . Driver . FIREFOX ) <nl> . outputTestNames ( ) <nl> new file mode 100644 <nl> index 00000000000 . . dc67a2d73cb <nl> mmm / dev / null <nl> ppp b / selenium / test / java / org / openqa / selenium / WebDriverBackedSeleniumLargeTest . java <nl> <nl> + / * <nl> + Copyright 2010 WebDriver committers <nl> + Copyright 2010 Google Inc . <nl> + <nl> + Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + you may not use this file except in compliance with the License . <nl> + You may obtain a copy of the License at <nl> + <nl> + http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + <nl> + Unless required by applicable law or agreed to in writing , software <nl> + distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + See the License for the specific language governing permissions and <nl> + limitations under the License . <nl> + * / <nl> + <nl> + package org . openqa . selenium ; <nl> + <nl> + import com . thoughtworks . selenium . Selenium ; <nl> + import com . thoughtworks . selenium . Wait ; <nl> + <nl> + import org . openqa . selenium . environment . GlobalTestEnvironment ; <nl> + <nl> + public class WebDriverBackedSeleniumLargeTest extends AbstractDriverTestCase { <nl> + <nl> + private Selenium selenium ; <nl> + <nl> + @ Override <nl> + protected void setUp ( ) throws Exception { <nl> + super . setUp ( ) ; <nl> + <nl> + String base = GlobalTestEnvironment . get ( ) . getAppServer ( ) . whereIs ( "" "" ) ; <nl> + selenium = new WebDriverBackedSelenium ( driver , base ) ; <nl> + } <nl> + <nl> + public void testCanUseTheOriginalWaitClassWithAWebDriverBackedInstance ( ) { <nl> + selenium . open ( pages . dynamicPage ) ; <nl> + <nl> + Wait waiter = new Wait ( ) { <nl> + <nl> + @ Override <nl> + public boolean until ( ) { <nl> + return selenium . isElementPresent ( "" id = box0 "" ) ; <nl> + } <nl> + } ; <nl> + <nl> + try { <nl> + waiter . wait ( "" Can ' t find the box "" , 2000 , 200 ) ; <nl> + fail ( "" Should not have found the box "" ) ; <nl> + } catch ( Wait . WaitTimedOutException e ) { <nl> + / / this is expected <nl> + } <nl> + <nl> + selenium . click ( "" adder "" ) ; <nl> + <nl> + waiter . wait ( "" Can ' t find the box "" , 2000 , 200 ) ; <nl> + } <nl> + <nl> + } <nl>",SimonStewart : Catching a nasty issue where the interrupt status was not being cleared by the selenium emulation .,d5d7affdd34efba2fb5bc3a24213ac4214cd7d67,﻿Describe Issue,,﻿Describe error scenario,,Missing What,,,,,
1119,"mmm a / library / core / src / main / java / com / google / android / exoplayer2 / upstream / cache / CacheDataSource . java <nl> ppp b / library / core / src / main / java / com / google / android / exoplayer2 / upstream / cache / CacheDataSource . java <nl> public int read ( byte [ ] buffer , int offset , int readLength ) throws IOException { <nl> if ( bytesRemaining ! = C . LENGTH_UNSET ) { <nl> bytesRemaining - = bytesRead ; <nl> } <nl> - } else { <nl> + } else if ( currentDataSpecLengthUnset ) { <nl> + setBytesRemaining ( 0 ) ; <nl> + } else if ( bytesRemaining > 0 | | bytesRemaining = = C . LENGTH_UNSET ) { <nl> closeCurrentSource ( ) ; <nl> - if ( currentDataSpecLengthUnset ) { <nl> - setBytesRemaining ( 0 ) ; <nl> - } else if ( bytesRemaining > 0 | | bytesRemaining = = C . LENGTH_UNSET ) { <nl> - openNextSource ( false ) ; <nl> - return read ( buffer , offset , readLength ) ; <nl> - } <nl> + openNextSource ( false ) ; <nl> + return read ( buffer , offset , readLength ) ; <nl> } <nl> return bytesRead ; <nl> } catch ( IOException e ) { <nl> mmm a / library / core / src / test / java / com / google / android / exoplayer2 / upstream / cache / CacheDataSourceTest . java <nl> ppp b / library / core / src / test / java / com / google / android / exoplayer2 / upstream / cache / CacheDataSourceTest . java <nl> <nl> * / <nl> package com . google . android . exoplayer2 . upstream . cache ; <nl> <nl> - import static com . google . android . exoplayer2 . C . LENGTH_UNSET ; <nl> import static com . google . android . exoplayer2 . upstream . cache . CacheAsserts . assertCacheEmpty ; <nl> import static com . google . common . truth . Truth . assertThat ; <nl> - import static com . google . common . truth . Truth . assertWithMessage ; <nl> import static org . junit . Assert . fail ; <nl> <nl> import android . net . Uri ; <nl> <nl> import java . util . NavigableSet ; <nl> import org . junit . After ; <nl> import org . junit . Before ; <nl> - import org . junit . Ignore ; <nl> import org . junit . Test ; <nl> import org . junit . runner . RunWith ; <nl> import org . robolectric . RobolectricTestRunner ; <nl> public void testCacheAndReadUnknownLength ( ) throws Exception { <nl> assertCacheAndRead ( false , true ) ; <nl> } <nl> <nl> - / / Disabled test as we don ' t support caching of definitely unknown length content <nl> - @ Ignore <nl> @ Test <nl> - public void disabledTestCacheAndReadUnboundedRequestUnknownLength ( ) throws Exception { <nl> + public void testCacheAndReadUnboundedRequestUnknownLength ( ) throws Exception { <nl> assertCacheAndRead ( true , true ) ; <nl> } <nl> <nl> public void testContentLengthEdgeCases ( ) throws Exception { <nl> / / Read partial at EOS but don ' t cross it so length is unknown <nl> CacheDataSource cacheDataSource = createCacheDataSource ( false , true ) ; <nl> assertReadData ( cacheDataSource , true , TEST_DATA . length - 2 , 2 ) ; <nl> - assertThat ( cache . getContentLength ( testDataKey ) ) . isEqualTo ( LENGTH_UNSET ) ; <nl> + assertThat ( cache . getContentLength ( testDataKey ) ) . isEqualTo ( C . LENGTH_UNSET ) ; <nl> <nl> / / Now do an unbounded request for whole data . This will cause a bounded request from upstream . <nl> / / End of data from upstream shouldn ' t be mixed up with EOS and cause length set wrong . <nl> public void testContentLengthEdgeCases ( ) throws Exception { <nl> / / Now the length set correctly do an unbounded request with offset <nl> assertThat ( <nl> cacheDataSource . open ( <nl> - new DataSpec ( testDataUri , TEST_DATA . length - 2 , LENGTH_UNSET , testDataKey ) ) ) <nl> + new DataSpec ( testDataUri , TEST_DATA . length - 2 , C . LENGTH_UNSET , testDataKey ) ) ) <nl> . isEqualTo ( 2 ) ; <nl> <nl> / / An unbounded request with offset for not cached content <nl> assertThat ( <nl> cacheDataSource . open ( <nl> - new DataSpec ( Uri . parse ( "" notCachedUri "" ) , TEST_DATA . length - 2 , LENGTH_UNSET , null ) ) ) <nl> - . isEqualTo ( LENGTH_UNSET ) ; <nl> + new DataSpec ( <nl> + Uri . parse ( "" notCachedUri "" ) , TEST_DATA . length - 2 , C . LENGTH_UNSET , null ) ) ) <nl> + . isEqualTo ( C . LENGTH_UNSET ) ; <nl> + } <nl> + <nl> + @ Test <nl> + public void testCantResolvedLengthContentReadInOneConnectionAndLengthIsResolved ( ) <nl> + throws Exception { <nl> + FakeDataSource upstream = new FakeDataSource ( ) ; <nl> + upstream <nl> + . getDataSet ( ) <nl> + . newData ( testDataUri ) <nl> + . appendReadData ( TEST_DATA ) <nl> + . setSimulateUnknownLength ( true ) ; <nl> + CacheDataSource cacheDataSource = new CacheDataSource ( cache , upstream , 0 ) ; <nl> + <nl> + cacheDataSource . open ( new DataSpec ( testDataUri , 0 , C . LENGTH_UNSET , testDataKey ) ) ; <nl> + TestUtil . readToEnd ( cacheDataSource ) ; <nl> + cacheDataSource . close ( ) ; <nl> + <nl> + assertThat ( upstream . getAndClearOpenedDataSpecs ( ) ) . hasLength ( 1 ) ; <nl> + assertThat ( cache . getContentLength ( testDataKey ) ) . isEqualTo ( TEST_DATA . length ) ; <nl> } <nl> <nl> @ Test <nl> public void testIgnoreCacheForUnsetLengthRequests ( ) throws Exception { <nl> - CacheDataSource cacheDataSource = createCacheDataSource ( false , true , <nl> - CacheDataSource . FLAG_IGNORE_CACHE_FOR_UNSET_LENGTH_REQUESTS ) ; <nl> - assertReadData ( cacheDataSource , true , 0 , C . LENGTH_UNSET ) ; <nl> + FakeDataSource upstream = new FakeDataSource ( ) ; <nl> + upstream . getDataSet ( ) . setData ( testDataUri , TEST_DATA ) ; <nl> + CacheDataSource cacheDataSource = <nl> + new CacheDataSource ( <nl> + cache , upstream , CacheDataSource . FLAG_IGNORE_CACHE_FOR_UNSET_LENGTH_REQUESTS ) ; <nl> + <nl> + cacheDataSource . open ( new DataSpec ( testDataUri , 0 , C . LENGTH_UNSET , testDataKey ) ) ; <nl> + TestUtil . readToEnd ( cacheDataSource ) ; <nl> + cacheDataSource . close ( ) ; <nl> + <nl> assertThat ( cache . getKeys ( ) ) . isEmpty ( ) ; <nl> } <nl> <nl> private void assertReadDataContentLength ( CacheDataSource cacheDataSource , <nl> boolean unboundedRequest , boolean unknownLength ) throws IOException { <nl> int length = unboundedRequest ? C . LENGTH_UNSET : TEST_DATA . length ; <nl> assertReadData ( cacheDataSource , unknownLength , 0 , length ) ; <nl> - assertWithMessage ( <nl> - "" When the range specified , CacheDataSource doesn ' t reach EOS so shouldn ' t "" <nl> - + "" cache content length "" ) <nl> - . that ( cache . getContentLength ( testDataKey ) ) <nl> + / / If ! unboundedRequest , CacheDataSource doesn ' t reach EOS so shouldn ' t cache content length <nl> + assertThat ( cache . getContentLength ( testDataKey ) ) <nl> . isEqualTo ( ! unboundedRequest ? C . LENGTH_UNSET : TEST_DATA . length ) ; <nl> } <nl> <nl> private void assertReadData ( CacheDataSource cacheDataSource , boolean unknownLeng <nl> if ( length ! = C . LENGTH_UNSET ) { <nl> testDataLength = Math . min ( testDataLength , length ) ; <nl> } <nl> - DataSpec dataSpec = new DataSpec ( testDataUri , position , length , testDataKey ) ; <nl> + DataSpec dataSpec = <nl> + new DataSpec ( <nl> + testDataUri , position , length , testDataKey , DataSpec . FLAG_ALLOW_CACHING_UNKNOWN_LENGTH ) ; <nl> assertThat ( cacheDataSource . open ( dataSpec ) ) . isEqualTo ( unknownLength ? length : testDataLength ) ; <nl> cacheDataSource . close ( ) ; <nl> <nl>",Fix CacheDataSource trying to read more after EOS,5ce40fa04b69c2bdd56f8cf8c15954315297710a,﻿Describe Objective,,﻿To fix defects,,Illustrate Function,,,,,
44274,"mmm a / truffle / com . oracle . truffle . api . vm / src / com / oracle / truffle / api / vm / PolyglotEngine . java <nl> ppp b / truffle / com . oracle . truffle . api . vm / src / com / oracle / truffle / api / vm / PolyglotEngine . java <nl> void dispatchExecutionEvent ( Object event ) { <nl> } <nl> <nl> abstract boolean isDirect ( ) ; <nl> + <nl> abstract Object value ( ) throws IOException ; <nl> <nl> / * * <nl> private Object waitForSymbol ( ) throws IOException { <nl> <nl> private class DirectValue extends Value { <nl> private final Object value ; <nl> + <nl> DirectValue ( TruffleLanguage < ? > [ ] language , Object value ) { <nl> super ( language ) ; <nl> this . value = value ; <nl> mmm a / truffle / com . oracle . truffle . api / src / com / oracle / truffle / api / impl / Accessor . java <nl> ppp b / truffle / com . oracle . truffle . api / src / com / oracle / truffle / api / impl / Accessor . java <nl> <nl> <nl> public abstract static class DebugSupport { <nl> public abstract Assumption assumeNoDebugger ( ) ; <nl> + <nl> public abstract void executionStarted ( Object vm , int currentDepth , Object [ ] debuggerHolder , Source s ) ; <nl> + <nl> public abstract void executionEnded ( Object vm , Object [ ] debuggerHolder ) ; <nl> } <nl> <nl> public abstract static class ExecSupport { <nl> public abstract ContextStore createStore ( Object vm ) ; <nl> + <nl> public abstract ContextStore executionStarted ( ContextStore context ) ; <nl> + <nl> public abstract void executionEnded ( ContextStore prev ) ; <nl> <nl> public abstract Object findVM ( ) ; <nl>",Apply proper formatting,0e21ec918b9ccef7157d788dda9e08cc2a59b029,,Trivial Why,,Code refactoring,Missing What,,,,,
218262,"mmm a / build . gradle <nl> ppp b / build . gradle <nl> <nl> import com . bmuschko . gradle . nexus . NexusPlugin <nl> import org . gradle . plugins . ide . eclipse . model . SourceFolder <nl> <nl> - buildscript { <nl> - repositories { <nl> - mavenCentral ( ) <nl> - } <nl> - dependencies { <nl> - classpath ' com . bmuschko : gradle - nexus - plugin : 2 . 3 . 1 ' <nl> - } <nl> - } <nl> - <nl> / / common maven publishing configuration <nl> subprojects { <nl> group = ' org . elasticsearch ' <nl> subprojects { <nl> configurations { <nl> all { <nl> resolutionStrategy { <nl> - failOnVersionConflict ( ) <nl> - <nl> dependencySubstitution { <nl> substitute module ( "" org . elasticsearch : rest - api - spec : $ { version } "" ) with project ( "" $ { projectsPrefix } : rest - api - spec "" ) <nl> substitute module ( "" org . elasticsearch : elasticsearch : $ { version } "" ) with project ( "" $ { projectsPrefix } : core "" ) <nl> mmm a / buildSrc / build . gradle <nl> ppp b / buildSrc / build . gradle <nl> dependencies { <nl> compile ' org . eclipse . jgit : org . eclipse . jgit : 3 . 2 . 0 . 201312181205 - r ' <nl> compile ' com . perforce : p4java : 2012 . 3 . 551082 ' / / THIS IS SUPPOSED TO BE OPTIONAL IN THE FUTURE . . . . <nl> compile ' de . thetaphi : forbiddenapis : 2 . 0 ' <nl> + compile ' com . bmuschko : gradle - nexus - plugin : 2 . 3 . 1 ' <nl> } <nl> <nl> processResources { <nl> mmm a / buildSrc / src / main / groovy / org / elasticsearch / gradle / BuildPlugin . groovy <nl> ppp b / buildSrc / src / main / groovy / org / elasticsearch / gradle / BuildPlugin . groovy <nl> <nl> * / <nl> package org . elasticsearch . gradle <nl> <nl> + import nebula . plugin . extraconfigurations . ProvidedBasePlugin <nl> import org . elasticsearch . gradle . precommit . PrecommitTasks <nl> - import org . gradle . api . artifacts . ProjectDependency <nl> - import org . gradle . api . GradleException <nl> - import org . gradle . api . JavaVersion <nl> - import org . gradle . api . Plugin <nl> - import org . gradle . api . Project <nl> - import org . gradle . api . Task <nl> + import org . gradle . api . * <nl> + import org . gradle . api . artifacts . * <nl> import org . gradle . api . artifacts . dsl . RepositoryHandler <nl> + import org . gradle . api . artifacts . maven . MavenPom <nl> import org . gradle . api . tasks . bundling . Jar <nl> import org . gradle . api . tasks . compile . JavaCompile <nl> import org . gradle . internal . jvm . Jvm <nl> class BuildPlugin implements Plugin < Project > { <nl> project . pluginManager . apply ( ' nebula . info - java ' ) <nl> project . pluginManager . apply ( ' nebula . info - scm ' ) <nl> project . pluginManager . apply ( ' nebula . info - jar ' ) <nl> + project . pluginManager . apply ( ' com . bmuschko . nexus ' ) <nl> + project . pluginManager . apply ( ProvidedBasePlugin ) <nl> <nl> globalBuildInfo ( project ) <nl> configureRepositories ( project ) <nl> class BuildPlugin implements Plugin < Project > { <nl> project . ext . javaHome = project . rootProject . ext . javaHome <nl> } <nl> <nl> - / * * Makes dependencies non - transitive by default * / <nl> + / * * Return the name <nl> + * / <nl> + static String transitiveDepConfigName ( String groupId , String artifactId , String version ) { <nl> + return "" _transitive_ $ { groupId } : $ { artifactId } : $ { version } "" <nl> + } <nl> + <nl> + / * * <nl> + * Makes dependencies non - transitive . <nl> + * <nl> + * Gradle allows setting all dependencies as non - transitive very easily . <nl> + * Sadly this mechanism does not translate into maven pom generation . In order <nl> + * to effectively make the pom act as if it has no transitive dependencies , <nl> + * we must exclude each transitive dependency of each direct dependency . <nl> + * <nl> + * Determining the transitive deps of a dependency which has been resolved as <nl> + * non - transitive is difficult because the process of resolving removes the <nl> + * transitive deps . To sidestep this issue , we create a configuration per <nl> + * direct dependency version . This specially named and unique configuration <nl> + * will contain all of the transitive dependencies of this particular <nl> + * dependency . We can then use this configuration during pom generation <nl> + * to iterate the transitive dependencies and add excludes . <nl> + * / <nl> static void configureConfigurations ( Project project ) { <nl> + / / fail on any conflicting dependency versions <nl> + project . configurations . all ( { Configuration configuration - > <nl> + if ( configuration . name . startsWith ( ' _transitive_ ' ) ) { <nl> + / / don ' t force transitive configurations to not conflict with themselves , since <nl> + / / we just have them to find * what * transitive deps exist <nl> + return <nl> + } <nl> + configuration . resolutionStrategy . failOnVersionConflict ( ) <nl> + } ) <nl> <nl> / / force all dependencies added directly to compile / testCompile to be non - transitive , except for ES itself <nl> - project . configurations . compile . dependencies . all { dep - > <nl> + Closure disableTransitiveDeps = { ModuleDependency dep - > <nl> if ( ! ( dep instanceof ProjectDependency ) & & dep . getGroup ( ) ! = ' org . elasticsearch ' ) { <nl> dep . transitive = false <nl> + <nl> + / / also create a configuration just for this dependency version , so that later <nl> + / / we can determine which transitive dependencies it has <nl> + String depConfig = transitiveDepConfigName ( dep . group , dep . name , dep . version ) <nl> + if ( project . configurations . findByName ( depConfig ) = = null ) { <nl> + project . configurations . create ( depConfig ) <nl> + project . dependencies . add ( depConfig , "" $ { dep . group } : $ { dep . name } : $ { dep . version } "" ) <nl> + } <nl> } <nl> } <nl> - project . configurations . testCompile . dependencies . all { dep - > <nl> - if ( ! ( dep instanceof ProjectDependency ) & & dep . getGroup ( ) ! = ' org . elasticsearch ' ) { <nl> - dep . transitive = false <nl> + <nl> + project . configurations . compile . dependencies . all ( disableTransitiveDeps ) <nl> + project . configurations . testCompile . dependencies . all ( disableTransitiveDeps ) <nl> + project . configurations . provided . dependencies . all ( disableTransitiveDeps ) <nl> + <nl> + / / add exclusions to the pom directly , for each of the transitive deps of this project ' s deps <nl> + project . modifyPom { MavenPom pom - > <nl> + pom . withXml { XmlProvider xml - > <nl> + / / first find if we have dependencies at all , and grab the node <nl> + NodeList depsNodes = xml . asNode ( ) . get ( ' dependencies ' ) <nl> + if ( depsNodes . isEmpty ( ) ) { <nl> + return <nl> + } <nl> + <nl> + / / check each dependency for any transitive deps <nl> + for ( Node depNode : depsNodes . get ( 0 ) . children ( ) ) { <nl> + String groupId = depNode . get ( ' groupId ' ) . get ( 0 ) . text ( ) <nl> + String artifactId = depNode . get ( ' artifactId ' ) . get ( 0 ) . text ( ) <nl> + String version = depNode . get ( ' version ' ) . get ( 0 ) . text ( ) <nl> + <nl> + / / collect the transitive deps now that we know what this dependency is <nl> + String depConfig = transitiveDepConfigName ( groupId , artifactId , version ) <nl> + Configuration configuration = project . configurations . findByName ( depConfig ) <nl> + if ( configuration = = null ) { <nl> + continue / / we did not make this dep non - transitive <nl> + } <nl> + Set < ResolvedArtifact > artifacts = configuration . resolvedConfiguration . resolvedArtifacts <nl> + if ( artifacts . size ( ) < = 1 ) { <nl> + / / this dep has no transitive deps ( or the only artifact is itself ) <nl> + continue <nl> + } <nl> + <nl> + / / we now know we have something to exclude , so add the exclusion elements <nl> + Node exclusions = depNode . appendNode ( ' exclusions ' ) <nl> + for ( ResolvedArtifact transitiveArtifact : artifacts ) { <nl> + ModuleVersionIdentifier transitiveDep = transitiveArtifact . moduleVersion . id <nl> + if ( transitiveDep . group = = groupId & & transitiveDep . name = = artifactId ) { <nl> + continue ; / / don ' t exclude the dependency itself ! <nl> + } <nl> + Node exclusion = exclusions . app",Merge pull request from rjernst / tame_the_beast,55d5da485f84374a1426e6f0c1a7643ab4c85f00,Trivial Why,,﻿Version management,,Trivial What,,,,,
149258,"mmm a / client - sniffer / src / main / java / org / elasticsearch / client / sniff / HostsSniffer . java <nl> ppp b / client - sniffer / src / main / java / org / elasticsearch / client / sniff / HostsSniffer . java <nl> <nl> private final Scheme scheme ; <nl> private final JsonFactory jsonFactory = new JsonFactory ( ) ; <nl> <nl> - protected HostsSniffer ( RestClient restClient , long sniffRequestTimeout , Scheme scheme ) { <nl> + protected HostsSniffer ( RestClient restClient , long sniffRequestTimeoutMillis , Scheme scheme ) { <nl> this . restClient = restClient ; <nl> - this . sniffRequestParams = Collections . < String , String > singletonMap ( "" timeout "" , sniffRequestTimeout + "" ms "" ) ; <nl> + this . sniffRequestParams = Collections . < String , String > singletonMap ( "" timeout "" , sniffRequestTimeoutMillis + "" ms "" ) ; <nl> this . scheme = scheme ; <nl> } <nl> <nl> public String toString ( ) { <nl> public static final long DEFAULT_SNIFF_REQUEST_TIMEOUT = TimeUnit . SECONDS . toMillis ( 1 ) ; <nl> <nl> private final RestClient restClient ; <nl> - private long sniffRequestTimeout = DEFAULT_SNIFF_REQUEST_TIMEOUT ; <nl> + private long sniffRequestTimeoutMillis = DEFAULT_SNIFF_REQUEST_TIMEOUT ; <nl> private Scheme scheme ; <nl> <nl> private Builder ( RestClient restClient ) { <nl> private Builder ( RestClient restClient ) { <nl> } <nl> <nl> / * * <nl> - * Sets the sniff request timeout to be passed in as a query string parameter to elasticsearch . <nl> - * Allows to halt the request without any failure , as only the nodes that have responded <nl> - * within this timeout will be returned . <nl> + * Sets the sniff request timeout ( in milliseconds ) to be passed in as a query string parameter to elasticsearch . <nl> + * Allows to halt the request without any failure , as only the nodes that have responded within this timeout will be returned . <nl> * / <nl> - public Builder setSniffRequestTimeout ( int sniffRequestTimeout ) { <nl> - if ( sniffRequestTimeout < = 0 ) { <nl> - throw new IllegalArgumentException ( "" sniffRequestTimeout must be greater than 0 "" ) ; <nl> + public Builder setSniffRequestTimeoutMillis ( int sniffRequestTimeoutMillis ) { <nl> + if ( sniffRequestTimeoutMillis < = 0 ) { <nl> + throw new IllegalArgumentException ( "" sniffRequestTimeoutMillis must be greater than 0 "" ) ; <nl> } <nl> - this . sniffRequestTimeout = sniffRequestTimeout ; <nl> + this . sniffRequestTimeoutMillis = sniffRequestTimeoutMillis ; <nl> return this ; <nl> } <nl> <nl> public Builder setScheme ( Scheme scheme ) { <nl> * Creates a new { @ link HostsSniffer } instance given the provided configuration <nl> * / <nl> public HostsSniffer build ( ) { <nl> - return new HostsSniffer ( restClient , sniffRequestTimeout , scheme ) ; <nl> + return new HostsSniffer ( restClient , sniffRequestTimeoutMillis , scheme ) ; <nl> } <nl> } <nl> } <nl> mmm a / client - sniffer / src / main / java / org / elasticsearch / client / sniff / Sniffer . java <nl> ppp b / client - sniffer / src / main / java / org / elasticsearch / client / sniff / Sniffer . java <nl> public void close ( ) throws IOException { <nl> private final HostsSniffer hostsSniffer ; <nl> private final RestClient restClient ; <nl> <nl> - private final long sniffInterval ; <nl> - private final long sniffAfterFailureDelay ; <nl> + private final long sniffIntervalMillis ; <nl> + private final long sniffAfterFailureDelayMillis ; <nl> private final ScheduledExecutorService scheduledExecutorService ; <nl> private final AtomicBoolean running = new AtomicBoolean ( false ) ; <nl> private ScheduledFuture < ? > scheduledFuture ; <nl> <nl> - private Task ( HostsSniffer hostsSniffer , RestClient restClient , long sniffInterval , long sniffAfterFailureDelay ) { <nl> + private Task ( HostsSniffer hostsSniffer , RestClient restClient , long sniffIntervalMillis , long sniffAfterFailureDelayMillis ) { <nl> this . hostsSniffer = hostsSniffer ; <nl> this . restClient = restClient ; <nl> - this . sniffInterval = sniffInterval ; <nl> - this . sniffAfterFailureDelay = sniffAfterFailureDelay ; <nl> + this . sniffIntervalMillis = sniffIntervalMillis ; <nl> + this . sniffAfterFailureDelayMillis = sniffAfterFailureDelayMillis ; <nl> this . scheduledExecutorService = Executors . newScheduledThreadPool ( 1 ) ; <nl> scheduleNextRun ( 0 ) ; <nl> } <nl> synchronized void scheduleNextRun ( long delayMillis ) { <nl> <nl> @ Override <nl> public void run ( ) { <nl> - sniff ( null , sniffInterval ) ; <nl> + sniff ( null , sniffIntervalMillis ) ; <nl> } <nl> <nl> void sniffOnFailure ( HttpHost failedHost ) { <nl> - sniff ( failedHost , sniffAfterFailureDelay ) ; <nl> + sniff ( failedHost , sniffAfterFailureDelayMillis ) ; <nl> } <nl> <nl> void sniff ( HttpHost excludeHost , long nextSniffDelayMillis ) { <nl> public static Builder builder ( RestClient restClient , HostsSniffer hostsSniffer ) <nl> <nl> private final RestClient restClient ; <nl> private final HostsSniffer hostsSniffer ; <nl> - private long sniffInterval = DEFAULT_SNIFF_INTERVAL ; <nl> + private long sniffIntervalMillis = DEFAULT_SNIFF_INTERVAL ; <nl> private boolean sniffOnFailure = true ; <nl> - private long sniffAfterFailureDelay = DEFAULT_SNIFF_AFTER_FAILURE_DELAY ; <nl> + private long sniffAfterFailureDelayMillis = DEFAULT_SNIFF_AFTER_FAILURE_DELAY ; <nl> <nl> / * * <nl> * Creates a new builder instance by providing the { @ link RestClient } that will be used to communicate with elasticsearch , <nl> private Builder ( RestClient restClient , HostsSniffer hostsSniffer ) { <nl> } <nl> <nl> / * * <nl> - * Sets the interval between consecutive ordinary sniff executions . Will be honoured when sniffOnFailure is disabled or <nl> - * when there are no failures between consecutive sniff executions . <nl> - * @ throws IllegalArgumentException if sniffInterval is not greater than 0 <nl> + * Sets the interval between consecutive ordinary sniff executions in milliseconds . Will be honoured when <nl> + * sniffOnFailure is disabled or when there are no failures between consecutive sniff executions . <nl> + * @ throws IllegalArgumentException if sniffIntervalMillis is not greater than 0 <nl> * / <nl> - public Builder setSniffInterval ( int sniffInterval ) { <nl> - if ( sniffInterval < = 0 ) { <nl> - throw new IllegalArgumentException ( "" sniffInterval must be greater than 0 "" ) ; <nl> + public Builder setSniffIntervalMillis ( int sniffIntervalMillis ) { <nl> + if ( sniffIntervalMillis < = 0 ) { <nl> + throw new IllegalArgumentException ( "" sniffIntervalMillis must be greater than 0 "" ) ; <nl> } <nl> - this . sniffInterval = sniffInterval ; <nl> + this . sniffIntervalMillis = sniffIntervalMillis ; <nl> return this ; <nl> } <nl> <nl> / * * <nl> * Enables / disables sniffing on failure . If enabled , at each failure nodes will be reloaded , and a new sniff execution will <nl> - * be scheduled after a shorter time than usual ( sniffAfterFailureDelay ) . <nl> + * be scheduled after a shorter time than usual ( sniffAfterFailureDelayMillis ) . <nl> * / <nl> public Builder setSniffOnFailure ( boolean sniffOnFailure ) { <nl> this . sniffOnFailure = sniffOnFailure ; <nl> public Builder setSniffOnFailure ( boolean sniffOnFailure ) { <nl> } <nl> <nl> / * * <nl> - * Sets the delay of a sniff execution scheduled after a failure . <nl> + * Sets the delay of a sniff execution scheduled after a failure ( in milliseconds ) <nl> * / <nl> - public Builder setSniffAfterFailureDelay ( int sniffAfterFailureDelay ) { <nl> - if ( sniffAfterFailureDelay < = 0 ) { <nl> - throw new IllegalArgumentException ( "" sniffAfterFailureDelay must be greater than 0 "" ) ; <nl> + public Builder setSniffAfterFailureDelayMillis ( int sniffAfterFailureDelayMillis ) { <nl> + if ( sniffAfterFailureDelayMillis < = 0 ) { <nl> + throw new IllegalArgumentException ( "" sniffAfterFailureDelayMillis must be greater than 0 "" ) ; <nl> } <nl> - this . sniffAfterFailureDelay = sniffAfterFailureDelay ; <nl> + this . sniffAfterFailureDelayMillis = sniffAfterFailureDelayMillis ; <nl> return this ; <nl> } <nl> <nl> public Builder setSniffAfterFailureDelay ( int sniffAfterFailureDelay ) { <nl> * Creates the { @ link Sniffer } based on the provi",renamed all time intervals arguments and members to include the time unit in their name,85606e8a4b60f86e9fe0e95bb8e7c426c5013358,Trivial Why,,Code refactoring,,﻿Summarize Code Object Change,,﻿Object of change,,,
332981,"mmm a / src / main / java / com / google / devtools / build / lib / analysis / CommandHelper . java <nl> ppp b / src / main / java / com / google / devtools / build / lib / analysis / CommandHelper . java <nl> <nl> import com . google . devtools . build . lib . analysis . actions . FileWriteAction ; <nl> import com . google . devtools . build . lib . cmdline . Label ; <nl> import com . google . devtools . build . lib . collect . nestedset . NestedSetBuilder ; <nl> - import com . google . devtools . build . lib . syntax . SkylarkDict ; <nl> import com . google . devtools . build . lib . syntax . SkylarkList ; <nl> - import com . google . devtools . build . lib . syntax . Type ; <nl> import com . google . devtools . build . lib . util . OS ; <nl> import com . google . devtools . build . lib . util . Pair ; <nl> import com . google . devtools . build . lib . vfs . PathFragment ; <nl> <nl> * This is similar to heuristic location expansion in LocationExpander <nl> * and should be kept in sync . <nl> * / <nl> - private final SkylarkDict < Label , ImmutableCollection < Artifact > > labelMap ; <nl> + private final ImmutableMap < Label , ImmutableCollection < Artifact > > labelMap ; <nl> <nl> / * * <nl> * The ruleContext this helper works on <nl> public CommandHelper ( <nl> for ( Entry < Label , Collection < Artifact > > entry : tempLabelMap . entrySet ( ) ) { <nl> labelMapBuilder . put ( entry . getKey ( ) , ImmutableList . copyOf ( entry . getValue ( ) ) ) ; <nl> } <nl> - this . labelMap = SkylarkDict . copyOf ( null , labelMapBuilder . build ( ) ) ; <nl> + this . labelMap = labelMapBuilder . build ( ) ; <nl> } <nl> <nl> public SkylarkList < Artifact > getResolvedTools ( ) { <nl> public CommandHelper ( <nl> } <nl> <nl> / * * <nl> - * Resolves a command , and expands known locations for $ ( location ) <nl> - * variables . <nl> + * Resolves a command , and expands known locations for $ ( location ) variables . This method supports <nl> + * legacy heuristic label expansion , which replaces strings that look like labels with their <nl> + * corresponding file names . Use { @ link # resolveCommandAndExpandLabels } instead . <nl> * / <nl> - public String resolveCommandAndExpandLabels ( <nl> - String command , <nl> - @ Nullable String attribute , <nl> - Boolean supportLegacyExpansion , <nl> - Boolean allowDataInLabel ) { <nl> - LocationExpander expander = new LocationExpander ( <nl> - ruleContext , ImmutableMap . copyOf ( labelMap ) , allowDataInLabel ) ; <nl> - if ( attribute ! = null ) { <nl> - command = expander . expandAttribute ( attribute , command ) ; <nl> - } else { <nl> - command = expander . expand ( command ) ; <nl> - } <nl> - if ( supportLegacyExpansion ) { <nl> + public String resolveCommandAndHeuristicallyExpandLabels ( <nl> + String command , @ Nullable String attribute , boolean enableLegacyHeuristicLabelExpansion ) { <nl> + command = resolveCommandAndExpandLabels ( command , attribute , false ) ; <nl> + if ( enableLegacyHeuristicLabelExpansion ) { <nl> command = expandLabels ( command , labelMap ) ; <nl> } <nl> return command ; <nl> } <nl> <nl> / * * <nl> - * Resolves the ' cmd ' attribute , and expands known locations for $ ( location ) <nl> + * Resolves a command , and expands known locations for $ ( location ) <nl> * variables . <nl> * / <nl> public String resolveCommandAndExpandLabels ( <nl> - Boolean supportLegacyExpansion , Boolean allowDataInLabel ) { <nl> - return resolveCommandAndExpandLabels ( <nl> - ruleContext . attributes ( ) . get ( "" cmd "" , Type . STRING ) , <nl> - "" cmd "" , <nl> - supportLegacyExpansion , <nl> - allowDataInLabel ) ; <nl> + String command , @ Nullable String attribute , boolean allowDataInLabel ) { <nl> + LocationExpander expander ; <nl> + if ( allowDataInLabel ) { <nl> + expander = new LocationExpander ( ruleContext , labelMap , <nl> + LocationExpander . Options . EXEC_PATHS , LocationExpander . Options . ALLOW_DATA ) ; <nl> + } else { <nl> + expander = new LocationExpander ( ruleContext , labelMap , LocationExpander . Options . EXEC_PATHS ) ; <nl> + } <nl> + if ( attribute ! = null ) { <nl> + command = expander . expandAttribute ( attribute , command ) ; <nl> + } else { <nl> + command = expander . expand ( command ) ; <nl> + } <nl> + return command ; <nl> } <nl> <nl> / * * <nl> mmm a / src / main / java / com / google / devtools / build / lib / analysis / LocationExpander . java <nl> ppp b / src / main / java / com / google / devtools / build / lib / analysis / LocationExpander . java <nl> <nl> * <nl> * and location will be substituted with / / mypackage : myhelper executable output . <nl> * Note that / / mypackage : myhelper should have just one output . <nl> + * <nl> + * < p > DO NOT USE DIRECTLY ! Use RuleContext . getExpander ( ) instead . <nl> * / <nl> public class LocationExpander { <nl> <nl> <nl> private Map < Label , Collection < Artifact > > locationMap ; <nl> private ImmutableMap < Label , ImmutableCollection < Artifact > > labelMap ; <nl> <nl> - / * * <nl> - * Creates location expander helper bound to specific target and with default location map . <nl> - * <nl> - * @ param ruleContext BUILD rule <nl> - * @ param labelMap A mapping of labels to build artifacts . <nl> - * @ param allowDataAttributeEntriesInLabel set to true if the < code > data < / code > attribute should <nl> - * be used too . <nl> - * / <nl> - public LocationExpander ( <nl> - RuleContext ruleContext , ImmutableMap < Label , ImmutableCollection < Artifact > > labelMap , <nl> - boolean allowDataAttributeEntriesInLabel ) { <nl> - this . ruleContext = ruleContext ; <nl> - ImmutableSet . Builder < Options > builder = ImmutableSet . builder ( ) ; <nl> - builder . add ( Options . EXEC_PATHS ) ; <nl> - if ( allowDataAttributeEntriesInLabel ) { <nl> - builder . add ( Options . ALLOW_DATA ) ; <nl> - } <nl> - this . options = builder . build ( ) ; <nl> - this . labelMap = labelMap ; <nl> - } <nl> - <nl> / * * <nl> * Creates location expander helper bound to specific target and with default location map . <nl> * <nl> public LocationExpander ( <nl> this . labelMap = labelMap ; <nl> } <nl> <nl> - / * * <nl> - * Creates location expander helper bound to specific target . <nl> - * <nl> - * @ param ruleContext the BUILD rule ' s context <nl> - * @ param options the list of options , see { @ link Options } . <nl> - * / <nl> - public LocationExpander ( RuleContext ruleContext , ImmutableSet < Options > options ) { <nl> - this . ruleContext = ruleContext ; <nl> - this . options = options ; <nl> - } <nl> - <nl> / * * <nl> * Creates location expander helper bound to specific target . <nl> * <nl> mmm a / src / main / java / com / google / devtools / build / lib / analysis / skylark / SkylarkRuleImplementationFunctions . java <nl> ppp b / src / main / java / com / google / devtools / build / lib / analysis / skylark / SkylarkRuleImplementationFunctions . java <nl> public String invoke ( <nl> return new LocationExpander ( <nl> ctx . getRuleContext ( ) , <nl> makeLabelMap ( targets . getContents ( TransitiveInfoCollection . class , "" targets "" ) ) , <nl> - false ) <nl> + LocationExpander . Options . EXEC_PATHS ) <nl> . expand ( input ) ; <nl> } catch ( IllegalStateException ise ) { <nl> throw new EvalException ( loc , ise ) ; <nl> public Runfiles invoke ( SkylarkRuleContext ctx , SkylarkList files , Object transit <nl> String attribute = <nl> Type . STRING . convertOptional ( attributeUnchecked , "" attribute "" , ruleLabel ) ; <nl> if ( expandLocations ) { <nl> - command = helper . resolveCommandAndExpandLabels ( command , attribute , false , false ) ; <nl> + command = helper . resolveCommandAndExpandLabels ( <nl> + command , attribute , / * allowDataInLabel = * / false ) ; <nl> } <nl> if ( ! EvalUtils . isNullOrNone ( makeVariablesUnchecked ) ) { <nl> Map < String , String > makeVariables = <nl> mmm a / src / main / java / com / google / devtools / build / lib / rules / extra / ExtraActionFactory . java <nl> ppp b / src / main / java / com / google / devtools / build / lib / rules / extra / ExtraActionFactory . java <nl> public ConfiguredTarget create ( RuleContext context ) throws RuleErrorException { <nl> List < String > outputTemplates = <nl> c","LocationExpander: always require options to be passed in
Also update CommandHelper to split the heuristic label expansion code path from
the normal code path.

Progress on #2475.

PiperOrigin-RevId: 170675702",af67774310ce210cdc2528fd39631ec408563408,"Describe Issue

",,Introduce issue/PR reference,,Illustrate Function,,,,,
119380,"mmm a / x - pack / plugin / ccr / src / test / java / org / elasticsearch / xpack / ccr / IndexFollowingIT . java <nl> ppp b / x - pack / plugin / ccr / src / test / java / org / elasticsearch / xpack / ccr / IndexFollowingIT . java <nl> <nl> <nl> public class IndexFollowingIT extends CcrIntegTestCase { <nl> <nl> - @ AwaitsFix ( bugUrl = "" https : / / github . com / elastic / elasticsearch / issues / 41037 "" ) <nl> public void testFollowIndex ( ) throws Exception { <nl> final int numberOfPrimaryShards = randomIntBetween ( 1 , 3 ) ; <nl> int numberOfReplicas = between ( 0 , 1 ) ; <nl>",Unmute IndexFollowingIT # testFollowIndex,fdd917a43c3a4c83ae5213f54bdcddc0b82ff3bb,Missing Why,,,,Summarize Code Object Change,,﻿Object of change,,,
124136,mmm a / pom . xml <nl> ppp b / pom . xml <nl> <nl> < dependency > <nl> < groupId > org . mockito < / groupId > <nl> < artifactId > mockito - core < / artifactId > <nl> - < version > 2 . 0 . 87 - beta < / version > <nl> + < version > 2 . 1 . 0 < / version > <nl> < scope > test < / scope > <nl> < / dependency > <nl> < ! - - Do not go to 2 . x until we are on jdk7 - - > <nl>,Upgrade to Mockito 2 . 1 . 0,1e648467a5d7dd2acb678208b38b21a9cd6d420b,,Illustrate Requirement,,Runtime or development environment change,﻿Summarize Code Object Change,,﻿Object of change,,,
355986,"mmm a / plugins / org . jkiss . dbeaver . ext . sqlite / src / org / jkiss / dbeaver / ext / sqlite / edit / SQLiteTableColumnManager . java <nl> ppp b / plugins / org . jkiss . dbeaver . ext . sqlite / src / org / jkiss / dbeaver / ext / sqlite / edit / SQLiteTableColumnManager . java <nl> <nl> import org . jkiss . dbeaver . model . exec . DBCExecutionContext ; <nl> import org . jkiss . dbeaver . model . impl . edit . SQLDatabasePersistAction ; <nl> import org . jkiss . dbeaver . model . impl . edit . SQLDatabasePersistActionComment ; <nl> - import org . jkiss . dbeaver . model . impl . jdbc . struct . JDBCTableColumn ; <nl> import org . jkiss . dbeaver . model . runtime . DBRProgressMonitor ; <nl> import org . jkiss . utils . CommonUtils ; <nl> <nl> <nl> @ Override <nl> protected void addObjectDeleteActions ( DBRProgressMonitor monitor , DBCExecutionContext executionContext , List < DBEPersistAction > actions , ObjectDeleteCommand command , Map < String , Object > options ) throws DBException { <nl> final GenericTableColumn column = command . getObject ( ) ; <nl> - final GenericTableBase table = ( GenericTableBase ) column . getTable ( ) . refreshObject ( monitor ) ; <nl> + final GenericTableBase table = column . getTable ( ) ; <nl> <nl> - if ( table = = null | | CommonUtils . isEmpty ( table . getAttributes ( monitor ) ) ) { <nl> + final List < ? extends GenericTableColumn > attributes = table . getAttributes ( monitor ) ; <nl> + if ( CommonUtils . isEmpty ( attributes ) ) { <nl> throw new DBException ( "" Table was deleted "" ) ; <nl> } <nl> <nl> - final String tableColumns = table . getAttributes ( monitor ) . stream ( ) <nl> + final String tableColumns = attributes . stream ( ) <nl> . filter ( x - > ! x . getName ( ) . equals ( column . getName ( ) ) & & x . isPersisted ( ) ) <nl> - . map ( JDBCTableColumn : : getName ) <nl> + . map ( DBUtils : : getQuotedIdentifier ) <nl> . collect ( Collectors . joining ( "" , "" ) ) ; <nl> <nl> final String tableName = DBUtils . getQuotedIdentifier ( table ) ; <nl>",Revert table refresh ; quote column name,87d68aaba5d3e92918bd1666abda5ccbaa018aa8,Missing Why,,,,﻿Summarize Code Object Change,,﻿Characteristics of changes,,,
19732,"mmm a / core / src / main / java / hudson / security / csrf / CrumbFilter . java <nl> ppp b / core / src / main / java / hudson / security / csrf / CrumbFilter . java <nl> <nl> <nl> import hudson . util . MultipartFormDataParser ; <nl> import jenkins . model . Jenkins ; <nl> + import org . acegisecurity . providers . anonymous . AnonymousAuthenticationToken ; <nl> <nl> import java . io . IOException ; <nl> import java . util . Enumeration ; <nl> public void doFilter ( ServletRequest request , ServletResponse response , FilterCha <nl> / / compatibility for clients that hard - code the default crumb name up to Jenkins 1 . TODO <nl> extractCrumbFromRequest ( httpRequest , "" . crumb "" ) ; <nl> } <nl> + <nl> + / / JENKINS - 40344 : Don ' t spam the log just because a session is expired <nl> + Level level = Jenkins . getAuthentication ( ) instanceof AnonymousAuthenticationToken ? Level . FINE : Level . WARNING ; <nl> + <nl> if ( crumb ! = null ) { <nl> if ( crumbIssuer . validateCrumb ( httpRequest , crumbSalt , crumb ) ) { <nl> valid = true ; <nl> } else { <nl> - LOGGER . log ( Level . WARNING , "" Found invalid crumb { 0 } . Will check remaining parameters for a valid one . . . "" , crumb ) ; <nl> + LOGGER . log ( level , "" Found invalid crumb { 0 } . Will check remaining parameters for a valid one . . . "" , crumb ) ; <nl> } <nl> } <nl> <nl> if ( valid ) { <nl> chain . doFilter ( request , response ) ; <nl> } else { <nl> - LOGGER . log ( Level . WARNING , "" No valid crumb was included in request for { 0 } . Returning { 1 } . "" , new Object [ ] { httpRequest . getRequestURI ( ) , HttpServletResponse . SC_FORBIDDEN } ) ; <nl> + LOGGER . log ( level , "" No valid crumb was included in request for { 0 } by { 1 } . Returning { 2 } . "" , new Object [ ] { httpRequest . getRequestURI ( ) , Jenkins . getAuthentication ( ) . getName ( ) , HttpServletResponse . SC_FORBIDDEN } ) ; <nl> httpResponse . sendError ( HttpServletResponse . SC_FORBIDDEN , "" No valid crumb was included in the request "" ) ; <nl> } <nl> } else { <nl>",Merge pull request from daniel - beck / JENKINS - 40344,576f5b5c0d0d4932dff874ce5ec766e14c28f0c6,Trivial Why,,﻿Version management,,Trivial What,,,,,
316442,"mmm a / compiler / src / org . graalvm . compiler . replacements / src / org / graalvm / compiler / replacements / PEGraphDecoder . java <nl> ppp b / compiler / src / org . graalvm . compiler . replacements / src / org / graalvm / compiler / replacements / PEGraphDecoder . java <nl> protected LoopScope tryInline ( PEMethodScope methodScope , LoopScope loopScope , In <nl> } <nl> <nl> protected LoopScope doInline ( PEMethodScope methodScope , LoopScope loopScope , InvokeData invokeData , InlineInfo inlineInfo , ValueNode [ ] arguments ) { <nl> - if ( ! invokeData . invoke . useForInlining ( ) ) { <nl> + if ( invokeData . invoke . getInlineControl ( ) ! = Invoke . InlineControl . Normal ) { <nl> + / / The graph decoder only has one version of the method so treat the BytecodesOnly case <nl> + / / as don ' t inline . <nl> return null ; <nl> } <nl> ResolvedJavaMethod inlineMethod = inlineInfo . getMethodToInline ( ) ; <nl> mmm a / substratevm / src / com . oracle . svm . hosted / src / com / oracle / svm / hosted / code / CompileQueue . java <nl> ppp b / substratevm / src / com . oracle . svm . hosted / src / com / oracle / svm / hosted / code / CompileQueue . java <nl> private void doInlineTrivial ( DebugContext debug , final HostedMethod method ) { <nl> invoke . callTarget ( ) . targetMethod ( ) . format ( "" % H . % n ( % p ) "" ) + "" in "" + ( graph . method ( ) = = null ? graph . toString ( ) : graph . method ( ) . format ( "" % H . % n ( % p ) "" ) ) ) ; <nl> } <nl> <nl> - if ( invoke . useForInlining ( ) ) { <nl> + if ( invoke . getInlineControl ( ) = = Invoke . InlineControl . Normal ) { <nl> inlined | = tryInlineTrivial ( graph , invoke , ! inlined ) ; <nl> } <nl> } <nl>",[ GR - 26108 ] PEGraphDecoder should respect InlineControl .,a898724f3f23c55561706fd9c66311664343cd33,,Illustrate Requirement,,Conventions and standard,Trivial What,,,,,
256327,"mmm a / sharding - jdbc / sharding - jdbc - core / src / main / java / org / apache / shardingsphere / shardingjdbc / jdbc / adapter / AbstractResultSetAdapter . java <nl> ppp b / sharding - jdbc / sharding - jdbc - core / src / main / java / org / apache / shardingsphere / shardingjdbc / jdbc / adapter / AbstractResultSetAdapter . java <nl> public AbstractResultSetAdapter ( final List < ResultSet > resultSets , final Statemen <nl> <nl> @ Override <nl> public final ResultSetMetaData getMetaData ( ) throws SQLException { <nl> - <nl> return new ShardingResultSetMetaData ( resultSets . get ( 0 ) . getMetaData ( ) , getShardingRule ( ) ) ; <nl> } <nl> <nl>",delete blank line,3284483e077bff21a1796e8c4c96a0803b43f058,,Trivial Why,,Code refactoring,Trivial What,,,,,
351844,"mmm a / spring - test / src / main / java / org / springframework / mock / http / server / reactive / MockServerHttpRequest . java <nl> ppp b / spring - test / src / main / java / org / springframework / mock / http / server / reactive / MockServerHttpRequest . java <nl> <nl> import org . springframework . http . HttpRange ; <nl> import org . springframework . http . MediaType ; <nl> import org . springframework . http . server . reactive . AbstractServerHttpRequest ; <nl> + import org . springframework . http . server . reactive . SslInfo ; <nl> import org . springframework . lang . Nullable ; <nl> import org . springframework . util . LinkedMultiValueMap ; <nl> import org . springframework . util . MimeType ; <nl> <nl> @ Nullable <nl> private final InetSocketAddress remoteAddress ; <nl> <nl> + @ Nullable <nl> + private final SslInfo sslInfo ; <nl> + <nl> private final Flux < DataBuffer > body ; <nl> <nl> <nl> private MockServerHttpRequest ( HttpMethod httpMethod , URI uri , @ Nullable String contextPath , <nl> HttpHeaders headers , MultiValueMap < String , HttpCookie > cookies , <nl> - @ Nullable InetSocketAddress remoteAddress , Publisher < ? extends DataBuffer > body ) { <nl> + @ Nullable InetSocketAddress remoteAddress , @ Nullable SslInfo sslInfo , <nl> + Publisher < ? extends DataBuffer > body ) { <nl> <nl> super ( uri , contextPath , headers ) ; <nl> this . httpMethod = httpMethod ; <nl> this . cookies = cookies ; <nl> this . remoteAddress = remoteAddress ; <nl> + this . sslInfo = sslInfo ; <nl> this . body = Flux . from ( body ) ; <nl> } <nl> <nl> public InetSocketAddress getRemoteAddress ( ) { <nl> return this . remoteAddress ; <nl> } <nl> <nl> + @ Nullable <nl> + @ Override <nl> + protected SslInfo initSslInfo ( ) { <nl> + return this . sslInfo ; <nl> + } <nl> + <nl> @ Override <nl> public Flux < DataBuffer > getBody ( ) { <nl> return this . body ; <nl> public static BodyBuilder patch ( String urlTemplate , Object . . . uriVars ) { <nl> * / <nl> B remoteAddress ( InetSocketAddress remoteAddress ) ; <nl> <nl> + / * * <nl> + * Set SSL session information and certificates . <nl> + * / <nl> + void sslInfo ( SslInfo sslInfo ) ; <nl> + <nl> / * * <nl> * Add one or more cookies . <nl> * / <nl> public static BodyBuilder patch ( String urlTemplate , Object . . . uriVars ) { <nl> @ Nullable <nl> private InetSocketAddress remoteAddress ; <nl> <nl> + @ Nullable <nl> + private SslInfo sslInfo ; <nl> + <nl> <nl> public DefaultBodyBuilder ( HttpMethod method , URI url ) { <nl> this . method = method ; <nl> public BodyBuilder remoteAddress ( InetSocketAddress remoteAddress ) { <nl> return this ; <nl> } <nl> <nl> + @ Override <nl> + public void sslInfo ( SslInfo sslInfo ) { <nl> + this . sslInfo = sslInfo ; <nl> + } <nl> + <nl> @ Override <nl> public BodyBuilder cookie ( HttpCookie . . . cookies ) { <nl> Arrays . stream ( cookies ) . forEach ( cookie - > this . cookies . add ( cookie . getName ( ) , cookie ) ) ; <nl> private Charset getCharset ( ) { <nl> public MockServerHttpRequest body ( Publisher < ? extends DataBuffer > body ) { <nl> applyCookiesIfNecessary ( ) ; <nl> return new MockServerHttpRequest ( this . method , this . url , this . contextPath , <nl> - this . headers , this . cookies , this . remoteAddress , body ) ; <nl> + this . headers , this . cookies , this . remoteAddress , this . sslInfo , body ) ; <nl> } <nl> <nl> private void applyCookiesIfNecessary ( ) { <nl> mmm a / spring - web / src / main / java / org / springframework / http / server / reactive / AbstractServerHttpRequest . java <nl> ppp b / spring - web / src / main / java / org / springframework / http / server / reactive / AbstractServerHttpRequest . java <nl> <nl> @ Nullable <nl> private MultiValueMap < String , HttpCookie > cookies ; <nl> <nl> + @ Nullable <nl> + private SslInfo sslInfo ; <nl> + <nl> <nl> / * * <nl> * Constructor with the URI and headers for the request . <nl> private String decodeQueryParam ( String value ) { <nl> * / <nl> protected abstract MultiValueMap < String , HttpCookie > initCookies ( ) ; <nl> <nl> + @ Nullable <nl> + @ Override <nl> + public SslInfo getSslInfo ( ) { <nl> + if ( this . sslInfo = = null ) { <nl> + this . sslInfo = initSslInfo ( ) ; <nl> + } <nl> + return this . sslInfo ; <nl> + } <nl> + <nl> + / * * <nl> + * Obtain SSL session information from the underlying "" native "" request . <nl> + * @ return the SSL information or { @ code null } if not available <nl> + * @ since 5 . 0 . 2 <nl> + * / <nl> + @ Nullable <nl> + protected abstract SslInfo initSslInfo ( ) ; <nl> + <nl> / * * <nl> * Return the underlying server response . <nl> * < p > < strong > Note : < / strong > This is exposed mainly for internal framework <nl> mmm a / spring - web / src / main / java / org / springframework / http / server / reactive / DefaultServerHttpRequestBuilder . java <nl> ppp b / spring - web / src / main / java / org / springframework / http / server / reactive / DefaultServerHttpRequestBuilder . java <nl> <nl> <nl> private final MultiValueMap < String , HttpCookie > cookies ; <nl> <nl> - @ Nullable <nl> - private final InetSocketAddress remoteAddress ; <nl> - <nl> @ Nullable <nl> private String uriPath ; <nl> <nl> public DefaultServerHttpRequestBuilder ( ServerHttpRequest original ) { <nl> <nl> this . uri = original . getURI ( ) ; <nl> this . httpMethodValue = original . getMethodValue ( ) ; <nl> - this . remoteAddress = original . getRemoteAddress ( ) ; <nl> this . body = original . getBody ( ) ; <nl> <nl> this . httpHeaders = new HttpHeaders ( ) ; <nl> public DefaultServerHttpRequestBuilder ( ServerHttpRequest original ) { <nl> public ServerHttpRequest build ( ) { <nl> URI uriToUse = getUriToUse ( ) ; <nl> return new DefaultServerHttpRequest ( uriToUse , this . contextPath , this . httpHeaders , <nl> - this . httpMethodValue , this . cookies , this . remoteAddress , this . body , <nl> - this . originalRequest ) ; <nl> + this . httpMethodValue , this . cookies , this . body , this . originalRequest ) ; <nl> <nl> } <nl> <nl> private URI getUriToUse ( ) { <nl> @ Nullable <nl> private final InetSocketAddress remoteAddress ; <nl> <nl> + @ Nullable <nl> + private final SslInfo sslInfo ; <nl> + <nl> private final Flux < DataBuffer > body ; <nl> <nl> private final ServerHttpRequest originalRequest ; <nl> private URI getUriToUse ( ) { <nl> <nl> public DefaultServerHttpRequest ( URI uri , @ Nullable String contextPath , <nl> HttpHeaders headers , String methodValue , MultiValueMap < String , HttpCookie > cookies , <nl> - @ Nullable InetSocketAddress remoteAddress , <nl> Flux < DataBuffer > body , ServerHttpRequest originalRequest ) { <nl> <nl> super ( uri , contextPath , headers ) ; <nl> this . methodValue = methodValue ; <nl> this . cookies = cookies ; <nl> - this . remoteAddress = remoteAddress ; <nl> + this . remoteAddress = originalRequest . getRemoteAddress ( ) ; <nl> + this . sslInfo = originalRequest . getSslInfo ( ) ; <nl> this . body = body ; <nl> this . originalRequest = originalRequest ; <nl> } <nl> public InetSocketAddress getRemoteAddress ( ) { <nl> return this . remoteAddress ; <nl> } <nl> <nl> + @ Nullable <nl> + @ Override <nl> + protected SslInfo initSslInfo ( ) { <nl> + return this . sslInfo ; <nl> + } <nl> + <nl> @ Override <nl> public Flux < DataBuffer > getBody ( ) { <nl> return this . body ; <nl> new file mode 100644 <nl> index 00000000000 . . 02b34ef93cc <nl> mmm / dev / null <nl> ppp b / spring - web / src / main / java / org / springframework / http / server / reactive / DefaultSslInfo . java <nl> <nl> + / * <nl> + * Copyright 2002 - 2017 the original author or authors . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the "" License "" ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License ",ServerHttpRequest exposes SSL certificates,87375fe6f81cb70f9ee3e44c4800ef8edce655a0,﻿Describe Issue,,﻿Describe error scenario,,Missing What,,,,,
183231,"new file mode 100644 <nl> index 000000000000 . . cc5daab9c561 <nl> mmm / dev / null <nl> ppp b / flink - kubernetes / src / main / java / org / apache / flink / kubernetes / kubeclient / resources / AbstractKubernetesWatcher . java <nl> <nl> + / * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License , Version 2 . 0 ( the <nl> + * "" License "" ) ; you may not use this file except in compliance <nl> + * with the License . You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an "" AS IS "" BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package org . apache . flink . kubernetes . kubeclient . resources ; <nl> + <nl> + import org . apache . flink . kubernetes . kubeclient . FlinkKubeClient ; <nl> + <nl> + import io . fabric8 . kubernetes . api . model . HasMetadata ; <nl> + import io . fabric8 . kubernetes . client . KubernetesClientException ; <nl> + import io . fabric8 . kubernetes . client . Watcher ; <nl> + import org . slf4j . Logger ; <nl> + import org . slf4j . LoggerFactory ; <nl> + <nl> + / * * <nl> + * Watcher for resources in Kubernetes . <nl> + * / <nl> + public abstract class AbstractKubernetesWatcher < T extends HasMetadata , K extends KubernetesResource < T > > implements Watcher < T > { <nl> + <nl> + protected final Logger logger = LoggerFactory . getLogger ( getClass ( ) ) ; <nl> + <nl> + protected final FlinkKubeClient . WatchCallbackHandler < K > callbackHandler ; <nl> + <nl> + AbstractKubernetesWatcher ( FlinkKubeClient . WatchCallbackHandler < K > callbackHandler ) { <nl> + this . callbackHandler = callbackHandler ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onClose ( KubernetesClientException cause ) { <nl> + / / null means the watcher is closed normally . <nl> + if ( cause = = null ) { <nl> + logger . info ( "" The watcher is closing . "" ) ; <nl> + } else { <nl> + callbackHandler . handleFatalError ( cause ) ; <nl> + } <nl> + } <nl> + } <nl> mmm a / flink - kubernetes / src / main / java / org / apache / flink / kubernetes / kubeclient / resources / KubernetesPodsWatcher . java <nl> ppp b / flink - kubernetes / src / main / java / org / apache / flink / kubernetes / kubeclient / resources / KubernetesPodsWatcher . java <nl> <nl> import org . apache . flink . kubernetes . kubeclient . FlinkKubeClient ; <nl> <nl> import io . fabric8 . kubernetes . api . model . Pod ; <nl> - import io . fabric8 . kubernetes . client . KubernetesClientException ; <nl> - import io . fabric8 . kubernetes . client . Watcher ; <nl> - import org . slf4j . Logger ; <nl> - import org . slf4j . LoggerFactory ; <nl> <nl> import java . util . Collections ; <nl> + import java . util . List ; <nl> <nl> / * * <nl> * Watcher for pods in Kubernetes . <nl> * / <nl> - public class KubernetesPodsWatcher implements Watcher < Pod > { <nl> - <nl> - private static final Logger LOG = LoggerFactory . getLogger ( KubernetesPodsWatcher . class ) ; <nl> - <nl> - private final FlinkKubeClient . WatchCallbackHandler < KubernetesPod > podsCallbackHandler ; <nl> + public class KubernetesPodsWatcher extends AbstractKubernetesWatcher < Pod , KubernetesPod > { <nl> <nl> public KubernetesPodsWatcher ( FlinkKubeClient . WatchCallbackHandler < KubernetesPod > callbackHandler ) { <nl> - this . podsCallbackHandler = callbackHandler ; <nl> + super ( callbackHandler ) ; <nl> } <nl> <nl> @ Override <nl> public void eventReceived ( Action action , Pod pod ) { <nl> - LOG . debug ( "" Received { } event for pod { } , details : { } "" , action , pod . getMetadata ( ) . getName ( ) , pod . getStatus ( ) ) ; <nl> + logger . debug ( "" Received { } event for pod { } , details : { } "" , action , pod . getMetadata ( ) . getName ( ) , pod . getStatus ( ) ) ; <nl> + final List < KubernetesPod > pods = Collections . singletonList ( new KubernetesPod ( pod ) ) ; <nl> switch ( action ) { <nl> case ADDED : <nl> - podsCallbackHandler . onAdded ( Collections . singletonList ( new KubernetesPod ( pod ) ) ) ; <nl> + callbackHandler . onAdded ( pods ) ; <nl> break ; <nl> case MODIFIED : <nl> - podsCallbackHandler . onModified ( Collections . singletonList ( new KubernetesPod ( pod ) ) ) ; <nl> + callbackHandler . onModified ( pods ) ; <nl> break ; <nl> case ERROR : <nl> - podsCallbackHandler . onError ( Collections . singletonList ( new KubernetesPod ( pod ) ) ) ; <nl> + callbackHandler . onError ( pods ) ; <nl> break ; <nl> case DELETED : <nl> - podsCallbackHandler . onDeleted ( Collections . singletonList ( new KubernetesPod ( pod ) ) ) ; <nl> + callbackHandler . onDeleted ( pods ) ; <nl> break ; <nl> default : <nl> - LOG . debug ( "" Ignore handling { } event for pod { } "" , action , pod . getMetadata ( ) . getName ( ) ) ; <nl> + logger . debug ( "" Ignore handling { } event for pod { } "" , action , pod . getMetadata ( ) . getName ( ) ) ; <nl> break ; <nl> } <nl> } <nl> - <nl> - @ Override <nl> - public void onClose ( KubernetesClientException cause ) { <nl> - / / null means the watcher is closed by expected . <nl> - if ( cause = = null ) { <nl> - LOG . info ( "" The pods watcher is closing . "" ) ; <nl> - } else { <nl> - podsCallbackHandler . handleFatalError ( cause ) ; <nl> - } <nl> - } <nl> } <nl>",[ hotfix ] [ k8s ] Introduce AbstractKubernetesWatcher with common logics,e2bb32c2d1d4ea1ae2400818b57fef620076b424,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
208195,"mmm a / src / main / cpp / blaze_util_mingw . cc <nl> ppp b / src / main / cpp / blaze_util_mingw . cc <nl> void ReplaceAll ( <nl> <nl> / / Max command line length is per CreateProcess documentation <nl> / / ( https : / / msdn . microsoft . com / en - us / library / ms682425 ( VS . 85 ) . aspx ) <nl> + / / <nl> + / / Quoting rules are described here : <nl> + / / https : / / blogs . msdn . microsoft . com / twistylittlepassagesallalike / 2011 / 04 / 23 / everyone - quotes - command - line - arguments - the - wrong - way / <nl> + <nl> static const int MAX_CMDLINE_LENGTH = 32768 ; <nl> <nl> struct CmdLine { <nl> static void CreateCommandLine ( CmdLine * result , const string & exe , <nl> cmdline . append ( "" "" ) ; <nl> } <nl> <nl> - string arg = s ; <nl> - / / Quote quotes . <nl> - if ( s . find ( "" \ "" "" ) ! = string : : npos ) { <nl> - ReplaceAll ( & arg , "" \ "" "" , "" \ \ \ "" "" ) ; <nl> - } <nl> + bool has_space = s . find ( "" "" ) ! = string : : npos ; <nl> <nl> - / / Quotize spaces . <nl> - if ( arg . find ( "" "" ) ! = string : : npos ) { <nl> + if ( has_space ) { <nl> cmdline . append ( "" \ "" "" ) ; <nl> - cmdline . append ( arg ) ; <nl> + } <nl> + <nl> + std : : string : : const_iterator it = s . begin ( ) ; <nl> + while ( it ! = s . end ( ) ) { <nl> + char ch = * it + + ; <nl> + switch ( ch ) { <nl> + case ' "" ' : <nl> + / / Escape double quotes <nl> + cmdline . append ( "" \ \ \ "" "" ) ; <nl> + break ; <nl> + <nl> + case ' \ \ ' : <nl> + if ( it = = s . end ( ) ) { <nl> + / / Backslashes at the end of the string are quoted if we add quotes <nl> + cmdline . append ( has_space ? "" \ \ \ \ "" : "" \ \ "" ) ; <nl> + } else { <nl> + / / Backslashes everywhere else are quoted if they are followed by a <nl> + / / quote or a backslash <nl> + cmdline . append ( * it = = ' "" ' | | * it = = ' \ \ ' ? "" \ \ \ \ "" : "" \ \ "" ) ; <nl> + } <nl> + break ; <nl> + <nl> + default : <nl> + cmdline . append ( 1 , ch ) ; <nl> + } <nl> + } <nl> + <nl> + if ( has_space ) { <nl> cmdline . append ( "" \ "" "" ) ; <nl> - } else { <nl> - cmdline . append ( arg ) ; <nl> } <nl> } <nl> <nl>","Make Windows command line quoting work.
Fixes #1445.

--
MOS_MIGRATED_REVID=125773835",83c78b1a8c772b13822386c555c6472d2912f320,"Describe Issue

",,Introduce issue/PR reference,,﻿Summarize Code Object Change,,﻿Object of change,,,
93973,"mmm a / spring - mvc - java / src / main / webapp / WEB - INF / company . html <nl> ppp b / spring - mvc - java / src / main / webapp / WEB - INF / company . html <nl> <nl> < ! DOCTYPE html > <nl> < html > <nl> - < head > <nl> - < meta charset = "" ISO - 8859 - 1 "" > <nl> - < title > Company Data < / title > <nl> - < script > <nl> - function getCompanyData ( data ) { <nl> - document . write ( "" < b > ID : < / b > "" + data . id + "" < br / > "" ) ; <nl> - document . write ( "" < b > NAME : < / b > "" + data . name + "" < br / > "" ) ; <nl> - document . write ( "" < br / > "" ) ; <nl> - } <nl> - < / script > <nl> - < / head > <nl> - < body > <nl> - < ! - - Using @ ResponseBody - - > <nl> - < script <nl> - src = "" http : / / localhost : 8080 / spring - mvc - java / companyResponseBody ? callback = getCompanyData "" <nl> - type = "" application / javascript "" > < / script > <nl> - <nl> - < ! - - Using ResponseEntity - - > <nl> - < script <nl> - src = "" http : / / localhost : 8080 / spring - mvc - java / companyResponseEntity ? callback = getCompanyData "" <nl> - type = "" application / javascript "" > < / script > <nl> - <nl> - < / body > <nl> - < / html > <nl> - <nl> + < head > <nl> + < meta charset = "" ISO - 8859 - 1 "" > <nl> + < title > Company Data < / title > <nl> + < script src = "" https : / / code . jquery . com / jquery - 3 . 1 . 0 . js "" <nl> + integrity = "" sha256 - slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk = "" <nl> + crossorigin = "" anonymous "" > < / script > <nl> + < script > <nl> + $ ( document ) . ready ( function ( ) { <nl> + $ ( ' # ResponseBody - button ' ) . click ( function ( ) { <nl> + $ . ajax ( { <nl> + url : ' http : / / localhost : 8080 / spring - mvc - java / companyResponseBody ? callback = getCompanyData ' , <nl> + data : { <nl> + format : ' json ' <nl> + } , <nl> + type : ' GET ' , <nl> + jsonpCallback : ' getCompanyData ' , <nl> + dataType : ' jsonp ' , <nl> + error : function ( ) { <nl> + $ ( ' # infoResponseBody ' ) . html ( ' < p > An error has occurred < / p > ' ) ; <nl> + } , <nl> + success : function ( data ) { <nl> + console . log ( "" sucess "" ) ; <nl> + } <nl> + } ) ; <nl> + } ) ; <nl> + $ ( ' # ResponseEntity - button ' ) . click ( function ( ) { <nl> + console . log ( "" ResponseEntity "" ) ; <nl> + $ . ajax ( { <nl> + url : ' http : / / localhost : 8080 / spring - mvc - java / companyResponseEntity ? callback = getCompanyData ' , <nl> + data : { <nl> + format : ' json ' <nl> + } , <nl> + type : ' GET ' , <nl> + jsonpCallback : ' getCompanyData ' , <nl> + dataType : ' jsonp ' , <nl> + error : function ( ) { <nl> + $ ( ' # infoResponseEntity ' ) . html ( ' < p > An error has occurred < / p > ' ) ; <nl> + } , <nl> + success : function ( data ) { <nl> + console . log ( "" sucess "" ) ; <nl> + } <nl> + } ) ; <nl> + } ) ; <nl> + } ) ; <nl> + <nl> + function getCompanyData ( data ) { <nl> + document . write ( "" < b > ID : < / b > "" + data . id + "" < br / > "" ) ; <nl> + document . write ( "" < b > NAME : < / b > "" + data . name + "" < br / > "" ) ; <nl> + document . write ( "" < br / > "" ) ; <nl> + } <nl> + < / script > <nl> + < / head > <nl> + < body > <nl> + <nl> + < ! - - Using REST URL - - > <nl> + < button id = "" REST - button "" > Test REST JSON - P ! < / button > <nl> + < div id = "" infoREST "" > < / div > <nl> + <nl> + < ! - - Using @ ResponseBody - - > <nl> + < button id = "" ResponseBody - button "" > Test ResponseBody JSON - P ! < / button > <nl> + < div id = "" infoResponseBody "" > < / div > <nl> + <nl> + < ! - - Using ResponseEntity - - > <nl> + < button id = "" ResponseEntity - button "" > Test ResponseEntity JSON - P ! < / button > <nl> + < div id = "" ResponseEntity "" > < / div > <nl> + <nl> + < / body > <nl> + < / html > <nl> \ No newline at end of file <nl> mmm a / spring - rest / src / main / webapp / WEB - INF / company . html <nl> ppp b / spring - rest / src / main / webapp / WEB - INF / company . html <nl> <nl> < ! DOCTYPE html > <nl> < html > <nl> - < head > <nl> - < meta charset = "" ISO - 8859 - 1 "" > <nl> - < title > Company Data < / title > <nl> - < script > <nl> - function getCompanyData ( data ) { <nl> - document . write ( "" < b > ID : < / b > "" + data . id + "" < br / > "" ) ; <nl> - document . write ( "" < b > NAME : < / b > "" + data . name + "" < br / > "" ) ; <nl> - document . write ( "" < br / > "" ) ; <nl> - } <nl> - < / script > <nl> - < / head > <nl> - < body > <nl> - < ! - - Using REST URL - - > <nl> - < script <nl> - src = "" http : / / localhost : 8080 / spring - rest / companyRest ? callback = getCompanyData "" <nl> - type = "" application / javascript "" > < / script > <nl> - <nl> - < / body > <nl> - < / html > <nl> - <nl> + < head > <nl> + < meta charset = "" ISO - 8859 - 1 "" > <nl> + < title > Company Data < / title > <nl> + < script src = "" https : / / code . jquery . com / jquery - 3 . 1 . 0 . js "" <nl> + integrity = "" sha256 - slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk = "" <nl> + crossorigin = "" anonymous "" > < / script > <nl> + < script > <nl> + $ ( document ) . ready ( function ( ) { <nl> + $ ( ' # REST - button ' ) . click ( function ( ) { <nl> + $ . ajax ( { <nl> + url : ' http : / / localhost : 8080 / spring - rest / companyRest ? callback = getCompanyData ' , <nl> + data : { <nl> + format : ' json ' <nl> + } , <nl> + type : ' GET ' , <nl> + jsonpCallback : ' getCompanyData ' , <nl> + dataType : ' jsonp ' , <nl> + error : function ( ) { <nl> + $ ( ' # infoREST ' ) . html ( ' < p > An error has occurred < / p > ' ) ; <nl> + } , <nl> + success : function ( data ) { <nl> + console . log ( "" sucess "" ) ; <nl> + } <nl> + } ) ; <nl> + } ) ; <nl> + } ) ; <nl> + <nl> + function getCompanyData ( data ) { <nl> + document . write ( "" < b > ID : < / b > "" + data . id + "" < br / > "" ) ; <nl> + document . write ( "" < b > NAME : < / b > "" + data . name + "" < br / > "" ) ; <nl> + document . write ( "" < br / > "" ) ; <nl> + } <nl> + < / script > <nl> + < / head > <nl> + < body > <nl> + <nl> + < ! - - Using REST URL - - > <nl> + < button id = "" REST - button "" > Test REST JSON - P ! < / button > <nl> + < div id = "" infoREST "" > < / div > <nl> + <nl> + < / body > <nl> + < / html > <nl> \ No newline at end of file <nl>",Spring JSON - P with Jackson,a38487287024e1db0aac135adf9583f62e7dd311,Missing Why,,,,,Missing What,,,,
129954,"mmm a / sharding - sql - test / src / main / resources / sql / supported / dql / select . xml <nl> ppp b / sharding - sql - test / src / main / resources / sql / supported / dql / select . xml <nl> <nl> < sql - case id = "" select_with_mod_function "" value = "" SELECT * FROM t_order WHERE MOD ( order_id , 1 ) = 1 "" db - types = "" MySQL "" / > <nl> < sql - case id = "" select_with_date_format_function "" value = "" SELECT * FROM t_order WHERE DATE_FORMAT ( current_date , ' % Y - % m - % d ' ) = ' 2019 - 12 - 18 ' "" db - types = "" MySQL "" / > <nl> < sql - case id = "" select_with_spatial_function "" value = "" SELECT * FROM t_order WHERE ST_DISTANCE_SPHERE ( POINT ( 113 . 358772 , 23 . 1273723 ) , POINT ( user_id , order_id ) ) ! = 0 "" db - types = "" MySQL "" / > <nl> + < sql - case id = "" select_current_user "" value = "" SELECT CURRENT_USER "" db - types = "" PostgreSQL "" / > <nl> < / sql - cases > <nl> mmm a / shardingsphere - sql - parser / shardingsphere - sql - parser - postgresql / src / main / antlr4 / imports / postgresql / BaseRule . g4 <nl> ppp b / shardingsphere - sql - parser / shardingsphere - sql - parser - postgresql / src / main / antlr4 / imports / postgresql / BaseRule . g4 <nl> simpleExpr <nl> | EXISTS ? subquery <nl> | LBE_ identifier expr RBE_ <nl> | caseExpression_ <nl> + | CURRENT_USER <nl> ; <nl> <nl> functionCall <nl> mmm a / shardingsphere - sql - parser / shardingsphere - sql - parser - test / src / test / resources / sql / dml / select . xml <nl> ppp b / shardingsphere - sql - parser / shardingsphere - sql - parser - test / src / test / resources / sql / dml / select . xml <nl> <nl> < / shorthand - select - items > <nl> < / select - items > <nl> < / parser - result > <nl> + <nl> + < parser - result sql - case - id = "" select_current_user "" > <nl> + < select - items start - index = "" 7 "" stop - index = "" 19 "" > <nl> + < expression - items > <nl> + < expression - item start - index = "" 7 "" stop - index = "" 19 "" text = "" CURRENT_USER "" / > <nl> + < / expression - items > <nl> + < / select - items > <nl> + < / parser - result > <nl> < / parser - result - sets > <nl>",postgresql current user,2ee8150b51d011960bb46ec18edcf429749eb6a2,Missing Why,,,,Missing What,,,,,
182263,"mmm a / redisson / src / main / java / org / redisson / client / protocol / decoder / StreamInfoDecoder . java <nl> ppp b / redisson / src / main / java / org / redisson / client / protocol / decoder / StreamInfoDecoder . java <nl> <nl> <nl> import java . util . List ; <nl> import java . util . Map ; <nl> + import java . util . stream . Collectors ; <nl> + import java . util . stream . IntStream ; <nl> <nl> import org . redisson . api . StreamInfo ; <nl> import org . redisson . api . StreamMessageId ; <nl> <nl> import org . redisson . client . protocol . convertor . StreamIdConvertor ; <nl> <nl> / * * <nl> - * <nl> - * @ author Nikita Koksharov <nl> + * <nl> + * @ author Nikita Koksharov , Fabian Witte <nl> * <nl> * / <nl> public class StreamInfoDecoder implements MultiDecoder < StreamInfo < Object , Object > > { <nl> + private static final String LENGTH_KEY = "" length "" ; <nl> + private static final String RADIX_TREE_KEYS_KEY = "" radix - tree - keys "" ; <nl> + private static final String RADIX_TREE_NODES_KEY = "" radix - tree - nodes "" ; <nl> + private static final String GROUPS_KEY = "" groups "" ; <nl> + private static final String LAST_GENERATED_ID_KEY = "" last - generated - id "" ; <nl> + private static final String FIRST_ENTRY_KEY = "" first - entry "" ; <nl> + private static final String LAST_ENTRY_KEY = "" last - entry "" ; <nl> <nl> @ Override <nl> public Decoder < Object > getDecoder ( int paramNum , State state ) { <nl> <nl> <nl> @ Override <nl> public StreamInfo < Object , Object > decode ( List < Object > parts , State state ) { <nl> + Map < String , Object > map = IntStream . range ( 0 , parts . size ( ) ) . boxed ( ) . collect ( <nl> + Collectors . groupingBy ( e - > e / 2 , Collectors . mapping ( e - > parts . get ( e ) , Collectors . toList ( ) ) ) ) <nl> + . values ( ) . stream ( ) . collect ( Collectors . toMap ( e - > ( String ) e . get ( 0 ) , e - > e . get ( 1 ) ) ) ; <nl> + <nl> StreamInfo < Object , Object > info = new StreamInfo < > ( ) ; <nl> - info . setLength ( ( ( Long ) parts . get ( 1 ) ) . intValue ( ) ) ; <nl> - info . setRadixTreeKeys ( ( ( Long ) parts . get ( 3 ) ) . intValue ( ) ) ; <nl> - info . setRadixTreeNodes ( ( ( Long ) parts . get ( 5 ) ) . intValue ( ) ) ; <nl> - info . setGroups ( ( ( Long ) parts . get ( 7 ) ) . intValue ( ) ) ; <nl> - info . setLastGeneratedId ( StreamIdConvertor . INSTANCE . convert ( parts . get ( 9 ) ) ) ; <nl> + info . setLength ( ( ( Long ) map . get ( LENGTH_KEY ) ) . intValue ( ) ) ; <nl> + info . setRadixTreeKeys ( ( ( Long ) map . get ( RADIX_TREE_KEYS_KEY ) ) . intValue ( ) ) ; <nl> + info . setRadixTreeNodes ( ( ( Long ) map . get ( RADIX_TREE_NODES_KEY ) ) . intValue ( ) ) ; <nl> + info . setGroups ( ( ( Long ) map . get ( GROUPS_KEY ) ) . intValue ( ) ) ; <nl> + info . setLastGeneratedId ( StreamIdConvertor . INSTANCE . convert ( map . get ( LAST_GENERATED_ID_KEY ) ) ) ; <nl> <nl> - List < ? > firstEntry = ( List < ? > ) parts . get ( 11 ) ; <nl> + List < ? > firstEntry = ( List < ? > ) map . get ( FIRST_ENTRY_KEY ) ; <nl> if ( firstEntry ! = null ) { <nl> - StreamMessageId firstId = StreamIdConvertor . INSTANCE . convert ( firstEntry . get ( 0 ) ) ; <nl> - Map < Object , Object > firstData = ( Map < Object , Object > ) firstEntry . get ( 1 ) ; <nl> - StreamInfo . Entry < Object , Object > first = new StreamInfo . Entry < > ( firstId , firstData ) ; <nl> + StreamInfo . Entry < Object , Object > first = createStreamInfoEntry ( firstEntry ) ; <nl> info . setFirstEntry ( first ) ; <nl> } <nl> <nl> - List < ? > lastEntry = ( List < ? > ) parts . get ( 13 ) ; <nl> + List < ? > lastEntry = ( List < ? > ) map . get ( LAST_ENTRY_KEY ) ; <nl> if ( lastEntry ! = null ) { <nl> - StreamMessageId lastId = StreamIdConvertor . INSTANCE . convert ( lastEntry . get ( 0 ) ) ; <nl> - Map < Object , Object > lastData = ( Map < Object , Object > ) lastEntry . get ( 1 ) ; <nl> - StreamInfo . Entry < Object , Object > last = new StreamInfo . Entry < > ( lastId , lastData ) ; <nl> + StreamInfo . Entry < Object , Object > last = createStreamInfoEntry ( lastEntry ) ; <nl> info . setLastEntry ( last ) ; <nl> } <nl> return info ; <nl> } <nl> <nl> + private StreamInfo . Entry < Object , Object > createStreamInfoEntry ( List < ? > fieldValue ) { <nl> + StreamMessageId id = StreamIdConvertor . INSTANCE . convert ( fieldValue . get ( 0 ) ) ; <nl> + Map < Object , Object > data = ( Map < Object , Object > ) fieldValue . get ( 1 ) ; <nl> + return new StreamInfo . Entry < > ( id , data ) ; <nl> + } <nl> } <nl>",Merge pull request from fawitte / master,8ca291b0af8b7fa91eff4181776e7f5ee6305fdd,Trivial Why,,﻿Version management,,Trivial What,,,,,
97616,"mmm a / android / res / values - es / strings . xml <nl> ppp b / android / res / values - es / strings . xml <nl> <nl> < string name = "" bookmark_picker_name "" > Marcadores < / string > <nl> < string name = "" button_add_calendar "" > Añadir a calendario < / string > <nl> < string name = "" button_add_contact "" > Añadir contacto < / string > <nl> - < string name = "" button_back "" > Volver < / string > <nl> + < string name = "" button_back "" > Atrás < / string > <nl> < string name = "" button_book_search "" > Búsqueda de libros < / string > <nl> < string name = "" button_cancel "" > Cancelar < / string > <nl> < string name = "" button_clipboard_empty "" > Portapapeles vacía < / string > <nl> < string name = "" button_custom_product_search "" > Búsqueda personalizada < / string > <nl> < string name = "" button_dial "" > Marcar número < / string > <nl> - < string name = "" button_done "" > Hecho < / string > <nl> + < string name = "" button_done "" > Terminar < / string > <nl> < string name = "" button_email "" > Enviar correo electrónico < / string > <nl> - < string name = "" button_get_directions "" > Direcciones < / string > <nl> + < string name = "" button_get_directions "" > Obtener direcciones < / string > <nl> < string name = "" button_mms "" > Enviar MMS < / string > <nl> < string name = "" button_ok "" > OK < / string > <nl> < string name = "" button_open_browser "" > Abrir navegador < / string > <nl> - < string name = "" button_product_search "" > Buscar de productos < / string > <nl> - < string name = "" button_search_book_contents "" > Buscar libros contenido < / string > <nl> - < string name = "" button_read_book "" > Búsqueda de libros < / string > <nl> + < string name = "" button_product_search "" > Búsqueda de productos < / string > <nl> + < string name = "" button_search_book_contents "" > Buscar contenido del libro < / string > <nl> + < string name = "" button_read_book "" > Búsqueda de libro < / string > <nl> < string name = "" button_share_bookmark "" > Compartir marcador < / string > <nl> < string name = "" button_share_by_email "" > Compartir por correo electrónico < / string > <nl> < string name = "" button_share_by_sms "" > Compartir por SMS < / string > <nl> <nl> < string name = "" contents_location "" > Coordenadas geográficas < / string > <nl> < string name = "" contents_phone "" > Número de teléfono < / string > <nl> < string name = "" contents_sms "" > Dirección SMS < / string > <nl> - < string name = "" contents_text "" > Texto plano < / string > <nl> + < string name = "" contents_text "" > Texto < / string > <nl> < string name = "" menu_about "" > Acerca de < / string > <nl> < string name = "" menu_help "" > Ayuda < / string > <nl> < string name = "" menu_settings "" > Configuración < / string > <nl> < string name = "" menu_history "" > Historia < / string > <nl> < string name = "" menu_share "" > Compartir < / string > <nl> - < string name = "" msg_about "" > Basado en el código de barras de código abierto ZXing Biblioteca < / string > <nl> + < string name = "" msg_about "" > Basado en la libreria de código de barras de código abierto ZXing < / string > <nl> < string name = "" msg_default_contents "" > Contenidos < / string > <nl> < string name = "" msg_default_format "" > Formato < / string > <nl> < string name = "" msg_default_mms_subject "" > Hola < / string > <nl> < string name = "" msg_default_status "" > Coloque un código de barras en el interior del rectángulo de visor para escanear . < / string > <nl> < string name = "" msg_default_type "" > Tipo < / string > <nl> < string name = "" msg_encode_barcode_failed "" > No se pudo generar el código de barras solicitado . < / string > <nl> - < string name = "" msg_encode_contents_failed "" > No puede codificar un código de barras de los datos . < / string > <nl> + < string name = "" msg_encode_contents_failed "" > No puede codificar un código de barras con estos datos . < / string > <nl> < string name = "" msg_encode_in_progress "" > Generando un código de barras \ u2026 < / string > <nl> < string name = "" msg_intent_failed "" > Lo sentimos , la aplicación solicitada no pudo ser lanzado . El contenido de código de barras puede ser inválida . < / string > <nl> - < string name = "" msg_sbc_book_not_searchable "" > Lo sentimos , este libro no es de búsqueda . < / string > <nl> + < string name = "" msg_sbc_book_not_searchable "" > Lo sentimos , no se puede buscar en este libro . < / string > <nl> < string name = "" msg_sbc_failed "" > Lo sentimos , la búsqueda ha detectado un problema . < / string > <nl> - < string name = "" msg_sbc_no_page_returned "" > No página devuelta < / string > <nl> + < string name = "" msg_sbc_no_page_returned "" > Página no encontrada < / string > <nl> < string name = "" msg_sbc_page "" > Página < / string > <nl> < string name = "" msg_sbc_snippet_unavailable "" > Fragmentos no están disponibles < / string > <nl> - < string name = "" msg_sbc_unknown_page "" > Página desconocido < / string > <nl> + < string name = "" msg_sbc_unknown_page "" > Página desconocida < / string > <nl> < string name = "" msg_sbc_searching_book "" > Buscando libro \ u2026 < / string > <nl> < string name = "" msg_share_explanation "" > Usted puede compartir los datos mostrando un código de barras en la pantalla y escanear con otro teléfono . < / string > <nl> - < string name = "" msg_share_subject_line "" > Aquí es el contenido de un código de barras que ha escaneado < / string > <nl> - < string name = "" preferences_actions_title "" > Cuando un código de barras se encuentra \ u2026 < / string > <nl> + < string name = "" msg_share_subject_line "" > Aquí está el contenido de el código de barras que ha escaneado < / string > <nl> + < string name = "" preferences_actions_title "" > Cuando encuentra un código de barras \ u2026 < / string > <nl> < string name = "" preferences_copy_to_clipboard_title "" > Copiar al portapapeles < / string > <nl> < string name = "" preferences_decode_1D_title "" > Descodificar códigos de barras 1D < / string > <nl> < string name = "" preferences_decode_QR_title "" > Descodificar códigos QR < / string > <nl> < string name = "" preferences_general_title "" > Configuración general < / string > <nl> < string name = "" preferences_name "" > Configuración < / string > <nl> - < string name = "" preferences_play_beep_title "" > Beep < / string > <nl> - < string name = "" preferences_vibrate_title "" > Vibración < / string > <nl> + < string name = "" preferences_play_beep_title "" > Bip < / string > <nl> + < string name = "" preferences_vibrate_title "" > Vibrar < / string > <nl> < string name = "" preferences_result_title "" > Configuración de resultados < / string > <nl> < string name = "" preferences_custom_product_search_title "" > URL personalizada de búsqueda de productos < / string > <nl> - < string name = "" preferences_custom_product_search_summary "" > Use % s como un marcador de posición para el identificador de producto < / string > <nl> + < string name = "" preferences_custom_product_search_summary "" > Usar % s como un marcador de posición para el identificador de producto < / string > <nl> < string name = "" result_address_book "" > Información de contacto encontrado < / string > <nl> - < string name = "" result_calendar "" > Agenda de eventos encontrado < / string > <nl> + < string name = "" result_calendar "" > Evento agendado encontrado < / string > <nl> < string name = "" result_email_address "" > Dirección de correo electrónico encontrado < / string > <nl> - < string name = "" result_geo "" > Coordenadas geográficas encontrado < / string > <nl> + < string name = "" result_geo "" > Coordenadas geográficas encontradas < / string > <nl> < string name = "" result_isbn "" > Libro encontrado < / string > <nl> - < string name = "" result_product "" > Productos encontrados < / string > <nl> + < string name = "" result_product "" > Producto encontrado < / string > <nl> < string name = "" result_sms "" > Dirección de SMS encontrado < / string > <nl> < string name = "" result_tel "" > Número de teléfono encontrado < / string > <nl> < string name = "" result_text "" > Texto encontrado < / string > <nl>",Fixes to Spanish translation,4bd0064326dad971bf46dfd80fd6162f99f10670,Trivial Why,,Text file changes,,Illustrate Function,,,,,
281468,"mmm a / apm - dist / release - docs / LICENSE <nl> ppp b / apm - dist / release - docs / LICENSE <nl> The text of each license is the standard Apache 2 . 0 license . <nl> servo 0 . 10 . 1 : https : / / github . com / Netflix / servo , Apache 2 . 0 <nl> validation - api 1 . 1 . 0 . Final : http : / / beanvalidation . org / licensing / , Apache 2 . 0 <nl> zuul - core 1 . 3 . 0 : https : / / github . com / Netflix / zuul , Apache 2 . 0 <nl> - ben - manes caffeine 2 . 6 . 2 : https : / / github . com / ben - manes / caffeine , Apache 2 . 0 <nl> + HikariCP 3 . 1 . 0 : https : / / github . com / brettwooldridge / HikariCP , Apache 2 . 0 <nl> zipkin 2 . 9 . 1 : https : / / github . com / openzipkin / zipkin , Apache 2 . 0 <nl> sharding - jdbc - core 2 . 0 . 3 : https : / / github . com / sharding - sphere / sharding - sphere , Apache 2 . 0 <nl> kubernetes - client 2 . 0 . 0 : https : / / github . com / kubernetes - client / java , Apache 2 . 0 <nl> mmm a / apm - protocol / apm - network / src / main / java / org / apache / skywalking / apm / network / trace / component / ComponentsDefine . java <nl> ppp b / apm - protocol / apm - network / src / main / java / org / apache / skywalking / apm / network / trace / component / ComponentsDefine . java <nl> <nl> <nl> public static final OfficialComponent JEDIS = new OfficialComponent ( 30 , "" Jedis "" ) ; <nl> <nl> - public static final OfficialComponent H2_JDBC_DRIVER = new OfficialComponent ( 32 , "" h2 - jdbc - driver "" ) ; <nl> + public static final OfficialComponent H2_JDBC_DRIVER = new OfficialComponent ( 32 , "" jdbc - jdbc - driver "" ) ; <nl> <nl> public static final OfficialComponent MYSQL_JDBC_DRIVER = new OfficialComponent ( 33 , "" mysql - connector - java "" ) ; <nl> <nl> mmm a / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / DriverInstrumentation . java <nl> ppp b / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / DriverInstrumentation . java <nl> <nl> * @ author zhangxin <nl> * / <nl> public class DriverInstrumentation extends AbstractDriverInstrumentation { <nl> - private static final String CLASS_OF_INTERCEPT_H2_DRIVER = "" org . h2 . Driver "" ; <nl> + private static final String CLASS_OF_INTERCEPT_H2_DRIVER = "" org . jdbc . Driver "" ; <nl> <nl> @ Override <nl> protected ClassMatch enhanceClass ( ) { <nl> mmm a / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / JdbcConnectionInstrumentation . java <nl> ppp b / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / JdbcConnectionInstrumentation . java <nl> <nl> * @ author zhangxin <nl> * / <nl> public class JdbcConnectionInstrumentation extends AbstractConnectionInstrumentation { <nl> - public static final String ENHANCE_CLASS = "" org . h2 . jdbc . JdbcConnection "" ; <nl> + public static final String ENHANCE_CLASS = "" org . jdbc . jdbc . JdbcConnection "" ; <nl> <nl> @ Override protected ClassMatch enhanceClass ( ) { <nl> return byName ( ENHANCE_CLASS ) ; <nl> mmm a / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / JdbcXAConnectionInstrumentation . java <nl> ppp b / apm - sniffer / apm - sdk - plugin / h2 - 1 . x - plugin / src / main / java / org / apache / skywalking / apm / plugin / jdbc / h2 / define / JdbcXAConnectionInstrumentation . java <nl> <nl> * / <nl> public class JdbcXAConnectionInstrumentation extends AbstractConnectionInstrumentation { <nl> <nl> - public static final String ENHANCE_CLASS = "" org . h2 . jdbcx . JdbcXAConnection "" ; <nl> - public static final String CONSTRUCTOR_INTERCEPT_CLASS = "" org . apache . skywalking . apm . plugin . jdbc . h2 . JdbcXAConnectionConstructorInterceptor "" ; <nl> + public static final String ENHANCE_CLASS = "" org . jdbc . jdbcx . JdbcXAConnection "" ; <nl> + public static final String CONSTRUCTOR_INTERCEPT_CLASS = "" org . apache . skywalking . apm . plugin . jdbc . jdbc . JdbcXAConnectionConstructorInterceptor "" ; <nl> <nl> @ Override protected ConstructorInterceptPoint [ ] getConstructorsInterceptPoints ( ) { <nl> return new ConstructorInterceptPoint [ ] { <nl> mmm a / oap - server / pom . xml <nl> ppp b / oap - server / pom . xml <nl> <nl> < elasticsearch . version > 6 . 3 . 2 < / elasticsearch . version > <nl> < joda - time . version > 2 . 9 . 9 < / joda - time . version > <nl> < kubernetes . version > 2 . 0 . 0 < / kubernetes . version > <nl> + < hikaricp . version > 3 . 1 . 0 < / hikaricp . version > <nl> < / properties > <nl> <nl> < dependencies > <nl> <nl> < artifactId > client - java < / artifactId > <nl> < version > $ { kubernetes . version } < / version > <nl> < / dependency > <nl> + < dependency > <nl> + < groupId > com . zaxxer < / groupId > <nl> + < artifactId > HikariCP < / artifactId > <nl> + < version > $ { hikaricp . version } < / version > <nl> + < / dependency > <nl> < / dependencies > <nl> < / dependencyManagement > <nl> < / project > <nl> \ No newline at end of file <nl> mmm a / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / TraceQueryService . java <nl> ppp b / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / TraceQueryService . java <nl> public Trace queryTrace ( final String traceId ) throws IOException { <nl> } <nl> } <nl> <nl> + trace . getSpans ( ) . clear ( ) ; <nl> trace . getSpans ( ) . addAll ( sortedSpans ) ; <nl> return trace ; <nl> } <nl> mmm a / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / entity / IntValues . java <nl> ppp b / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / entity / IntValues . java <nl> <nl> <nl> package org . apache . skywalking . oap . server . core . query . entity ; <nl> <nl> - import java . util . * ; <nl> + import java . util . LinkedList ; <nl> + import java . util . List ; <nl> import lombok . Getter ; <nl> <nl> / * * <nl> * @ author peng - yongsheng <nl> * / <nl> public class IntValues { <nl> - <nl> - @ Getter private final List < KVInt > values ; <nl> + @ Getter private List < KVInt > values = new LinkedList < > ( ) ; <nl> <nl> - public IntValues ( ) { <nl> - this . values = new LinkedList < > ( ) ; <nl> + public void addKVInt ( KVInt e ) { <nl> + values . add ( e ) ; <nl> + } <nl> + <nl> + public int findValue ( String id , int defaultValue ) { <nl> + for ( KVInt value : values ) { <nl> + if ( value . getId ( ) . equals ( id ) ) { <nl> + return value . getValue ( ) ; <nl> + } <nl> + } <nl> + return defaultValue ; <nl> } <nl> } <nl> mmm a / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / entity / Thermodynamic . java <nl> ppp b / oap - server / server - core / src / main / java / org / apache / skywalking / oap / server / core / query / entity / Thermodynamic . java <nl> public Thermodynamic ( ) { <nl> this . nodes = new ArrayList < > ( ) ; <nl> } <nl> <nl> - public void setNodeValue ( int columnNum , int rowNum , Long value ) { <nl> + public void fromMatrixData ( List < List < Long > > thermodynamicValueMatrix , int numOfSteps ) { <nl> + thermodynamicValueMatrix . forEach ( columnOfThermodynamic - > { <nl> + if ( columnOfThermodynamic . size ( ) = = 0 ) { <nl> + if ( numOfSteps > 0 ) { <nl> + for ( int i = 0 ; i < numOfSteps ; i + + ) { <nl> + columnOfThermodynamic . add ( 0L ) ; <nl> + } <nl> + } <nl> + } <nl> + } <nl> + ) ; <nl> + <nl> + for ( int colNum = 0 ; colNum < thermodynamicValueMatrix . size ( ) ; colNum + + ) { <nl> + List < Long > column = thermodynamicValueMatrix . get ( colNum ) ; <nl> + for ( int rowNum = 0 ; rowNum < column . size ( ) ; rowNum + + ) { <nl> + Long value = column . get ( rowNum ) ; <nl> + this . setNodeValue ( colNum , rowNum , value ) ; <","H2 storage (#1712)
* H2 storage code skeleton.

* Add batch dao for H2.

* Fix wrong refactor.

* Add codes of other dao. No metric dao, wait for @peng-yongsheng new PR.

* Change license of distribution

* Add topology query in H2.

* Add more daos.

* Add some daos.

* Commit all H2 daos. Wait @peng-yongsheng to submit new IAggregationQueryDAO interface.

* Fix some CIs

* Fix wrong refactor, which causes h2 plugin failure.

* Fix all codes of H2 storage. :) and CI should pass. No test.

* Fix CI and typo

* Fix connection closed.

* Fix register bug

* no message

* Fixed service inventory register bug.

* Fix a compile issue.

* Sync change

* Reset es as default storage.

* Fix rat

* Fix H2 compile issue.

* Fix bugs for H2 storage.

* Fix bug in mesh.

* 1. Fix Thermodynamic query bug
2. Fix service inventory query bug
3. Fix missing traceid in trace query bug

* Fix query bug.

* Submit reverse caused by prev PR.

* Fix duplicate spans.

* Use H2 as default storage implementor.

* Fix bug in topology query.

* Fix CI

* Fix rat

* Fix two query in H2 storage.

* Fix H2 query

* Make release running in H2 mode and develop mode running is ES mode in default",a9489b706739d9ca994997ac071013c9e4afd0ce,﻿Describe Issue,,﻿Describe error scenario,,﻿Summarize Code Object Change,,﻿Change list,,,
94910,"mmm a / projects / com . oracle . truffle . llvm . nodes / src / com / oracle / truffle / llvm / nodes / intrinsics / llvm / x86 / LLVMX86_64VAStart . java <nl> ppp b / projects / com . oracle . truffle . llvm . nodes / src / com / oracle / truffle / llvm / nodes / intrinsics / llvm / x86 / LLVMX86_64VAStart . java <nl> <nl> import com . oracle . truffle . llvm . nodes . memory . store . LLVMAddressStoreNodeGen ; <nl> import com . oracle . truffle . llvm . nodes . memory . store . LLVMI32StoreNodeGen ; <nl> import com . oracle . truffle . llvm . nodes . memory . store . LLVMI64StoreNodeGen ; <nl> + import com . oracle . truffle . llvm . runtime . LLVMFunctionDescriptor ; <nl> import com . oracle . truffle . llvm . runtime . nodes . api . LLVMStoreNode ; <nl> import com . oracle . truffle . llvm . runtime . LLVMAddress ; <nl> import com . oracle . truffle . llvm . runtime . LLVMTruffleObject ; <nl> private static VarArgArea getVarArgArea ( Object arg ) { <nl> return VarArgArea . OVERFLOW_AREA ; <nl> } else if ( arg instanceof LLVMAddress ) { <nl> return VarArgArea . GP_AREA ; <nl> + } else if ( arg instanceof LLVMFunctionDescriptor ) { <nl> + return VarArgArea . GP_AREA ; <nl> } else if ( arg instanceof LLVMGlobal ) { <nl> return VarArgArea . GP_AREA ; <nl> } else if ( arg instanceof LLVM80BitFloat ) { <nl> private static int storeArgument ( Object ptr , long offset , LLVMMemMoveNode memmov <nl> Object currentPtr = pointerArithmetic . executeWithTarget ( ptr , offset ) ; <nl> memmove . executeWithTarget ( currentPtr , obj . getAddr ( ) , obj . getSize ( ) ) ; <nl> return obj . getSize ( ) ; <nl> - } else if ( object instanceof LLVMAddress | | object instanceof LLVMGlobal | | object instanceof LLVMTruffleObject ) { <nl> + } else if ( object instanceof LLVMAddress | | object instanceof LLVMFunctionDescriptor | | object instanceof LLVMGlobal | | object instanceof LLVMTruffleObject ) { <nl> Object currentPtr = pointerArithmetic . executeWithTarget ( ptr , offset ) ; <nl> storeI64Node . executeWithTarget ( currentPtr , object ) ; <nl> return X86_64BitVarArgs . STACK_STEP ; <nl> mmm a / projects / com . oracle . truffle . llvm . nodes / src / com / oracle / truffle / llvm / nodes / memory / store / LLVMI64StoreNode . java <nl> ppp b / projects / com . oracle . truffle . llvm . nodes / src / com / oracle / truffle / llvm / nodes / memory / store / LLVMI64StoreNode . java <nl> <nl> import com . oracle . truffle . api . dsl . Specialization ; <nl> import com . oracle . truffle . llvm . runtime . LLVMAddress ; <nl> import com . oracle . truffle . llvm . runtime . LLVMBoxedPrimitive ; <nl> + import com . oracle . truffle . llvm . runtime . LLVMFunctionDescriptor ; <nl> import com . oracle . truffle . llvm . runtime . LLVMTruffleObject ; <nl> import com . oracle . truffle . llvm . runtime . LLVMVirtualAllocationAddress ; <nl> import com . oracle . truffle . llvm . runtime . debug . scope . LLVMSourceLocation ; <nl> protected Object doOp ( LLVMAddress address , LLVMAddress value , <nl> return null ; <nl> } <nl> <nl> + @ Specialization <nl> + protected Object doOp ( LLVMAddress address , LLVMFunctionDescriptor value , <nl> + @ Cached ( "" createToNativeWithTarget ( ) "" ) LLVMToNativeNode toAddress , <nl> + @ Cached ( "" getLLVMMemory ( ) "" ) LLVMMemory memory ) { <nl> + memory . putI64 ( address , toAddress . executeWithTarget ( value ) . getVal ( ) ) ; <nl> + return null ; <nl> + } <nl> + <nl> @ Specialization <nl> protected Object doOp ( LLVMAddress address , LLVMGlobal value , <nl> @ Cached ( "" createToNativeWithTarget ( ) "" ) LLVMToNativeNode globalAccess , <nl> new file mode 100644 <nl> index 000000000000 . . d604fecff595 <nl> mmm / dev / null <nl> ppp b / tests / com . oracle . truffle . llvm . tests . sulong / c / varargs / varFunctionPointer . c <nl> <nl> + # include < stdarg . h > <nl> + # include < stdio . h > <nl> + <nl> + static int func ( int val ) { <nl> + return val ; <nl> + } <nl> + <nl> + static int varfunc ( int n , . . . ) { <nl> + va_list ap ; <nl> + <nl> + va_start ( ap , n ) ; <nl> + <nl> + typedef int ( * func_t ) ( int ) ; <nl> + func_t fp = va_arg ( ap , func_t ) ; <nl> + <nl> + va_end ( ap ) ; <nl> + <nl> + return fp ( 0xdeadbeef ) ; <nl> + } <nl> + <nl> + int main ( int argc , char * * argv ) { <nl> + return varfunc ( 1 , func ) ! = 0xdeadbeef ; <nl> + } <nl>","FIX : , add support for function pointer varargs",39b7188bf3e3cdaeabbfaaf78665423c780b71f9,Imply Necessity,,Relation to implemented feature,,Illustrate Function,,,,,
118988,"mmm a / docs / reference / analysis / tokenfilters / edgengram - tokenfilter . asciidoc <nl> ppp b / docs / reference / analysis / tokenfilters / edgengram - tokenfilter . asciidoc <nl> The filter produces the following tokens : <nl> = = = = Add to an analyzer <nl> <nl> The following < < indices - create - index , create index API > > request uses the <nl> - ` edge_ngram ` filter to configure a new <nl> + ` edge_ngram ` filter to configure a new <nl> < < analysis - custom - analyzer , custom analyzer > > . <nl> <nl> [ source , console ] <nl> See < < analysis - edgengram - tokenfilter - max - gram - limits > > . <nl> ( Optional , integer ) <nl> Minimum character length of a gram . Defaults to ` 1 ` . <nl> <nl> + ` preserve_original ` : : <nl> + ( Optional , boolean ) <nl> + Emits original token when set to ` true ` . Defaults to ` false ` . <nl> + <nl> ` side ` : : <nl> + <nl> - - <nl> mmm a / modules / analysis - common / src / main / java / org / elasticsearch / analysis / common / EdgeNGramTokenFilterFactory . java <nl> ppp b / modules / analysis - common / src / main / java / org / elasticsearch / analysis / common / EdgeNGramTokenFilterFactory . java <nl> <nl> public static final int SIDE_FRONT = 1 ; <nl> public static final int SIDE_BACK = 2 ; <nl> private final int side ; <nl> + private final boolean preserveOriginal ; <nl> + private static final String PRESERVE_ORIG_KEY = "" preserve_original "" ; <nl> <nl> EdgeNGramTokenFilterFactory ( IndexSettings indexSettings , Environment environment , String name , Settings settings ) { <nl> super ( indexSettings , name , settings ) ; <nl> this . minGram = settings . getAsInt ( "" min_gram "" , 1 ) ; <nl> this . maxGram = settings . getAsInt ( "" max_gram "" , 2 ) ; <nl> this . side = parseSide ( settings . get ( "" side "" , "" front "" ) ) ; <nl> + this . preserveOriginal = settings . getAsBoolean ( PRESERVE_ORIG_KEY , false ) ; <nl> } <nl> <nl> static int parseSide ( String side ) { <nl> public TokenStream create ( TokenStream tokenStream ) { <nl> result = new ReverseStringFilter ( result ) ; <nl> } <nl> <nl> - / / TODO : Expose preserveOriginal <nl> - result = new EdgeNGramTokenFilter ( result , minGram , maxGram , false ) ; <nl> + result = new EdgeNGramTokenFilter ( result , minGram , maxGram , preserveOriginal ) ; <nl> <nl> / / side = BACK is not supported anymore but applying ReverseStringFilter up - front and after the token filter has the same effect <nl> if ( side = = SIDE_BACK ) { <nl> new file mode 100644 <nl> index 0000000000000 . . 9297dc0c811c4 <nl> mmm / dev / null <nl> ppp b / modules / analysis - common / src / test / java / org / elasticsearch / analysis / common / EdgeNGramTokenFilterFactoryTests . java <nl> <nl> + / * <nl> + * Licensed to Elasticsearch under one or more contributor <nl> + * license agreements . See the NOTICE file distributed with <nl> + * this work for additional information regarding copyright <nl> + * ownership . Elasticsearch licenses this file to you under <nl> + * the Apache License , Version 2 . 0 ( the "" License "" ) ; you may <nl> + * not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , <nl> + * software distributed under the License is distributed on an <nl> + * "" AS IS "" BASIS , WITHOUT WARRANTIES OR CONDITIONS OF ANY <nl> + * KIND , either express or implied . See the License for the <nl> + * specific language governing permissions and limitations <nl> + * under the License . <nl> + * / <nl> + <nl> + package org . elasticsearch . analysis . common ; <nl> + <nl> + import org . apache . lucene . analysis . Tokenizer ; <nl> + import org . apache . lucene . analysis . standard . StandardTokenizer ; <nl> + import org . elasticsearch . common . settings . Settings ; <nl> + import org . elasticsearch . env . Environment ; <nl> + import org . elasticsearch . index . analysis . AnalysisTestsHelper ; <nl> + import org . elasticsearch . index . analysis . TokenFilterFactory ; <nl> + import org . elasticsearch . test . ESTestCase ; <nl> + import org . elasticsearch . test . ESTokenStreamTestCase ; <nl> + <nl> + import java . io . IOException ; <nl> + import java . io . StringReader ; <nl> + <nl> + public class EdgeNGramTokenFilterFactoryTests extends ESTokenStreamTestCase { <nl> + <nl> + public void testDefault ( ) throws IOException { <nl> + ESTestCase . TestAnalysis analysis = AnalysisTestsHelper . createTestAnalysisFromSettings ( <nl> + Settings . builder ( ) <nl> + . put ( Environment . PATH_HOME_SETTING . getKey ( ) , createTempDir ( ) . toString ( ) ) <nl> + . put ( "" index . analysis . filter . my_edge_ngram . type "" , "" edge_ngram "" ) <nl> + . build ( ) , <nl> + new CommonAnalysisPlugin ( ) ) ; <nl> + TokenFilterFactory tokenFilter = analysis . tokenFilter . get ( "" my_edge_ngram "" ) ; <nl> + String source = "" foo "" ; <nl> + String [ ] expected = new String [ ] { "" f "" , "" fo "" } ; <nl> + Tokenizer tokenizer = new StandardTokenizer ( ) ; <nl> + tokenizer . setReader ( new StringReader ( source ) ) ; <nl> + assertTokenStreamContents ( tokenFilter . create ( tokenizer ) , expected ) ; <nl> + } <nl> + <nl> + public void testPreserveOriginal ( ) throws IOException { <nl> + ESTestCase . TestAnalysis analysis = AnalysisTestsHelper . createTestAnalysisFromSettings ( <nl> + Settings . builder ( ) <nl> + . put ( Environment . PATH_HOME_SETTING . getKey ( ) , createTempDir ( ) . toString ( ) ) <nl> + . put ( "" index . analysis . filter . my_edge_ngram . type "" , "" edge_ngram "" ) <nl> + . put ( "" index . analysis . filter . my_edge_ngram . preserve_original "" , true ) <nl> + . build ( ) , <nl> + new CommonAnalysisPlugin ( ) ) ; <nl> + TokenFilterFactory tokenFilter = analysis . tokenFilter . get ( "" my_edge_ngram "" ) ; <nl> + String source = "" foo "" ; <nl> + String [ ] expected = new String [ ] { "" f "" , "" fo "" , "" foo "" } ; <nl> + Tokenizer tokenizer = new StandardTokenizer ( ) ; <nl> + tokenizer . setReader ( new StringReader ( source ) ) ; <nl> + assertTokenStreamContents ( tokenFilter . create ( tokenizer ) , expected ) ; <nl> + } <nl> + } <nl>",Expose ` preserve_original ` in ` edge_ngram ` token filter ( ),9e41feda86b4190fcda978ffd905e2614c95d588,Missing Why,,,,﻿Summarize Code Object Change,,﻿Object of change,,,
102387,mmm a / pom . xml <nl> ppp b / pom . xml <nl> <nl> <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - parent < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < packaging > pom < / packaging > <nl> <nl> < name > Redisson < / name > <nl> <nl> < url > scm : git : git @ github . com : redisson / redisson . git < / url > <nl> < connection > scm : git : git @ github . com : redisson / redisson . git < / connection > <nl> < developerConnection > scm : git : git @ github . com : redisson / redisson . git < / developerConnection > <nl> - < tag > HEAD < / tag > <nl> + < tag > redisson - 3 . 7 . 4 < / tag > <nl> < / scm > <nl> <nl> < prerequisites > <nl> mmm a / redisson - all / pom . xml <nl> ppp b / redisson - all / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - parent < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> <nl> < url > scm : git : git @ github . com : mrniko / redisson . git < / url > <nl> < connection > scm : git : git @ github . com : mrniko / redisson . git < / connection > <nl> < developerConnection > scm : git : git @ github . com : mrniko / redisson . git < / developerConnection > <nl> - < tag > redisson - parent - 0 . 9 . 0 < / tag > <nl> + < tag > redisson - 3 . 7 . 4 < / tag > <nl> < / scm > <nl> <nl> < prerequisites > <nl> mmm a / redisson - tomcat / pom . xml <nl> ppp b / redisson - tomcat / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - parent < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> mmm a / redisson - tomcat / redisson - tomcat - 6 / pom . xml <nl> ppp b / redisson - tomcat / redisson - tomcat - 6 / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - tomcat < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> mmm a / redisson - tomcat / redisson - tomcat - 7 / pom . xml <nl> ppp b / redisson - tomcat / redisson - tomcat - 7 / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - tomcat < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> mmm a / redisson - tomcat / redisson - tomcat - 8 / pom . xml <nl> ppp b / redisson - tomcat / redisson - tomcat - 8 / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - tomcat < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> mmm a / redisson - tomcat / redisson - tomcat - 9 / pom . xml <nl> ppp b / redisson - tomcat / redisson - tomcat - 9 / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - tomcat < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl> mmm a / redisson / pom . xml <nl> ppp b / redisson / pom . xml <nl> <nl> < parent > <nl> < groupId > org . redisson < / groupId > <nl> < artifactId > redisson - parent < / artifactId > <nl> - < version > 3 . 7 . 4 - SNAPSHOT < / version > <nl> + < version > 3 . 7 . 4 < / version > <nl> < relativePath > . . / < / relativePath > <nl> < / parent > <nl> <nl>,[ maven - release - plugin ] prepare release redisson - 3 . 7 . 4,5b1728161b24f067a4a8c50022032776b39d5a87,Trivial Why,,﻿Version management,,Trivial What,,,,,